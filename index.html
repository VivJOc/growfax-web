<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Growfax ‚Äî Downloads & Role Shop</title>
  <style>
    :root {
      --bg:#0f1720;
      --text:#e6eef8;
      --subtext:#9fb3d8;
      --muted:rgba(255,255,255,0.45);
      --accent:#2563eb;
      --card-bg:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      --input-height:40px;
      --container-max:980px;
    }
    body.light {
      --bg:#f5f7fa;
      --text:#0f1720;
      --subtext:#42546e;
      --muted:rgba(0,0,0,0.45);
      --accent:#0ea5e9;
      --card-bg:#fff;
    }
    html,body{height:100%; margin:0;}
    body{
      background:var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      display:flex;
      justify-content:flex-start;
      align-items:flex-start;
      padding:18px;
      box-sizing:border-box;
    }
    .container{width:100%; max-width:var(--container-max); margin:0 auto;}
    .card{background:var(--card-bg); border-radius:12px; padding:18px; box-shadow:0 6px 24px rgba(2,6,23,0.45); margin-bottom:18px;}
    .controls{display:flex; gap:8px; justify-content:flex-end; margin-bottom:10px; flex-wrap:wrap;}
    .btn-small{background:none; border:1px solid rgba(255,255,255,0.08); color:var(--subtext); padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:600; min-width:120px;}
    .btn-small:active{transform:translateY(1px);}
    .banner{width:100%; height:auto; border-radius:10px; margin-bottom:12px;}
    h1{margin:0 0 6px 0; font-size:clamp(18px,3vw,24px);}
    p.lead{margin:0 0 14px 0; color:var(--subtext); font-size:14px;}
    #clock{color:var(--subtext); font-size:13px; margin-bottom:12px;}
    .download-grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap:10px; margin-top:8px;}
    .btn-download{background:linear-gradient(90deg,#2563eb,#06b6d4); color:#fff; padding:12px; border-radius:10px; border:none; cursor:pointer; font-weight:700; display:inline-flex; align-items:center; justify-content:center; gap:8px;}
    .btn-download:active{transform:translateY(1px);}
    .shop{margin-top:6px; display:grid; grid-template-columns:1fr; gap:12px;}
    .shop-header{display:flex; align-items:center; gap:8px;}
    .shop-title{font-size:15px; margin:0; font-weight:600; color:var(--text);}
    .shop-card{background:var(--card-bg); border-radius:10px; padding:14px; box-shadow:0 6px 20px rgba(2,6,23,0.28);}
    .inputs{display:flex; gap:16px; margin-top:8px; flex-wrap:wrap; align-items:flex-start;}
    .input-left{display:flex; flex-direction:column; gap:6px; flex:0 1 78%; min-width:220px; max-width:760px;}
    .input-right{display:flex; flex-direction:column; gap:6px; flex:0 1 18%; min-width:160px; max-width:220px;}
    label.field-label{font-size:13px; color:var(--subtext);}
    input[type="text"], input[type="email"]{height:var(--input-height); padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.06); color:var(--text); font-size:14px; width:100%;}
    .warning{color:#ffd166; font-size:13px; margin-top:8px; display:none;}
    .warning.show{display:block;}
    .email-error{color:#ff6b6b; font-size:13px; margin-top:6px; display:none;}
    .email-error.show{display:block;}
    .roles-grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:12px; margin-top:12px;}
    .role{border-radius:10px; padding:12px; display:flex; flex-direction:column; gap:8px;}
    .role .role-inner{background:var(--card-bg); border-radius:8px; padding:12px; box-shadow:0 4px 14px rgba(2,6,23,0.22); display:flex; flex-direction:column; gap:8px; align-items:center;}
    .role h3{margin:0; font-size:15px;}
    .role .price{color:var(--subtext); font-size:14px;}
    .paypal-wrapper{width:100%; display:flex; align-items:center; justify-content:center; margin-top:6px; transition:opacity .2s ease;}
    .paypal-wrapper.disabled{opacity:0.6; pointer-events:none;}
    .accepted-cards{display:flex; gap:8px; align-items:center; justify-content:center; margin-top:8px;}
    .accepted-cards img{height:20px; width:auto; object-fit:contain;}
    footer{margin-top:18px; color:var(--subtext); font-size:13px; text-align:center;}
    @media (max-width:900px){.inputs{flex-direction:column;}.input-left,.input-right{flex:1 1 100%;}.download-grid,.roles-grid{grid-template-columns:1fr;}}
  </style>
  <script src="https://www.paypal.com/sdk/js?client-id=AWomsHIdagP1tiIig6-Q5hOeENO3lhpbCO20tPsBa3CmUx77koWkm6oA1qZCklI7F7PsTa4joZruigyM&currency=USD" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="controls">
        <button class="btn-small" onclick="toggleTheme()">üåó Theme</button>
        <button class="btn-small" onclick="toggleLang()">üåç Indonesia</button>
      </div>
      <img src="gg.png" alt="Growfax Banner" class="banner"/>
      <h1 id="title">Growfax ‚Äî Download Files</h1>
      <p class="lead" id="desc">Choose the file you want to copy or download.</p>
      <div id="clock">Sydney Time: --:--:--</div>
      <div class="download-grid">
        <a class="btn-download" href="Growfax_Vhost.txt" download>Download ‚Äî Virtual Host</a>
        <button class="btn-download" onclick="copyText('powertunnel', this)">Copy ‚Äî Powertunnel</button>
        <button class="btn-download" onclick="copyText('surge', this)">Copy ‚Äî iOS (Surge)</button>
        <a class="btn-download" href="Growfax_Macos.txt" download>Download ‚Äî macOS</a>
      </div>
    </div>

    <section class="shop">
      <div class="shop-card shop-header">
        <h2 class="shop-title" id="roleshop">Role Shop</h2>
        <p style="margin:0;color:var(--subtext);font-size:13px;">Select a role to purchase using PayPal.</p>
      </div>

      <div class="shop-card">
        <div class="inputs">
          <div class="input-left">
            <label class="field-label" for="growid">GrowID</label>
            <input id="growid" type="text" placeholder="Enter your GrowID"/>
          </div>
          <div class="input-right">
            <label class="field-label" for="buyerEmail">Email</label>
            <input id="buyerEmail" type="email" placeholder="Enter your Email"/>
          </div>
        </div>
        <div id="warning" class="warning">‚ö†Ô∏è Please fill in your GrowID and Email to enable payment.</div>
        <div id="emailError" class="email-error">‚ö†Ô∏è Invalid email address ‚Äî must include "@".</div>
        <div class="roles-grid" id="rolesGrid"></div>
      </div>

      <footer>¬© 2025 Growfax</footer>
    </section>
  </div>

  <script>
    window.addEventListener("load", () => {
      if (window.emailjs) {
        try { emailjs.init("zEjStXCET2RlB2UuJ"); } catch(e){ console.warn("EmailJS init error", e); }
      }
    });

    const roles = [
      { name: "Moderator", price: "3.29" },
      { name: "Super Moderator", price: "5.39" },
      { name: "Developer", price: "8.68" },
      { name: "God", price: "11.86" },
      { name: "God Max", price: "27.55" }
    ];

    const growInput = document.getElementById("growid");
    const emailInput = document.getElementById("buyerEmail");
    const warningEl = document.getElementById("warning");
    const emailErrorEl = document.getElementById("emailError");
    const rolesGrid = document.getElementById("rolesGrid");

    function isEmailValid(email){ return email.includes("@"); }

    roles.forEach(role => {
      const wrap = document.createElement("div");
      wrap.className = "role";
      wrap.innerHTML = `
        <div class="role-inner">
          <h3>${role.name}</h3>
          <div class="price">$${role.price} ‚Äî PayPal</div>
          <div class="paypal-wrapper disabled" id="paypal-wrapper-${role.name.replace(/\s/g,'')}">
            <div id="paypal-button-${role.name.replace(/\s/g,'')}"></div>
          </div>
          <div class="accepted-cards">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal"/>
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg" alt="Visa"/>
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="MasterCard"/>
          </div>
        </div>`;
      rolesGrid.appendChild(wrap);

      (function renderPayPal(){
        if (window.paypal && paypal.Buttons) {
          paypal.Buttons({
            style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal"},
            createOrder:(data, actions)=>actions.order.create({
              purchase_units:[{amount:{value:role.price}}]
            }),
            onApprove:(data, actions)=>actions.order.capture().then(details=>{
              const growidVal=growInput.value.trim();
              const emailVal=emailInput.value.trim();
              const paypalName=details.payer?.name?.given_name||"Unknown";
              const paypalEmail=details.payer?.email_address||"Unknown";
              const amount=details.purchase_units?.[0]?.amount?.value||role.price;

              alert(`‚úÖ ${role.name} purchased successfully by ${paypalName}`);

              if(window.emailjs){
                // admin email
                emailjs.send("service_6ba3mun","template_06qc85l",{
                  to_email:"growfaxz@gmail.com",
                  growid:growidVal,
                  buyer_email:emailVal,
                  paypal_name:paypalName,
                  paypal_email:paypalEmail,
                  amount,
                  role:role.name
                }).then(()=>console.log("‚úÖ Email sent to admin"))
                  .catch(err=>console.error("Admin Email error",err));

                // buyer email
                emailjs.send("service_6ba3mun","template_f59miz8",{
                  to_email:emailVal,
                  growid:growidVal,
                  role:role.name,
                  amount,
                  paypal_email:paypalEmail
                }).then(()=>console.log("‚úÖ Email sent to buyer"))
                  .catch(err=>console.error("Buyer Email error",err));
              }
            }),
            onError:err=>console.error("PayPal error",err)
          }).render(`#paypal-button-${role.name.replace(/\s/g,'')}`);
        } else setTimeout(renderPayPal, 200);
      })();
    });

    function updatePayability(){
      const g=growInput.value.trim();
      const e=emailInput.value.trim();
      const valid=e.includes("@");
      const enable=g&&valid;
      document.querySelectorAll(".paypal-wrapper").forEach(w=>w.classList.toggle("disabled",!enable));
      warningEl.classList.toggle("show",!g||!e);
      emailErrorEl.classList.toggle("show",e&&!valid);
    }
    growInput.addEventListener("input",updatePayability);
    emailInput.addEventListener("input",updatePayability);

    const configData={
      powertunnel:`91.134.85.13 growtopia1.com
91.134.85.13 growtopia2.com
91.134.85.13 www.growtopia1.com
91.134.85.13 www.growtopia2.com`,
      surge:`[General]
bypass-system = true
[Rule]
FINAL,DIRECT
[Host]
growtopia1.com = 91.134.85.13
growtopia2.com = 91.134.85.13
www.growtopia1.com = 91.134.85.13
www.growtopia2.com = 91.134.85.13`
    };
    function copyText(key,btn){
      navigator.clipboard.writeText(configData[key]).then(()=>{
        const old=btn.textContent;
        btn.textContent="‚úÖ Copied!";
        setTimeout(()=>btn.textContent=old,1300);
      });
    }

    function updateClock(){
      const now=new Date();
      const syd=new Date(now.toLocaleString("en-US",{timeZone:"Australia/Sydney"}));
      document.getElementById("clock").textContent="Sydney Time: "+syd.toLocaleTimeString("en-GB");
    }
    setInterval(updateClock,1000); updateClock();

    function toggleTheme(){document.body.classList.toggle("light");}
    let lang="en";
    function toggleLang(){
      lang=lang==="en"?"id":"en";
      const en=lang==="en";
      document.querySelector(".btn-small[onclick='toggleLang()']").textContent=en?"üåç Indonesia":"üåç English";
      document.getElementById("title").textContent=en?"Growfax ‚Äî Download Files":"Growfax ‚Äî Unduh File";
      document.getElementById("desc").textContent=en?"Choose the file you want to copy or download.":"Pilih file yang ingin disalin atau diunduh.";
      document.getElementById("roleshop").textContent=en?"Role Shop":"Toko Role";
      warningEl.textContent=en?"‚ö†Ô∏è Please fill in your GrowID and Email to enable payment.":"‚ö†Ô∏è Isi GrowID dan Email terlebih dahulu untuk mengaktifkan pembayaran.";
      emailErrorEl.textContent=en?"‚ö†Ô∏è Invalid email address ‚Äî must include '@'.":"‚ö†Ô∏è Email tidak valid ‚Äî harus mengandung '@'.";
    }

    updatePayability();
  </script>
</body>
</html>
