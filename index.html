<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Growfax Official - Private Growtopia Server & Downloads</title>
<link rel="icon" href="Growfax_banner.jpg" type="image/jpeg">

<meta name="description" content="Situs resmi Growfax, private server Growtopia. Unduh file host terbaru untuk Android, Windows, dan iOS. Mainkan Growtopia dengan fitur eksklusif dan komunitas aktif!"
/>
<meta name="keywords" content="Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growfax, Growfax Android, Growfax Windows" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://growfax.web.id/home" />

<meta property="og:type" content="website" />
<meta property="og:url" content="https://growfax.web.id/home" />
<meta property="og:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta property="og:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami."
/>
<meta property="og:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content="https://growfax.web.id/home" />
<meta name="twitter:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta name="twitter:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami."
/>
<meta name="twitter:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> 

<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer ||
[];
  function gtag(){dataLayer.push(arguments);}
  gtag('config', 'G-XXXXXXXXXX'); // Placeholder ID for Growfax Analytics
</script>
<style>
  /* ============================================================
     Growfax Official ‚Äî FULL UI stylesheet (futuristic neon/fax)
     - Mobile-First Optimization Applied (Fixed Horizontal Scrolling)
     ============================================================ */

  /* Global Reset: Ensure padding/border don't cause overflow */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* NEW: Keyframes for Logo Animation */
  @keyframes pulse {
    0% { transform: scale(1);
 box-shadow: var(--logo-shadow); }
    50% { transform: scale(1.02); box-shadow: var(--logo-shadow-hover); }
    100% { transform: scale(1);
 box-shadow: var(--logo-shadow); }
  }

  :root{
    --bg:#f8f8f8;
    --card-bg:#fff;
    --text:#1a1a1a;
    --accent:#0078d7;
    --card-shadow:0 8px 20px rgba(0,0,0,0.08);
    --discord-color:#7289da;
    --muted:#667;
 --toast-bg:rgba(0,0,0,0.8);
    --glass: rgba(255,255,255,0.6);
    --success:#2ecc71;
    --danger:#e74c3c;
    --mono: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    --border-color: rgba(0,0,0,0.08);
    --shop-bg: #8e44ad;
 /* New color for shop: Purple */
    --shop-glow: rgba(142, 68, 173, 0.4);
 /* UPDATED: Custom properties for YELLOW glow effect in light mode */
    --glow-color-light: rgba(255, 193, 7, 0.6);
 /* soft yellow glow */
    --text-shadow-light: 0 0 10px var(--glow-color-light), 0 2px 4px rgba(0,0,0,0.2);
 --logo-shadow: 0 4px 12px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
    --logo-shadow-hover: 0 8px 20px rgba(255, 193, 7, 0.4);
 }
  [data-theme="dark"]{
    --bg:#0f1720;
    --card-bg:#0b1220;
    --text:#e6eef8;
    --accent:#4da3ff;
    --card-shadow:0 8px 28px rgba(0,0,0,0.6);
    --discord-color:#5b6ea6;
    --muted:#9aa;
    --toast-bg:rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.03);
 --border-color: rgba(255,255,255,0.06);
    --shop-bg: #9b59b6; /* Lighter purple for dark mode */
    --shop-glow: rgba(155, 89, 182, 0.6);
 /* UPDATED: Custom properties for YELLOW glow effect in dark mode */
    --glow-color-dark: rgba(255, 170, 0, 0.8);
 /* brighter gold glow */
    --text-shadow-dark: 0 0 12px var(--glow-color-dark), 0 2px 8px rgba(0,0,0,0.6);
 --logo-shadow: 0 6px 18px rgba(0,0,0,0.4), 0 3px 9px rgba(0,0,0,0.25);
    --logo-shadow-hover: 0 10px 25px rgba(255, 170, 0, 0.5);
 }

  html,body{
    height:100%;
    margin:0;
    font-family:var(--mono);
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    transition:background .25s,color .25s;
    overflow-x: hidden;
 }
  
  /* -------------------------
     Header / Navigation (Optimasi Mobile)
     ------------------------- */
  header{background:var(--card-bg);box-shadow:var(--card-shadow);position:sticky;top:0;z-index:1200}
  .header-content{
    max-width:1100px;
 margin:0 auto;
    padding:10px 10px; /* ADJUSTED: Reduced padding for mobile */
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    flex-wrap: wrap;
 }
  .header-left{
    display:flex;
    align-items:center;
    gap:8px; 
    flex: 1 1 50%;
 }
  .brand-wrap{display:flex;align-items:center;gap:8px}
  
  /* Glow, lift, and Pulse Animation for logo image */
  .brand-wrap img{
    width:36px;
 height:36px;
    border-radius:6px;
    object-fit:cover;
    transition: box-shadow .25s, transform .25s, opacity 0.2s ease;
    box-shadow: var(--logo-shadow);
 /* Apply animation */
    animation: pulse 3s infinite ease-in-out;
  }

  h1{
    font-size:1.2rem;
    margin:0;
 font-weight:700;
    /* Added opacity transition for smoother language change */
    transition: text-shadow .25s, opacity 0.2s ease;
 color: var(--text);
    text-shadow: var(--text-shadow-light); 
  }
  [data-theme="dark"] h1 {
    text-shadow: var(--text-shadow-dark);
 }

  .brand-wrap > div > div { 
    font-size: 0.75rem;
 /* Added opacity transition for smoother language change */
    transition: opacity 0.2s ease;
 }

  nav.primary{
    color:var(--accent);
    text-decoration:none;
    font-weight:700;
    margin-left:auto; 
    font-size: 0.9rem;
    flex: 1 1 100%; 
    margin-top: 6px;
 /* ADJUSTED: Reduced margin for tighter fit */
    text-align: left;
 }
  nav.primary a{
      color:var(--accent);
      text-decoration:none;
      font-weight:700;
      margin-left:0;
      margin-right: 12px;
 /* Added opacity transition for smoother language change */
      transition: opacity 0.2s ease, transform .18s;
 }
  nav.primary a:hover{opacity:.86;transform:translateY(-1px)}
  
  /* NEW: Style for active navigation link (SPA simulation) */
  nav.primary a.active-nav {
      border-bottom: 2px solid var(--accent);
      padding-bottom: 2px;
  }
  
  .controls{
    display:flex;
    align-items:center;
    gap:6px;
    flex: 0 1 auto;
 /* FIX FOR MOBILE WRAPPING: Allow buttons to wrap within the controls box */
    flex-wrap: wrap;
 justify-content: flex-end; /* Keep the buttons aligned to the right */
  }
  /* Gaya untuk semua tombol kontrol di header */
  .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
    font-size:0.9rem;
 padding:6px 8px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:transparent;
    color:var(--text);
    cursor:pointer;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
 /* Added opacity transition for smoother language change */
    transition: background-color .15s, opacity 0.2s ease;
 }
  .report-bug-btn:hover, .theme-toggle:hover, .open-welcome:hover, #openAdmin:hover {
    background: rgba(0,0,0,0.05);
 }
  [data-theme="dark"] .report-bug-btn:hover, [data-theme="dark"] .theme-toggle:hover, [data-theme="dark"] .open-welcome:hover, [data-theme="dark"] .#openAdmin:hover {
    background: rgba(255,255,255,0.05);
 }

  /* -------------------------
     Banner / Hero
     ------------------------- */
  .banner-section{text-align:center;padding:40px 10px;background:linear-gradient(90deg, rgba(0,0,0,0.03), rgba(255,255,255,0.02))}
  .banner-section img{max-width:200px;border-radius:8px;margin-bottom:14px}
  .banner-section h2{
    font-size:1.6rem;
 color:#ffaa00;
    margin:8px 0;
    text-shadow:0 0 10px rgba(255,170,0,0.18);
    transition: opacity 0.2s ease;
  }
  .banner-section p{
    font-size:0.95rem;
    opacity:.92;
 margin:0;
    transition: opacity 0.2s ease;
  }
  .time-display{
    margin-top:8px;
    font-size:0.85rem;
    font-weight:600;
    opacity:.9;
    transition: opacity 0.2s ease;
 }

  /* -------------------------
     Container (main content)
     ------------------------- */
  .container{max-width:1000px;margin:32px auto;text-align:center;padding:0 10px}
  .container h2{
    font-size:1.4rem;
 margin-bottom:24px;
    transition: opacity 0.2s ease;
  }
  
  /* NEW: SPA Section Animation */
  .content-section {
      opacity: 1;
      transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
      transform: translateY(0);
  }
  .content-section.hidden-section {
      display: none !important;
  }
  .content-section.fading-out {
      opacity: 0;
      transform: translateY(10px);
  }

  /* Platform Buttons: Full width for mobile */
  .platform-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:14px}
  .platform-buttons a{
    display:flex;align-items:center;justify-content:center;gap:12px;
 width:92%; 
    padding:14px 18px;border-radius:12px;color:#fff;font-weight:700;
    text-decoration:none;border:1px solid transparent;font-size:1.02rem;
    transition:transform .18s ease,box-shadow .18s, opacity 0.2s ease;
 }
  .platform-buttons a img{width:30px;height:30px;border-radius:6px}
  .platform-buttons a:hover{transform:translateY(-2px)}

  .btn-android{background:#34c759;--glow:#4cff77;box-shadow:0 4px 16px rgba(76,255,119,0.08)}
  .btn-windows{background:#0078d7;--glow:#4da3ff;box-shadow:0 4px 16px rgba(77,163,255,0.08)}
  .btn-ios{background:#007aff;--glow:#7acbff;box-shadow:0 4px 16px rgba(122,203,255,0.08)}
  .btn-powertunnel{background:#b71c1c;--glow:#ff5a5a;box-shadow:0 4px 16px rgba(255,90,90,0.08)}

  /* NEW: Shop Roles Grid */
  .shop-roles {
      display: grid;
 grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 24px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
 }
  .shop-role-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      border-top: 4px solid var(--shop-bg);
 display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      height: auto;
 /* Allow card height to adjust to content */
  }
  .shop-role-card:hover {
      transform: translateY(-5px);
 box-shadow: 0 10px 30px var(--shop-glow);
  }
  .shop-role-card h3 {
      margin-top: 0;
      font-size: 1.25rem;
 color: var(--shop-bg);
      text-shadow: 0 0 5px rgba(142, 68, 173, 0.1);
 }
  .shop-role-card .price {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text);
      margin: 8px 0 15px;
 }
  .shop-role-card .price small {
      font-size: 0.8rem;
      font-weight: 400;
      opacity: 0.7;
 }
  /* NEW: Style for the multiple currency display */
  .shop-role-card .currency-display {
      display: block;
 font-size: 0.8rem; /* Smaller font for secondary currencies */
      font-weight: 500; 
      opacity: 0.8; 
      margin-top: 6px;
 line-height: 1.4;
      white-space: pre-wrap;
  }
  /* UPDATED: UL style for commands (Added Scroll functionality) */
  .shop-role-card ul {
      list-style-type: none;
 padding: 0;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--muted);
      white-space: pre-wrap;
 /* NEW SCROLL STYLES */
      max-height: 200px;
 /* Max height before scroll */
      overflow-y: auto;
      border: 1px solid var(--border-color);
 /* Border for visual clarity of scroll area */
      padding: 8px;
      border-radius: 6px;
 }

  /* Style adjustment for the list items inside the scrollable area */
  .shop-role-card ul li {
      margin-bottom: 8px;
 border-left: 3px solid var(--shop-bg);
      padding-left: 8px;
      line-height: 1.3;
      padding-right: 4px;
 /* Ensure content doesn't touch scrollbar */
  }
  .shop-role-card ul li:before {
      content: none;
 /* Remove default bullet */
  }
  .shop-role-card ul li strong {
      color: var(--accent);
 font-weight: 600;
      display: block;
      margin-bottom: 2px;
  }
  .shop-role-card ul li span {
      display: block;
 font-size: 0.85rem;
      opacity: 0.8;
  }
  .btn-purchase {
      background: var(--shop-bg);
      color: white;
      text-decoration: none;
 padding: 10px 15px;
      border-radius: 8px;
      font-weight: 700;
      text-align: center;
      transition: background 0.15s, transform 0.15s;
 }
  .btn-purchase:hover {
      background: #732a9a;
      transform: translateY(-1px);
 }
  /* ADDED: Style for dual purchase buttons */
  .shop-role-card .purchase-buttons {
      display: flex;
 gap: 10px;
      margin-top: 15px;
      width: 100%;
      flex-wrap: wrap; /* NEW: Allow wrapping for many buttons */
  }
  /* Ensure the button links themselves manage the flex sizing */
  .shop-role-card .purchase-buttons .btn-purchase {
      display: flex;
 flex: 1 1 calc(50% - 5px); /* Set to max 2 buttons per row on mobile */
      align-items: center;
 justify-content: center;
      min-width: 120px; /* Ensure a minimum size */
  }
  /* New style for IDR button */
  .btn-idr {
      background: #27ae60;
 /* Green color for IDR/Rupiah */
  }
  .btn-idr:hover {
      background: #1e8449;
 }
  /* NEW: EUR Button */
  .btn-eur {
      background: #004494;
 /* Dark Blue for EUR */
  }
  .btn-eur:hover {
      background: #003370;
 }
  /* NEW: GBP Button */
  .btn-gbp {
      background: #c0392b;
 /* Reddish Brown for GBP */
  }
  .btn-gbp:hover {
      background: #a93226;
 }
  /* NEW: AUD Button */
  .btn-aud {
      background: #f1c40f;
 /* Yellow/Gold for AUD */
      color: #333;
 /* Dark text for contrast */
  }
  .btn-aud:hover {
      background: #d4ac0d;
 }
  /* NEW: SGD Button */
  .btn-sgd {
      background: #3498db;
 /* Light Blue for SGD */
  }
  .btn-sgd:hover {
      background: #2980b9;
 }
  /* NEW: CAD Button */
  .btn-cad {
      background: #e74c3c;
 /* Red for CAD */
  }
  .btn-cad:hover {
      background: #c0392b;
 }


  /* -------------------------
     Discord Section
     ------------------------- */
  .discord-section{background:var(--discord-color);color:#fff;padding:24px;border-radius:10px;max-width:820px;margin:32px auto 50px;text-align:center;box-shadow:var(--card-shadow)}
  .discord-section img{width:48px;height:48px;border-radius:8px;margin-bottom:8px}
  .discord-section h3, .discord-section p, .discord-section a {
    transition: opacity 0.2s ease;
 }

  /* -------------------------
     Footer
     ------------------------- */
  footer{
    text-align:center;
 margin:30px 0 40px;
    font-size:.85rem;
    opacity:.85;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Modal & Welcome/Admin Popup
     ------------------------- */
  .modal-backdrop, .welcome-backdrop, .admin-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1300}
  .modal, .welcome{width:92%;max-width:560px;background:var(--card-bg);color:var(--text);border-radius:12px;padding:16px;box-shadow:0 14px 40px rgba(0,0,0,0.2);transform:translateY(0);transition:transform .18s,opacity .18s}
  
  /* Added opacity transition to modal/welcome text elements */
  .modal h3, .modal p, .modal .changelog, .welcome h2, .welcome p, .welcome label, .welcome button, .modal h2, .modal h4 {
      transition: opacity 0.2s ease;
 }
  
  /* NEW: Admin Modal specific styles (input and buttons) */
  #adminTokenInput, #newsUpdateTextarea, #seoTitleInput, #seoDescTextarea, #seoKeywordsInput {
    /* Ensure they match the theme */
    border: 1px solid var(--border-color) !important;
 background: var(--card-bg) !important;
    color: var(--text) !important;
  }

  /* -------------------------
     Floating Discord button
     ------------------------- */
  .floating-chat{position:fixed;right:12px;bottom:12px;width:48px;height:48px;border-radius:50%;background:var(--discord-color);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.2);cursor:pointer;z-index:1500}
  .floating-chat img{width:24px;height:24px;border-radius:4px}

  /* -------------------------
     Toast message
     ------------------------- */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:70px;background:var(--toast-bg);color:#fff;padding:8px 12px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .18s,transform .18s;z-index:1600}
  
  /* NEW: Cookie Consent Banner */
  #cookieConsent {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card-bg);
      border-top: 1px solid var(--border-color);
      padding: 15px 20px;
      z-index: 1400;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease-in-out;
      transform: translateY(0);
  }
  #cookieConsent.hidden {
      transform: translateY(100%);
  }
  #cookieConsent p {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.4;
  }
  #cookieConsent button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      transition: opacity 0.15s, background 0.15s;
  }
  #cookieConsent button:hover {
      opacity: 0.9;
  }
  @media (max-width: 600px) {
      #cookieConsent {
          flex-direction: column;
          align-items: flex-start;
      }
      #cookieConsent button {
          width: 100%;
      }
  }

  /* ===========================
     PC/Desktop Optimizations (Min-width 600px)
     =========================== */
  @media (min-width: 600px) {
    /* Header/Nav kembali ke ukuran besar */
    .header-content {
        flex-wrap: nowrap;
 align-items: center;
        padding: 14px 20px;
    }
    /* Logo size PC */
    .brand-wrap img{width:46px;height:46px;border-radius:8px}
    /* H1 size PC */
    h1{font-size:1.4rem;}
    .brand-wrap > div > div { font-size: 0.85rem;
 }
    nav.primary {
        flex: 0 1 auto; 
        margin-top: 0;
 margin-left: 12px; 
        text-align: left;
    }
    nav.primary a{
        margin-left:12px;
        margin-right: 0;
 font-size: 1rem;
    }
    .controls{gap:10px; flex-wrap: nowrap;} /* Reset wrap on PC */
    /* Ukuran PC untuk semua tombol kontrol */
    .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
        font-size:0.98rem;
 padding:8px 12px;
        border-radius: 10px;
    }

    /* Tombol Unduhan kembali ke layout 300px */
    .platform-buttons{gap:20px}
    .platform-buttons a{
      width:300px;
 }
    .platform-buttons a:hover{transform:translateY(-4px)}
    
    /* Shop Roles Grid PC */
    .shop-roles {
        grid-template-columns: repeat(3, minmax(200px, 1fr));
 /* 3 columns on desktop */
    }
    /* On desktop, buttons can take up less space */
    .shop-role-card .purchase-buttons .btn-purchase {
        flex: 1 1 calc(33.33% - 7px);
 /* Allow up to 3 buttons per row on PC */
        min-width: 90px;
 }

    /* Banner/Content padding besar */
    .banner-section{padding:56px 20px;}
    .banner-section img{max-width:240px;border-radius:10px;}
    .banner-section h2{font-size:1.9rem;}
    .container{margin:48px auto;padding:0 18px}
    .container h2{font-size:1.6rem;margin-bottom:28px}
    .discord-section{padding:32px;margin:42px auto 60px;}

    /* Floating button kembali ke posisi normal */
    .floating-chat{right:18px;bottom:18px;width:56px;height:56px;}
    .floating-chat img{width:28px;height:28px;}
    .toast{bottom:86px;}
  }
</style>
</head>
<body data-theme="light">
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="brand-wrap">
          
 <img src="Growfax_banner.jpg" alt="Growfax Logo">
          <div>
            <h1>Growfax Official</h1>
            <div style="font-size:0.85rem;color:var(--muted)">Private Growtopia Server</div>
          </div>
        </div>

        <nav class="primary" aria-label="Main navigation">
          <a href="#downloads" id="navDownloads" class="active-nav">üì• Downloads</a> 
          <a href="#shop" id="navShop">üõí Shop</a>
  
       </nav>
      </div>

      <div class="controls">
        <a href="#" 
           id="reportBugLink" 
           class="report-bug-btn" 
           title="Report a Bug">üêû Report Bug</a>
        
        <button id="openAdmin" class="open-welcome" title="Admin Area">üîë Admin</button> <button id="openWelcome" class="open-welcome" title="Welcome & Preferences">‚öôÔ∏è</button>
   
 
        <select id="langSelect" class="lang-select" title="Language" aria-label="Select language">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">üåû Light</button>
      </div>
    </div>
  </header>

  <section class="banner-section" role="region" aria-label="Main banner">
    <img src="Growfax_banner.jpg" alt="Growfax Banner">
    <h2>Welcome to Growfax</h2>
    
 <p>Private Growtopia Server</p>
 
   <div id="timeDisplay" class="time-display">Loading time...</div>
  </section>

  <main class="container" role="main">
    <section id="downloads" class="content-section">
        <h2>üì• Essential File Downloads</h2>
        <div class="platform-buttons" role="list">
          <a href="Growfax_VirtualHost.txt" class="btn-android" data-filename="Growfax_VirtualHost.txt" data-filekey="virtualhost" download role="listitem">
            <img src="virtual-host.png" alt="">Play on Android
          </a>

          <a href="Growfax_Patched_.bat" class="btn-windows" data-filename="Growfax_Patched_.bat" data-filekey="patched" download 
 role="listitem">
  
        <img src="windows.png" alt="">Play on Windows
          </a>

          <a href="#" class="btn-ios" data-filename="GrowFax_ios_config.txt" data-filekey="ios" role="listitem">
            <img src="surge5.png" alt="">Play on iOS
          </a>

          <a href="#" class="btn-powertunnel" data-filename="PowerTunnel_Host.txt" data-filekey="powertunnel" role="listitem">
            <img src="powertunnel.jpeg" alt="">Play via PowerTunnel
 
  
       </a>
        </div>
    </section>

    <section id="shop" class="content-section hidden-section" style="margin-top: 60px;
 padding-top: 10px;">
        <h2>üõí Growfax Server Roles</h2>
        <p style="opacity: 0.8;">Support the server and unlock exclusive roles! Direct purchase via PayPal.me.</p>

        <div class="shop-roles">
            <div class="shop-role-card">
                <div>
                    <h3>üëë Admin Server Role</h3>
       
              <p class="price" data-usd="45" 
                        data-idr="675000" data-eur="7.91" data-gbp="36.00" 
                        data-aud="12.90" data-sgd="60.75" data-cad="11.61">
                        $45.00 <small>USD</small>
     
                   <span class="currency-display">
                            ~ ¬£36.00 <small>GBP</small> | ~ Rp 675.000 <small>IDR</small> | ~ S$60.75 <small>SGD</small><br>
                            ~ ‚Ç¨7.91 <small>EUR</small> | ~ A$12.90 <small>AUD</small> | ~ C$11.61 <small>CAD</small>
  
 
                      </span>
                    </p>
                    <ul id="admin_commands"></ul>
                </div>
                <div class="purchase-buttons">
  
   
             <a href="https://paypal.me/BilzXd1/45USD" target="_blank" rel="noopener" class="btn-purchase btn-usd" data-role="admin" data-price="45">Pay $USD</a>
                    <a href="https://paypal.me/BilzXd1/7.91EUR" target="_blank" rel="noopener" class="btn-purchase btn-eur" data-role="admin" data-price-eur="7.91">Pay ‚Ç¨EUR</a>
                    <a href="https://paypal.me/BilzXd1/36.00GBP" target="_blank" rel="noopener" class="btn-purchase btn-gbp" data-role="admin" data-price-gbp="36.00">Pay ¬£GBP</a>
                 
       
             <a href="https://paypal.me/BilzXd1/12.90AUD" 
 target="_blank" rel="noopener" class="btn-purchase btn-aud" data-role="admin" data-price-aud="12.90">Pay A$AUD</a>
                    <a href="https://paypal.me/BilzXd1/60.75SGD" target="_blank" rel="noopener" class="btn-purchase btn-sgd" data-role="admin" data-price-sgd="60.75">Pay S$SGD</a>
                    <a href="https://paypal.me/BilzXd1/11.61CAD" target="_blank" rel="noopener" class="btn-purchase btn-cad" data-role="admin" data-price-cad="11.61">Pay C$CAD</a>
                    <a href="https://paypal.me/BilzXd1/675000IDR" target="_blank" 
 rel="noopener" class="btn-purchase btn-idr" data-role="admin" data-idr-price="675000">Bayar Rp IDR</a>
   
       
        </div>
            </div>
        </div>
        </section>
  </main>

  <section class="discord-section" aria-label="Discord community">
    <img src="discord.jpeg" alt="Discord Logo">
    <h3>Join Our Community</h3>
    <p>Connect with others and get support in our official Discord server.</p>
    <a id="discordLink" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener">Join Growfax Discord</a>
  </section>

  
 <footer>¬© 2025 Growfax.
 All rights reserved.</footer>

  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">File info</h3>
      <p id="modalDesc">Details before download</p>

      <div class="meta">
        <div class="chip" id="modalVersion">v0.0</div>
        <div class="chip" id="modalUpdated">Updated: ‚Äî</div>
      </div>

      <div class="changelog" id="modalChangelog">Changelog: ‚Äî</div>

      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div style="font-size:.9rem;color:var(--muted)" id="modalFilename">Filename</div>
     
    
 <div class="buttons">
          <button class="btn secondary" id="modalCancel">Cancel</button>
          <button class="btn primary" id="modalConfirm">Download</button>
        </div>
      </div>
    </div>
  </div>

  <div id="welcomeBackdrop" class="welcome-backdrop" aria-hidden="true">
    <div class="welcome" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
      <h2 id="welcomeTitle">Welcome to Growfax</h2>
      <p style="margin:6px 0 12px;opacity:.9">Set your preferred language and theme.
 We'll remember this for next time.</p>
      <div class="row">
        <label for="welcomeLang">Language</label>
        <select id="welcomeLang" class="lang-select">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
      </div>
      <div class="row" style="margin-top:10px">
        <label>Theme</label>
        <div class="radio-group">
      
         <label><input type="radio" name="welcomeTheme" value="light" checked> Light</label>
          <label><input type="radio" name="welcomeTheme" value="dark"> Dark</label>
        </div>
      </div>
      <div class="actions" style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px">
        <button class="btn secondary" id="welcomeSkip">Skip</button>
        <button class="btn primary" id="welcomeSave">Save & Continue</button>
      </div>
    </div>
  </div>

  <div id="adminBackdrop" class="modal-backdrop admin-backdrop" aria-hidden="true">
    <div class="modal admin-modal" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
    
      <h2 id="adminTitle">üîë Admin Area</h2>
      <button id="closeAdmin" class="btn secondary" style="position:absolute;top:10px;right:10px;font-size:0.8rem;padding:6px 10px;z-index:10;">Tutup Area Admin</button>
      
      <div id="adminLogin" style="text-align: center;
 padding: 20px;">
        <p id="adminLoginPrompt">Enter the Admin Token to proceed:</p>
        <input type="password" id="adminTokenInput" placeholder="Token" style="padding: 10px;
 width: 80%; max-width: 300px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg);
 color: var(--text);">
        <button class="btn primary" id="adminTokenSubmit" style="margin-top: 10px; width: 80%;
 max-width: 300px;">Submit</button>
      </div>

      <div id="adminContent" style="display: none;
 padding-top: 10px;">
        <div style="margin-top: 15px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
          <h4 style="margin: 0 0 10px;
 color: var(--accent);">Server Status</h4>
          <p>Status: <strong id="serverStatusDisplay" style="color: var(--success);">Online</strong></p>
          <button class="btn danger" id="toggleServerStatus" data-original="Toggle Status (Simulate)">Toggle Status (Simulate)</button>
        </div>

        <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
          <h4 id="analyticsTitle" style="margin: 0 0 10px; color: var(--accent);" data-original="Analytical Dashboard">Analytical Dashboard</h4>
          <p style="margin: 5px 0 10px;">
            <span data-original="Total Downloads:">Total Downloads:</span> <strong id="totalDownloadsDisplay">0</strong>
          </p>
          <p style="margin: 10px 0 5px; font-weight: 700; font-size: 0.95rem;" data-original="Recent Activities:">Recent Activities:</p>
          <ul id="activitiesList" style="list-style-type: none; padding: 0; max-height: 150px; overflow-y: auto; text-align: left; font-size: 0.9rem;">
            </ul>
          <button class="btn secondary" id="refreshAnalytics" style="margin-top: 10px; width: 100%;" data-original="Refresh Data">Refresh Data</button>
        </div>

        <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
          <h4 style="margin: 0 0 10px; color: var(--accent);" data-original="News & Updates">News & Updates</h4>
          <textarea id="newsUpdateTextarea" placeholder="Enter your news update..." style="width: 100%; padding: 10px; border-radius: 6px; font-family: var(--mono); font-size: 0.95rem;"></textarea>
          <button class="btn primary" id="saveNewsUpdate" style="margin-top: 10px; width: 100%;" data-original="Save News">Save News</button>
        </div>

        <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
          <h4 style="margin: 0 0 10px; color: var(--accent);" data-original="SEO Management">SEO Management</h4>
          <label style="display: block; text-align: left; margin-top: 5px; font-size: 0.9rem; color: var(--muted);" for="seoTitleInput" data-original="Page Title (Hanya Title Tag HTML)">Page Title (Hanya Title Tag HTML)</label>
          <input type="text" id="seoTitleInput" placeholder="Growfax Official - Private Growtopia Server & Downloads" style="width: 100%; padding: 8px; border-radius: 6px; margin-bottom: 10px; font-family: var(--mono); font-size: 0.9rem;">
          
          <label style="display: block; text-align: left; margin-top: 10px; font-size: 0.9rem; color: var(--muted);" for="seoDescTextarea" data-original="Meta Description">Meta Description</label>
          <textarea id="seoDescTextarea" placeholder="Situs resmi Growfax, private server Growtopia..." style="width: 100%; padding: 10px; border-radius: 6px; margin-bottom: 10px; font-family: var(--mono); font-size: 0.95rem;"></textarea>
          
          <label style="display: block; text-align: left; margin-top: 10px; font-size: 0.9rem;
 color: var(--muted);" for="seoKeywordsInput" data-original="Meta Keywords (Comma-separated)">Meta Keywords (Comma-separated)</label>
          <input type="text" id="seoKeywordsInput" placeholder="Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growfax, Growfax Android, Growfax Windows" style="width: 100%;
 padding: 8px; border-radius: 6px; margin-bottom: 10px; font-family: var(--mono); font-size: 0.9rem;">
          <button class="btn primary" id="saveSeoMeta" style="margin-top: 10px;
 width: 100%;" data-original="Update SEO Meta">Update SEO Meta</button>
        </div>
      </div>
    </div>
  </div>
  
  <a id="floatingChat" class="floating-chat" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener" title="Open Discord">
    <img src="discord.jpeg" alt="Discord">
  </a>

  <div id="toast" class="toast" role="alert" aria-live="assertive"></div>
  
  <div id="cookieConsent" class="hidden">
    <p>We use cookies to ensure you get the best experience on our website. By continuing, you agree to our <a href="#" style="color:var(--accent); text-decoration: underline;">Privacy Policy</a>.</p>
    <button id="acceptCookies">I Accept</button>
  </div>


<script>
// --- File references (from Admin Area) ---
const ADMIN_TOKEN = '1234'; // Simulated token
const adminBackdrop = document.getElementById('adminBackdrop');
const adminTitle = document.getElementById('adminTitle');
const adminLogin = document.getElementById('adminLogin');
const adminLoginPrompt = document.getElementById('adminLoginPrompt');
const adminTokenInput = document.getElementById('adminTokenInput');
const adminTokenSubmit = document.getElementById('adminTokenSubmit');
const adminContent = document.getElementById('adminContent');
const closeAdmin = document.getElementById('closeAdmin');
const serverStatusDisplay = document.getElementById('serverStatusDisplay');
const toggleServerStatus = document.getElementById('toggleServerStatus');
const newsUpdateTextarea = document.getElementById('newsUpdateTextarea');
const saveNewsUpdate = document.getElementById('saveNewsUpdate');
// Analytical Dashboard Refs
const analyticsTitle = document.getElementById('analyticsTitle');
const totalDownloadsDisplay = document.getElementById('totalDownloadsDisplay');
const activitiesList = document.getElementById('activitiesList');
const refreshAnalytics = document.getElementById('refreshAnalytics');
// SEO Refs
const seoTitleInput = document.getElementById('seoTitleInput');
const seoDescTextarea = document.getElementById('seoDescTextarea');
const seoKeywordsInput = document.getElementById('seoKeywordsInput');

// --- Global UI elements ---
const langSelect = document.getElementById('langSelect');
const themeToggle = document.getElementById('themeToggle');
const timeDisplay = document.getElementById('timeDisplay');
const downloadsSection = document.getElementById('downloads');
const modalBackdrop = document.getElementById('modalBackdrop');
const welcomeBackdrop = document.getElementById('welcomeBackdrop');
const welcomeSkip = document.getElementById('welcomeSkip');
const welcomeSave = document.getElementById('welcomeSave');
const openWelcome = document.getElementById('openWelcome');
const welcomeLang = document.getElementById('welcomeLang');
const modalConfirm = document.getElementById('modalConfirm');
const modalCancel = document.getElementById('modalCancel');
const downloadButtons = document.querySelectorAll('.platform-buttons a[download]');
const iosButton = document.querySelector('.btn-ios');
const powertunnelButton = document.querySelector('.btn-powertunnel');
const shopButtons = document.querySelectorAll('.purchase-buttons .btn-purchase');


// --- State Variables ---
let serverIsOnline = true; // Initial state
let analyticsInterval = null;
let isAdminLoggedIn = localStorage.getItem('isAdminLoggedIn') === 'true'; // NEW: Check login state

/* =========================== Translations =========================== */
const translations = {
  en: {
    "Pagi": "Morning",
    "Siang": "Afternoon",
    "Sore": "Evening",
    "Malam": "Night",
    "Admin Area": "Admin Area",
    "Enter the Admin Token to proceed:": "Enter the Admin Token to proceed:",
    "Login Admin berhasil": "Admin Login success",
    "Toggle Status (Simulate)": "Toggle Status (Simulate)",
    "Analytical Dashboard": "Analytical Dashboard",
    "Total Downloads:": "Total Downloads:",
    "Recent Activities:": "Recent Activities:",
    "Refresh Data": "Refresh Data",
    "News & Updates": "News & Updates",
    "Save News": "Save News",
    "SEO Management": "SEO Management",
    "Page Title (Hanya Title Tag HTML)": "Page Title (HTML Title Tag Only)",
    "Meta Description": "Meta Description",
    "Meta Keywords (Comma-separated)": "Meta Keywords (Comma-separated)",
    "Update SEO Meta": "Update SEO Meta",
    "Close Admin Area": "Close Admin Area",
    "Server Status changed.": "Server Status changed.",
    "News updated successfully.": "News updated successfully.",
    "SEO Meta updated successfully.": "SEO Meta updated successfully.",
    "Welcome to Growfax": "Welcome to Growfax",
    "Set your preferred language and theme. We'll remember this for next time.": "Set your preferred language and theme. We'll remember this for next time.",
    "Language": "Language",
    "Theme": "Theme",
    "Save & Continue": "Save & Continue",
    "Skip": "Skip",
    "Tutup Area Admin": "Close Admin Area",
    "Download initiated: ": "Download initiated: ",
    "Shop purchase: ": "Shop purchase: ",
    "Opening PayPal for USD purchase": "Opening PayPal for USD purchase",
    "Opening PayPal for EUR purchase": "Opening PayPal for EUR purchase",
    "Opening PayPal for GBP purchase": "Opening PayPal for GBP purchase",
    "Opening PayPal for AUD purchase": "Opening PayPal for AUD purchase",
    "Opening PayPal for SGD purchase": "Opening PayPal for SGD purchase",
    "Opening PayPal for CAD purchase": "Opening PayPal for CAD purchase",
    "Report Bug - Growfax": "Bug Report - Growfax",
    "Hello Growfax Admin,\n\nI would like to report the following bug:\n\n[Describe the bug here, including steps to reproduce it, and the device you are using (Android/iOS/Windows).]\n\nThank you.": "Hello Growfax Admin,\n\nI would like to report the following bug:\n\n[Describe the bug here, including steps to reproduce it, and the device you are using (Android/iOS/Windows).]\n\nThank you.",
    "Online": "Online",
    "Offline": "Offline",
    "Log out": "Log out", // NEW translation
    "Logged out.": "Logged out.", // NEW translation
    "‚ö†Ô∏è All SEO fields are required.": "‚ö†Ô∏è All SEO fields are required.", // NEW translation
    "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.": "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.", // NEW translation
    "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ": "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ", // NEW translation
    "Privacy Policy": "Privacy Policy", // NEW translation
    "I Accept": "I Accept", // NEW translation
    "Thank you for accepting cookies.": "Thank you for accepting cookies.", // NEW translation
  },
  id: {
    "Pagi": "Pagi",
    "Siang": "Siang",
    "Sore": "Sore",
    "Malam": "Malam",
    "Welcome & Preferences": "Selamat Datang & Preferensi",
    "Admin Area": "Area Admin",
    "Open Discord": "Buka Discord",
    "Join Our Community": "Bergabunglah dengan Komunitas Kami",
    "Connect with others and get support in our official Discord server.": "Terhubung dengan orang lain dan dapatkan bantuan di server Discord resmi kami.",
    "Join Growfax Discord": "Gabung Discord Growfax",
    "üì• Downloads": "üì• Unduhan",
    "üõí Shop": "üõí Toko",
    "üêû Report Bug": "üêû Laporkan Bug",
    "üîë Admin": "üîë Admin",
    "Welcome to Growfax": "Selamat Datang di Growfax",
    "Private Growtopia Server": "Server Growtopia Private",
    "Loading time...": "Memuat waktu...",
    "Essential File Downloads": "Unduhan File Penting",
    "Play on Android": "Main di Android",
    "Play on Windows": "Main di Windows",
    "Play on iOS": "Main di iOS",
    "Play via PowerTunnel": "Main via PowerTunnel",
    "Server Time (AEDT):": "Waktu Server (AEDT):", // <-- MODIFIED: New Timezone label
    "Version": "Versi",
    "Updated": "Diperbarui",
    "Changelog": "Catatan pembaruan",
    "Filename": "Nama berkas",
    "File info": "Info berkas",
    "Details before download": "Detail sebelum mengunduh",
    "Cancel": "Batal",
    "Download": "Unduh",
    "Download failed: file not found.": "Unduhan gagal: berkas tidak ditemukan.",
    "Config copied!": "Konfigurasi disalin!",
    "Copy Config": "Salin Konfigurasi",
    "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.": "Dukung server dan buka peran eksklusif! Pembelian langsung via PayPal.me.",
    "Growfax Server Roles": "Peran Server Growfax",
    "Opening PayPal for USD purchase": "Membuka PayPal untuk pembelian $USD",
    "Opening PayPal for EUR purchase": "Membuka PayPal untuk pembelian ‚Ç¨EUR",
    "Opening PayPal for GBP purchase": "Membuka PayPal untuk pembelian ¬£GBP",
    "Opening PayPal for AUD purchase": "Membuka PayPal untuk pembelian A$AUD",
    "Opening PayPal for SGD purchase": "Membuka PayPal untuk pembelian S$SGD",
    "Opening PayPal for CAD purchase": "Membuka PayPal untuk pembelian C$CAD",
    "Report Bug - Growfax": "Laporan Bug - Growfax",
    "Halo Admin Growfax,\n\nSaya ingin melaporkan bug berikut:\n\n[Jelaskan bug di sini, termasuk langkah-langkah untuk mereproduksinya, dan perangkat yang Anda gunakan (Android/iOS/Windows).]\n\nTerima kasih.": "Halo Admin Growfax,\n\nSaya ingin melaporkan bug berikut:\n\n[Jelaskan bug di sini, termasuk langkah-langkah untuk mereproduksinya, dan perangkat yang Anda gunakan (Android/iOS/Windows).]\n\nTerima kasih.",
    "Enter the Admin Token to proceed:": "Masukkan Token Admin untuk melanjutkan:",
    "Login Admin berhasil": "Login Admin berhasil",
    "Online": "Online",
    "Offline": "Offline",
    "Toggle Status (Simulate)": "Ubah Status (Simulasi)",
    "Server Status changed.": "Status Server diubah.",
    "Analytical Dashboard": "Dasbor Analitik",
    "Total Downloads:": "Total Unduhan:",
    "Recent Activities:": "Aktivitas Terbaru:",
    "Refresh Data": "Segarkan Data",
    "News & Updates": "Berita & Pembaruan",
    "Save News": "Simpan Berita",
    "News updated successfully.": "Berita berhasil diperbarui.",
    "SEO Management": "Manajemen SEO",
    "Page Title (Hanya Title Tag HTML)": "Judul Halaman (Hanya Tag Title HTML)",
    "Meta Description": "Meta Deskripsi",
    "Meta Keywords (Comma-separated)": "Kata Kunci Meta (Dipisahkan Koma)",
    "Update SEO Meta": "Perbarui Meta SEO",
    "SEO Meta updated successfully.": "Meta SEO berhasil diperbarui.",
    "Close Admin Area": "Tutup Area Admin",
    "Download initiated: ": "Unduhan dimulai: ",
    "Shop purchase: ": "Pembelian toko: ",
    "üëë Admin Server Role": "üëë Peran Admin Server",
    "Can sell role": "Bisa menjual peran",
    "Benefit for selling roles to players.": "Keuntungan dari menjual peran kepada pemain.",
    "Can sell title": "Bisa menjual gelar",
    "Benefit for selling custom titles to players.": "Keuntungan dari menjual gelar kustom kepada pemain.",
    "Can sell All item with Real Trade": "Bisa menjual semua item dengan Real Trade",
    "Allows selling all in-game items via Real Trade system.": "Memungkinkan menjual semua item dalam game melalui sistem Real Trade.",
    " ago": " yang lalu",
    "minute": ["menit"],
    "hour": ["jam"],
    "day": ["hari"],
    "month": ["bulan"],
    "year": ["tahun"],
    "now": "baru saja",
    "Log out": "Keluar", // NEW translation
    "Logged out.": "Berhasil Keluar.", // NEW translation
    "‚ö†Ô∏è All SEO fields are required.": "‚ö†Ô∏è Semua bidang SEO wajib diisi.", // NEW translation
    "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.": "‚ö†Ô∏è Judul (maks 70 kar.) dan Deskripsi (maks 160 kar.) terlalu panjang.", // NEW translation
    "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ": "Kami menggunakan cookie untuk memastikan Anda mendapatkan pengalaman terbaik di website kami. Dengan melanjutkan, Anda menyetujui ", // NEW translation
    "Privacy Policy": "Kebijakan Privasi", // NEW translation
    "I Accept": "Saya Terima", // NEW translation
    "Thank you for accepting cookies.": "Terima kasih telah menerima cookie.", // NEW translation
  }
};
/* =========================== Local Storage & SEO Functions =========================== */
function loadTheme() {
  const savedTheme = localStorage.getItem('growfax_theme');
  if (savedTheme) {
    document.body.setAttribute('data-theme', savedTheme);
    themeToggle.textContent = savedTheme === 'dark' ? (langSelect.value === 'id' ? (translations.id['üåû Light'] || 'üåû Light') : 'üåû Light') : (langSelect.value === 'id' ? (translations.id['üåô Dark'] || 'üåô Dark') : 'üåô Dark');
  } else {
    // Check system preference on first load
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.setAttribute('data-theme', 'dark');
      themeToggle.textContent = langSelect.value === 'id' ? (translations.id['üåû Light'] || 'üåû Light') : 'üåû Light';
    } else {
      document.body.setAttribute('data-theme', 'light');
      themeToggle.textContent = langSelect.value === 'id' ? (translations.id['üåô Dark'] || 'üåô Dark') : 'üåô Dark';
    }
  }
}
function loadLang() {
  const savedLang = localStorage.getItem('growfax_lang');
  if (savedLang) {
    langSelect.value = savedLang;
    welcomeLang.value = savedLang;
    applyTranslations(savedLang);
  }
}
function loadSeoSettings() {
  const savedTitle = localStorage.getItem('seo_title');
  const savedDesc = localStorage.getItem('seo_desc');
  const savedKeywords = localStorage.getItem('seo_keywords');
  // Apply to Admin Area inputs
  seoTitleInput.value = savedTitle || document.querySelector('title').textContent;
  seoDescTextarea.value = savedDesc || document.querySelector('meta[name="description"]').content;
  seoKeywordsInput.value = savedKeywords || document.querySelector('meta[name="keywords"]').content;
  // Apply to HTML head
  if (savedTitle) document.querySelector('title').textContent = savedTitle;
  if (savedDesc) document.querySelector('meta[name="description"]').content = savedDesc;
  if (savedKeywords) document.querySelector('meta[name="keywords"]').content = savedKeywords;
}
function saveSeoSettings(title, desc, keywords) {
  localStorage.setItem('seo_title', title);
  localStorage.setItem('seo_desc', desc);
  localStorage.setItem('seo_keywords', keywords);
}
function loadNewsUpdate() {
  const savedNews = localStorage.getItem('news_update_text') || 'No recent updates.';
  const savedTime = localStorage.getItem('news_update_time');
  newsUpdateTextarea.value = savedNews;
  if (savedTime) {
    updateNewsTimeAgo(new Date(savedTime));
  }
}
function saveNewsUpdateText(text) {
  const now = new Date();
  localStorage.setItem('news_update_text', text);
  localStorage.setItem('news_update_time', now.toISOString());
  loadNewsUpdate();
}

/* =========================== File Metadata (Version, Update Date, Changelog, Copy Text) - Managed via Admin Area / Local Storage.
 Default values below. - Note: copytext must use \n for newlines in JS strings.
 =========================== */
const FILE_META = {
  virtualhost: {
    version: "v4.2.1",
    updated: "2025-10-31",
    changelog: "Optimized connection stability.",
    copytext: `103.27.206.183 growtopia1.com\n103.27.206.183 growtopia2.com\n103.27.206.183 www.growtopia1.com\n103.27.206.183 www.growtopia2.com`
  },
  patched: {
    version: "v4.2.1",
    updated: "2025-10-31",
    changelog: "Improved launch efficiency.",
    copytext: "This file is a .BAT executable and cannot be copied as plain text."
  },
  ios: {
    version: "v1.1.0",
    updated: "2025-10-25",
    changelog: "Added support for Surge 5.",
    copytext: `[Rule]
DOMAIN-SUFFIX,growtopia1.com,REJECT
DOMAIN-SUFFIX,growtopia2.com,REJECT
[Host]
growtopia1.com = 103.27.206.183
growtopia2.com = 103.27.206.183`
  },
  powertunnel: {
    version: "v2.0.0",
    updated: "2025-10-25",
    changelog: "Optimized for PowerTunnel v2.",
    copytext: `103.27.206.183 growtopia1.com
103.27.206.183 growtopia2.com`
  }
};

/* =========================== Utility Functions =========================== */

function showToast(msg, duration = 2000) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.style.opacity = '1';
  toast.style.transform = 'translateX(-50%) translateY(0)';
  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translateX(-50%) translateY(10px)';
  }, duration);
}

function plural(count, words) {
  const lang = langSelect.value;
  // Simple Indonesian pluralization (only provides the word)
  if (lang === 'id') {
    return words[0];
  }
  // Simple English pluralization
  return count === 1 ? words[0] : words[0] + 's';
}

function timeSince(date) {
  const lang = langSelect.value;
  const seconds = Math.floor((new Date() - date) / 1000);
  const l = translations[lang] || translations.en;
  
  if (seconds < 5) return l.now || 'just now';

  let interval = seconds / 31536000;
  if (interval > 1) return Math.floor(interval) + (lang === 'id' ? ' tahun yang lalu' : ` ${plural(Math.floor(interval), l.year)} ago`);
  interval = seconds / 2592000;
  if (interval > 1) return Math.floor(interval) + (lang === 'id' ? ' bulan yang lalu' : ` ${plural(Math.floor(interval), l.month)} ago`);
  interval = seconds / 86400;
  if (interval > 1) return Math.floor(interval) + (lang === 'id' ? ' hari yang lalu' : ` ${plural(Math.floor(interval), l.day)} ago`);
  interval = seconds / 3600;
  if (interval > 1) return Math.floor(interval) + (lang === 'id' ? ' jam yang lalu' : ` ${plural(Math.floor(interval), l.hour)} ago`);
  interval = seconds / 60;
  if (interval > 1) return Math.floor(interval) + (lang === 'id' ? ' menit yang lalu' : ` ${plural(Math.floor(interval), l.minute)} ago`);
  return seconds + (lang === 'id' ? ' detik yang lalu' : ` seconds ago`);
}

function getIndoGreeting(hour) {
  if (hour >= 4 && hour < 11) return (translations.id['Pagi'] || 'Pagi');
  if (hour >= 11 && hour < 15) return (translations.id['Siang'] || 'Siang');
  if (hour >= 15 && hour < 18) return (translations.id['Sore'] || 'Sore');
  return (translations.id['Malam'] || 'Malam');
}

function updateNewsTimeAgo(date) {
  const newsUpdateSection = newsUpdateTextarea.parentNode;
  const timeAgo = timeSince(date);
  let timeAgoElement = document.getElementById('news-time-ago');
  if (!timeAgoElement) {
    timeAgoElement = document.createElement('p');
    timeAgoElement.id = 'news-time-ago';
    timeAgoElement.style.fontSize = '0.85rem';
    timeAgoElement.style.color = 'var(--muted)';
    newsUpdateSection.insertBefore(timeAgoElement, newsUpdateTextarea);
  }
  timeAgoElement.textContent = `Last saved: ${timeAgo}`;
}

function updateTime() {
  const now = new Date();
  // Simulated server time (AEDT is GMT+11)
  const aedtOffset = 11 * 60; // 11 hours in minutes
  const localOffset = now.getTimezoneOffset(); // Local timezone offset in minutes
  const aedtTime = new Date(now.getTime() + (localOffset + aedtOffset) * 60000);
  
  const hour = aedtTime.getHours();
  const minute = aedtTime.getMinutes().toString().padStart(2, '0');
  const second = aedtTime.getSeconds().toString().padStart(2, '0');
  
  const lang = langSelect.value;
  let timeLabel = lang === 'id' ? (translations.id['Waktu Server (AEDT):'] || 'Waktu Server (AEDT):') : 'Server Time (AEDT):';
  let greeting = lang === 'id' ? getIndoGreeting(hour) : '';

  if (lang === 'id') {
    greeting = getIndoGreeting(hour);
    timeLabel = `${timeLabel} ${greeting}`;
  }
  
  timeDisplay.textContent = `${timeLabel} ${hour.toString().padStart(2, '0')}:${minute}:${second}`;
}

/* =========================== Dynamic Translations & Localization =========================== */

// Command Texts for translation (Shop Role)
const commandData = {
  admin_commands: [ 
    { strong: "Can sell role", span: "Benefit for selling roles to players." }, 
    { strong: "Can sell title", span: "Benefit for selling custom titles to players." }, 
    { strong: "Can sell All item with Real Trade", span: "Allows selling all in-game items via Real Trade system." }
  ]
};

// Update command list translations in the Shop section
function updateCommandTranslations(lang) {
  for (const id in commandData) {
    const ul = document.getElementById(id);
    if (ul) {
      ul.innerHTML = ''; // Clear existing content
      commandData[id].forEach(item => {
        const li = document.createElement('li');
        // Translate the text content of the strong/span elements
        const strongText = lang === 'en' ? item.strong : (translations[lang]?.[item.strong] || item.strong);
        li.innerHTML = `<strong>${strongText}</strong>`;
        if (item.span) {
          const spanText = lang === 'en' ? item.span : (translations[lang]?.[item.span] || item.span);
          li.innerHTML += `<span>${spanText}</span>`;
        }
        ul.appendChild(li);
      });
    }
  }
}

// Update dynamic texts in the Admin Area that aren't covered by data-original
function updateAdminDynamicTexts(lang) {
  // Update login prompt based on current language
  adminLoginPrompt.textContent = lang === 'id' ? 
    (translations.id["Enter the Admin Token to proceed:"] || 'Masukkan Token Admin untuk melanjutkan:') : 'Enter the Admin Token to proceed:';
  
  // Server Status and Analytics (Dynamic)
  serverStatusDisplay.textContent = serverIsOnline ? 
    (lang === 'id' ? translations.id['Online'] : 'Online') : (lang === 'id' ? translations.id['Offline'] : 'Offline');
  
  // Update admin logout button text
  const logoutBtn = document.getElementById('adminLogout');
  if (logoutBtn) {
    logoutBtn.textContent = lang === 'id' ? (translations.id['Log out'] || 'Keluar') : 'Logout';
  }
  
  // Refresh analytics data to update language on dynamic strings
  renderAnalyticsDashboard(); 
}

function applyTranslations(lang) {
  const transitionDuration = 200; // 200 ms
  const elementsToTranslate = document.querySelectorAll('[data-original], #modalCancel, #modalConfirm, #welcomeSave, #welcomeSkip, #discordLink, #reportBugLink, #adminTokenSubmit, #closeAdmin, #toggleServerStatus, #saveNewsUpdate, #refreshAnalytics, #saveSeoMeta, #acceptCookies'); // Added #acceptCookies
  
  // 1. Fade out (Opacity 0)
  elementsToTranslate.forEach(el => {
    // Only target elements currently visible
    if (el.offsetWidth > 0 || el.offsetHeight > 0 || el.getClientRects().length > 0) {
      el.style.opacity = '0';
    }
  });
  document.body.style.opacity = '0.01'; // Apply to the whole body for elements without data-original

  setTimeout(() => {
    // 2. Perform the translation
    document.querySelectorAll('[data-original]').forEach(el => {
      const originalText = el.getAttribute('data-original');
      el.textContent = translations[lang]?.[originalText] || originalText;
    });

    // Update commands list
    updateCommandTranslations(lang); 

    // Update Admin Area dynamic texts
    updateAdminDynamicTexts(lang); 
    
    // Update theme toggle text
    const currentTheme = document.body.getAttribute('data-theme');
    themeToggle.textContent = currentTheme === 'dark' ? (lang === 'id' ? (translations.id['üåû Light'] || 'üåû Light') : 'üåû Light') : (lang === 'id' ? (translations.id['üåô Dark'] || 'üåô Dark') : 'üåô Dark');
    
    // Update non-data-original elements
    document.getElementById('navDownloads').textContent = lang === 'en' ? 'üì• Downloads' : (translations[lang]?.['üì• Downloads'] || 'üì• Unduhan');
    document.getElementById('navShop').textContent = lang === 'en' ? 'üõí Shop' : (translations[lang]?.['üõí Shop'] || 'üõí Toko');
    document.getElementById('modalCancel').textContent = lang === 'en' ? 'Cancel' : (translations[lang]?.['Cancel'] || 'Batal');
    document.getElementById('modalConfirm').textContent = lang === 'en' ? 'Download' : (translations[lang]?.['Download'] || 'Unduh');
    document.getElementById('welcomeSave').textContent = lang === 'en' ? 'Save & Continue' : (translations[lang]?.['Save & Continue'] || 'Simpan & Lanjutkan');
    document.getElementById('welcomeSkip').textContent = lang === 'en' ? 'Skip' : (translations[lang]?.['Skip'] || 'Lewati');
    document.getElementById('discordLink').textContent = lang === 'en' ? 'Join Growfax Discord' : (translations[lang]?.['Join Growfax Discord'] || 'Gabung Discord Growfax');

    // Update Shop button texts
    const usdButtons = document.querySelectorAll('.btn-usd');
    const eurButtons = document.querySelectorAll('.btn-eur');
    const gbpButtons = document.querySelectorAll('.btn-gbp');
    const audButtons = document.querySelectorAll('.btn-aud');
    const sgdButtons = document.querySelectorAll('.btn-sgd');
    const cadButtons = document.querySelectorAll('.btn-cad');
    const idrButtons = document.querySelectorAll('.btn-idr');

    usdButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay $USD' : (translations[lang]?.['Bayar $USD'] || 'Bayar $USD'); });
    eurButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay ‚Ç¨EUR' : (translations[lang]?.['Bayar ‚Ç¨EUR'] || 'Bayar ‚Ç¨EUR'); });
    gbpButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay ¬£GBP' : (translations[lang]?.['Bayar ¬£GBP'] || 'Bayar ¬£GBP'); });
    audButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay A$AUD' : (translations[lang]?.['Bayar A$AUD'] || 'Bayar A$AUD'); });
    sgdButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay S$SGD' : (translations[lang]?.['Bayar S$SGD'] || 'Bayar S$SGD'); });
    cadButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay C$CAD' : (translations[lang]?.['Bayar C$CAD'] || 'Bayar C$CAD'); });
    idrButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay Rp IDR' : (translations[lang]?.['Bayar Rp IDR'] || 'Bayar Rp IDR'); });
    
    // Update cookie banner button
    document.getElementById('acceptCookies').textContent = lang === 'en' ? (translations.en['I Accept'] || 'I Accept') : (translations.id['Saya Terima'] || 'Saya Terima');

    // 3. Fade back in (Opacity 1)
    elementsToTranslate.forEach(el => { el.style.opacity = '1'; });
    document.body.style.opacity = '1';

  }, transitionDuration);
}

/* =========================== SPA Section Navigation (NEW FEATURE) =========================== */
const sections = document.querySelectorAll('.content-section');
const navLinks = document.querySelectorAll('nav.primary a');

function showSection(sectionId) {
    // 1. Fade out current section and hide all
    sections.forEach(sec => {
        if (!sec.classList.contains('hidden-section')) {
            sec.classList.add('fading-out');
        }
    });

    // 2. After fade-out, switch visibility
    setTimeout(() => {
        sections.forEach(sec => {
            sec.classList.add('hidden-section');
            sec.classList.remove('fading-out');
            sec.style.opacity = '0';
        });

        const targetSection = document.querySelector(sectionId);
        if (targetSection) {
            targetSection.classList.remove('hidden-section');
            // 3. Fade in new section
            setTimeout(() => {
                targetSection.style.opacity = '1';
                targetSection.style.transform = 'translateY(0)';
            }, 50); // Small delay to re-trigger transition
        }
    }, 400); // Wait for the transition defined in CSS (0.4s)

    // Update URL Hash and scroll to top of main content
    if (window.location.hash !== sectionId) {
        history.pushState(null, null, sectionId);
    }
    document.querySelector('.container').scrollIntoView({ behavior: 'smooth' });

    // Update active navigation link
    navLinks.forEach(link => {
        link.classList.remove('active-nav');
        if (link.getAttribute('href') === sectionId) {
            link.classList.add('active-nav');
        }
    });
}

// Event listener for navigation links
navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        showSection(targetId);
    });
});

// Handle initial load and history changes
function handleUrlHash() {
    const hash = window.location.hash || '#downloads';
    showSection(hash);
}

window.addEventListener('popstate', handleUrlHash);

/* =========================== Welcome Modal Logic =========================== */
openWelcome.addEventListener('click', () => {
  welcomeBackdrop.style.display = 'flex';
  welcomeBackdrop.setAttribute('aria-hidden', 'false');
});

[welcomeBackdrop, welcomeSkip].forEach(el => {
  el.addEventListener('click', (e) => {
    if (e.target === welcomeBackdrop || e.target === welcomeSkip) {
      welcomeBackdrop.style.display = 'none';
      welcomeBackdrop.setAttribute('aria-hidden', 'true');
    }
  });
});

welcomeSave.addEventListener('click', () => {
  const lang = welcomeLang.value;
  const theme = document.querySelector('input[name="welcomeTheme"]:checked').value;
  // 1. Save preferences
  localStorage.setItem('growfax_lang', lang);
  localStorage.setItem('growfax_theme', theme);
  // 2. Apply theme (will call loadTheme which uses the new language)
  document.body.setAttribute('data-theme', theme);
  // 3. Apply translations (calls loadTheme/updateTime internally if needed)
  langSelect.value = lang;
  applyTranslations(lang);
  updateTime();
  loadTheme(); // Re-apply theme toggle text with correct language
  // 4. Hide modal
  welcomeBackdrop.style.display = 'none';
  welcomeBackdrop.setAttribute('aria-hidden', 'true');
});

/* =========================== Theme Toggle Logic =========================== */
themeToggle.addEventListener('click', () => {
  const currentTheme = document.body.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.body.setAttribute('data-theme', newTheme);
  localStorage.setItem('growfax_theme', newTheme);
  
  const lang = langSelect.value;
  if (newTheme === 'dark') {
    themeToggle.textContent = lang === 'id' ? (translations.id['üåû Light'] || 'üåû Light') : 'üåû Light';
  } else {
    themeToggle.textContent = lang === 'id' ? (translations.id['üåô Dark'] || 'üåô Dark') : 'üåô Dark';
  }
});

/* =========================== Language Selector Logic =========================== */
langSelect.addEventListener('change', (e) => {
  const newLang = e.target.value;
  localStorage.setItem('growfax_lang', newLang);
  welcomeLang.value = newLang; // Sync welcome modal
  applyTranslations(newLang);
  updateTime();
  loadTheme(); // Re-apply theme toggle text with correct language
});

/* =========================== Download/Modal Logic =========================== */

// Handle download button clicks
downloadButtons.forEach(button => {
  button.addEventListener('click', (e) => {
    const filename = button.getAttribute('data-filename');
    const filekey = button.getAttribute('data-filekey');
    const meta = FILE_META[filekey];
    const lang = langSelect.value;
    
    // Check if file metadata exists for modal info
    if (!meta) {
      showToast(lang === 'id' ? (translations.id['Download failed: file not found.'] || 'Unduhan gagal: berkas tidak ditemukan.') : 'Download failed: file not found.', 3000);
      return;
    }

    // Modal elements
    document.getElementById('modalVersion').textContent = `v${meta.version}`;
    document.getElementById('modalUpdated').textContent = `${lang === 'id' ? (translations.id['Updated'] || 'Diperbarui') : 'Updated'}: ${meta.updated}`;
    document.getElementById('modalChangelog').textContent = `${lang === 'id' ? (translations.id['Changelog'] || 'Catatan pembaruan') : 'Changelog'}: ${meta.changelog}`;
    document.getElementById('modalFilename').textContent = `${lang === 'id' ? (translations.id['Filename'] || 'Nama berkas') : 'Filename'}: ${filename}`;
    
    // Set download URL for confirm button
    modalConfirm.onclick = () => {
        // Since we are using an actual download attribute on the anchor, 
        // this is mostly for visual confirmation.
        // For a true download, we'd trigger a click event on the original link or 
        // redirect to the link if we were not using download attribute.
        // As a fallback for compatibility, we use the original logic on the anchor itself.
        
        // This confirms and then lets the original anchor click event (with download attribute) fire if available.
        // Hide the modal first
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden', 'true');
        
        // Manual download trigger for robustness (since we intercepted the click)
        const href = button.getAttribute('href');
        const temp = document.createElement('a');
        temp.href = href;
        temp.download = filename || '';
        document.body.appendChild(temp);
        temp.click();
        temp.remove();
        showToast(lang === 'id' ? (translations.id['Download initiated: '] || 'Unduhan dimulai: ') + filename : 'Download initiated: ' + filename, 1500);

    };

    // Show modal
    modalBackdrop.style.display = 'flex';
    modalBackdrop.setAttribute('aria-hidden', 'false');

    // Handle cancel button
    modalCancel.onclick = () => {
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
    };
  });
});

// Handle iOS/PowerTunnel button clicks (Copy Config)
[iosButton, powertunnelButton].forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        const filekey = button.getAttribute('data-filekey');
        const meta = FILE_META[filekey];
        const lang = langSelect.value;
        
        if (!meta || !meta.copytext) {
             showToast(lang === 'id' ? (translations.id['Download failed: file not found.'] || 'Unduhan gagal: berkas tidak ditemukan.') : 'Download failed: file not found.', 3000);
             return;
        }
        
        // Logic to copy config text
        if (navigator.clipboard) {
            navigator.clipboard.writeText(meta.copytext).then(() => {
                showToast(lang === 'id' ? (translations.id['Config copied!'] || 'Konfigurasi disalin!') : 'Config copied!', 2500);
            }).catch(err => {
                console.error('Could not copy text: ', err);
                showToast(lang === 'id' ? 'Gagal menyalin. Silakan salin manual dari modal.' : 'Failed to copy. Please copy manually from the modal.', 3000);
            });
        } else {
             // Fallback for older browsers
             const ta = document.createElement('textarea');
             ta.value = meta.copytext;
             document.body.appendChild(ta);
             ta.select();
             try{ document.execCommand('copy'); showToast(lang === 'id' ? (translations.id['Config copied!'] || 'Konfigurasi disalin!') : 'Config copied!', 2500);}catch(e){ alert('Salin manual:\n'+meta.copytext); }
             ta.remove();
        }

        // Display modal with copy text/info
        document.getElementById('modalVersion').textContent = `v${meta.version}`;
        document.getElementById('modalUpdated').textContent = `${lang === 'id' ? (translations.id['Updated'] || 'Diperbarui') : 'Updated'}: ${meta.updated}`;
        document.getElementById('modalChangelog').textContent = `${lang === 'id' ? (translations.id['Changelog'] || 'Catatan pembaruan') : 'Changelog'}: ${meta.changelog}`;
        document.getElementById('modalFilename').textContent = `${lang === 'id' ? (translations.id['Filename'] || 'Nama berkas') : 'Filename'}: ${button.getAttribute('data-filename')}`;

        document.getElementById('modalTitle').textContent = lang === 'id' ? (translations.id['File info'] || 'Info berkas') : 'File info';
        document.getElementById('modalDesc').innerHTML = `<p>${lang === 'id' ? 'Konfigurasi berhasil disalin. Gunakan teks di bawah ini di aplikasi Anda:' : 'Config copied successfully. Use the text below in your app:'}</p><textarea readonly style="width:100%; height:100px; padding:10px; border:1px solid var(--border-color); border-radius:6px; background:var(--card-bg); color:var(--text); margin-top:10px; font-family:monospace; font-size: 0.85rem;">${meta.copytext}</textarea>`;
        
        // Change confirm button to 'Copy Config'
        modalConfirm.textContent = lang === 'id' ? (translations.id['Copy Config'] || 'Salin Konfigurasi') : 'Copy Config';
        modalConfirm.onclick = () => {
             // Re-copy on button click
             navigator.clipboard.writeText(meta.copytext).then(() => {
                showToast(lang === 'id' ? (translations.id['Config copied!'] || 'Konfigurasi disalin!') : 'Config copied!', 2500);
            });
        };
        
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden', 'false');
        modalCancel.onclick = () => {
          modalBackdrop.style.display = 'none';
          modalBackdrop.setAttribute('aria-hidden', 'true');
        };
    });
});

/* =========================== Shop Purchase Logic =========================== */
shopButtons.forEach(button => {
  button.addEventListener('click', (e) => {
    e.preventDefault();
    const roleName = button.getAttribute('data-role');
    const lang = langSelect.value;
    let toastMessage = lang === 'en' ? `Opening PayPal for purchase (${roleName})...` : `Membuka PayPal untuk pembelian (${roleName})...`;

    if (button.classList.contains('btn-usd')) {
      const usdPrice = button.getAttribute('data-price');
      toastMessage = lang === 'en' ? `Opening PayPal for USD purchase (${roleName} - $${usdPrice})...` : (translations.id['Opening PayPal for USD purchase'] || 'Membuka PayPal untuk pembelian $USD') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-idr')) {
      const idrPrice = button.getAttribute('data-idr-price');
      toastMessage = lang === 'en' ? `Opening PayPal for IDR purchase (${roleName} - Rp ${idrPrice})...` : (translations.id['Membuka PayPal untuk pembelian Rp IDR'] || 'Membuka PayPal untuk pembelian Rp IDR') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-eur')) {
      const eurPrice = button.getAttribute('data-price-eur');
      toastMessage = lang === 'en' ? `Opening PayPal for EUR purchase (${roleName} - ‚Ç¨${eurPrice})...` : (translations.id['Opening PayPal for EUR purchase'] || 'Membuka PayPal untuk pembelian ‚Ç¨EUR') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-gbp')) {
      const gbpPrice = button.getAttribute('data-price-gbp');
      toastMessage = lang === 'en' ? `Opening PayPal for GBP purchase (${roleName} - ¬£${gbpPrice})...` : (translations.id['Opening PayPal for GBP purchase'] || 'Membuka PayPal untuk pembelian ¬£GBP') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-aud')) {
      const audPrice = button.getAttribute('data-price-aud');
      toastMessage = lang === 'en' ? `Opening PayPal for AUD purchase (${roleName} - A$${audPrice})...` : (translations.id['Opening PayPal for AUD purchase'] || 'Membuka PayPal untuk pembelian A$AUD') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-sgd')) {
      const sgdPrice = button.getAttribute('data-price-sgd');
      toastMessage = lang === 'en' ? `Opening PayPal for SGD purchase (${roleName} - S$${sgdPrice})...` : (translations.id['Opening PayPal for SGD purchase'] || 'Membuka PayPal untuk pembelian S$ SGD') + ` (${roleName})...`;
    } else if (button.classList.contains('btn-cad')) {
      const cadPrice = button.getAttribute('data-price-cad');
      toastMessage = lang === 'en' ? `Opening PayPal for CAD purchase (${roleName} - C$${cadPrice})...` : (translations.id['Opening PayPal for CAD purchase'] || 'Membuka PayPal untuk pembelian C$ CAD') + ` (${roleName})...`;
    } 

    showToast(toastMessage, 2000);
    window.open(button.href, '_blank', 'noopener'); // Open the PayPal link
  });
});

/* =========================== Admin Dashboard Logic (ENHANCED with Logout) =========================== */

// NEW: Admin Logout Button Logic
const adminLogout = document.createElement('button');
adminLogout.id = 'adminLogout';
adminLogout.className = 'btn secondary';
adminLogout.textContent = isAdminLoggedIn ? (langSelect.value === 'id' ? (translations.id['Log out'] || 'Keluar') : 'Logout') : '';
adminLogout.style.position = 'absolute';
adminLogout.style.top = '10px';
adminLogout.style.right = '70px'; // Adjusted position
adminLogout.style.fontSize = '0.8rem';
adminLogout.style.padding = '6px 10px';
adminLogout.style.zIndex = '10';
adminLogout.style.display = isAdminLoggedIn ? 'block' : 'none'; // Show if already logged in

adminLogout.addEventListener('click', () => {
    const lang = langSelect.value;
    localStorage.removeItem('isAdminLoggedIn');
    isAdminLoggedIn = false;
    adminContent.style.display = 'none';
    adminLogin.style.display = 'block';
    adminLogout.style.display = 'none';
    
    // Stop the analytics auto-refresh loop when logging out
    if (analyticsInterval) { 
        clearInterval(analyticsInterval); 
        analyticsInterval = null; 
    }
    
    closeAdmin.click(); // Close modal
    showToast(lang === 'id' ? (translations.id['Logged out.'] || 'Berhasil Keluar.') : 'Logged out.', 2000);
});
document.querySelector('.admin-modal').appendChild(adminLogout);


document.getElementById('openAdmin').addEventListener('click', () => {
  adminBackdrop.style.display = 'flex';
  adminBackdrop.setAttribute('aria-hidden', 'false');
  if (isAdminLoggedIn) {
    adminLogin.style.display = 'none';
    adminContent.style.display = 'block';
    adminLogout.style.display = 'block'; // Show logout button
    renderAnalyticsDashboard(); // Ensure analytics starts/updates
  } else {
    adminLogin.style.display = 'block';
    adminContent.style.display = 'none';
    adminLogout.style.display = 'none';
  }
});

closeAdmin.addEventListener('click', () => {
  adminBackdrop.style.display = 'none';
  adminBackdrop.setAttribute('aria-hidden', 'true');
  // Stop the analytics auto-refresh loop when closing
  if (analyticsInterval) {
    clearInterval(analyticsInterval);
    analyticsInterval = null;
  }
});

// Admin Login Logic (Updated with Auto-Refresh and Session)
adminTokenSubmit.addEventListener('click', () => {
  const lang = langSelect.value;
  if (adminTokenInput.value === ADMIN_TOKEN) {
    adminLogin.style.display = 'none';
    adminContent.style.display = 'block';
    isAdminLoggedIn = true; // NEW: Set session flag
    localStorage.setItem('isAdminLoggedIn', 'true'); // NEW: Persist login
    adminLogout.style.display = 'block'; // Show logout button
    renderAnalyticsDashboard();
    showToast(lang === 'id' ? (translations.id['Login Admin berhasil'] || 'Login Admin berhasil') : 'Admin Login success', 2000);
  } else {
    showToast('Invalid Token.', 2000);
  }
});

// Admin News Save Logic
saveNewsUpdate.addEventListener('click', () => {
  const text = newsUpdateTextarea.value;
  const lang = langSelect.value;
  saveNewsUpdateText(text);
  showToast(lang === 'id' ? (translations.id['News updated successfully.'] || 'Berita berhasil diperbarui.') : 'News updated successfully.', 2000);
});

// Admin SEO Save Logic (NEW: Added Validation)
document.getElementById('saveSeoMeta').addEventListener('click', () => {
    const title = seoTitleInput.value.trim();
    const desc = seoDescTextarea.value.trim();
    const keywords = seoKeywordsInput.value.trim();
    const lang = langSelect.value;

    if (!title || !desc || !keywords) {
        showToast(lang === 'id' ? (translations.id['‚ö†Ô∏è Semua bidang SEO wajib diisi.'] || '‚ö†Ô∏è Semua bidang SEO wajib diisi.') : (translations.en['‚ö†Ô∏è All SEO fields are required.'] || '‚ö†Ô∏è All SEO fields are required.'), 3000);
        return;
    }

    if (title.length > 70 || desc.length > 160) {
        showToast(lang === 'id' ? (translations.id['‚ö†Ô∏è Judul (maks 70 kar.) dan Deskripsi (maks 160 kar.) terlalu panjang.'] || '‚ö†Ô∏è Judul (maks 70 kar.) dan Deskripsi (maks 160 kar.) terlalu panjang.') : (translations.en['‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.'] || '‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.'), 4000);
        return;
    }

    saveSeoSettings(title, desc, keywords);
    loadSeoSettings(); // Re-apply to HTML head

    showToast(lang === 'id' ? (translations.id['SEO Meta updated successfully.'] || 'Meta SEO berhasil diperbarui.') : 'SEO Meta updated successfully.', 2000);
});

/* =========================== Admin Dashboard Analytics (Simulated) =========================== */
const SIMULATED_DATA = {
  totalDownloads: 12500, // Initial value
  activities: [] // Store simulated activities
};

function simulateNewActivity() {
  SIMULATED_DATA.totalDownloads += Math.floor(Math.random() * 5) + 1; // Increase downloads
  const possibleActivities = [
    { type: "Download initiated: ", details: "VirtualHost.txt" },
    { type: "Download initiated: ", details: "GrowFax_ios_config.txt" },
    { type: "Shop purchase: ", details: "Admin Role" },
    { type: "Admin Login success", details: "192.168.1.1" }
  ];
  const newActivity = possibleActivities[Math.floor(Math.random() * possibleActivities.length)];
  newActivity.time = new Date(); // Add timestamp
  SIMULATED_DATA.activities.unshift(newActivity);
  // Keep only the last 15 activities
  if (SIMULATED_DATA.activities.length > 15) {
    SIMULATED_DATA.activities.pop();
  }
}
// Simulate an activity every 10 seconds
setInterval(simulateNewActivity, 10000);

function renderAnalyticsDashboard() {
  const lang = langSelect.value;
  totalDownloadsDisplay.textContent = SIMULATED_DATA.totalDownloads.toLocaleString(lang);
  activitiesList.innerHTML = '';
  SIMULATED_DATA.activities.forEach(activity => {
    const li = document.createElement('li');
    const timeAgo = timeSince(activity.time);
    let activityType = lang === 'en' ? activity.type : (translations[lang]?.[activity.type] || activity.type);
    let details = activity.details;
    if (activityType === 'Admin Login success' && lang === 'id') {
      activityType = translations.id['Login Admin berhasil'] || 'Login Admin berhasil';
    } else if (activityType === 'Shop purchase: ' && lang === 'id') {
      activityType = (translations.id['Shop purchase: '] || 'Pembelian toko: ');
      details = translations.id[details] || details; // Translate role name
    } else if (activityType === 'Download initiated: ' && lang === 'id') {
      activityType = (translations.id['Download initiated: '] || 'Unduhan dimulai: ');
    }
    
    li.innerHTML = `<strong>${activityType}</strong>${details ? details : ''} <span style="font-size:0.75rem; color:var(--muted); white-space:nowrap;">(${timeAgo})</span>`;
    activitiesList.appendChild(li);
  });

  // Start auto-refresh only if content is visible
  if (adminContent.style.display === 'block') {
    if (analyticsInterval) clearInterval(analyticsInterval);
    analyticsInterval = setInterval(() => {
      renderAnalyticsDashboard();
    }, 5000); // Update every 5 seconds
  }
}

// Admin Toggle Status Logic (Simulated)
toggleServerStatus.addEventListener('click', () => {
  serverIsOnline = !serverIsOnline;
  const lang = langSelect.value;
  serverStatusDisplay.textContent = serverIsOnline ? (lang === 'id' ? translations.id['Online'] : 'Online') : (lang === 'id' ? translations.id['Offline'] : 'Offline');
  serverStatusDisplay.style.color = serverIsOnline ? 'var(--success)' : 'var(--danger)';
  showToast(lang === 'id' ? (translations.id['Server Status changed.'] || 'Status Server diubah.') : 'Server Status changed.', 2000);
});

// Admin Refresh Analytics Button
refreshAnalytics.addEventListener('click', () => {
  renderAnalyticsDashboard();
  showToast(langSelect.value === 'id' ? (translations.id['Refresh Data'] || 'Segarkan Data') + '...' : 'Refreshing Data...', 1000);
});

/* =========================== Report Bug Button Logic =========================== */
document.getElementById('reportBugLink').addEventListener('click', (e) => {
  e.preventDefault();
  const lang = langSelect.value;
  const emailSubject = lang === 'id' ? (translations.id['Report Bug - Growfax'] || 'Laporan Bug - Growfax') : 'Bug Report - Growfax';
  const emailBody = lang === 'id' ? (translations.id['Halo Admin Growfax,\n\nSaya ingin melaporkan bug berikut:\n\n[Jelaskan bug di sini, termasuk langkah-langkah untuk mereproduksinya, dan perangkat yang Anda gunakan (Android/iOS/Windows).]\n\nTerima kasih.'] || `Halo Admin Growfax,\n\nSaya ingin melaporkan bug berikut:\n\n[Jelaskan bug di sini, termasuk langkah-langkah untuk mereproduksinya, dan perangkat yang Anda gunakan (Android/iOS/Windows).]\n\nTerima kasih.`) : (translations.en['Hello Growfax Admin,\n\nI would like to report the following bug:\n\n[Describe the bug here, including steps to reproduce it, and the device you are using (Android/iOS/Windows).]\n\nThank you.'] || `Hello Growfax Admin,\n\nI would like to report the following bug:\n\n[Describe the bug here, including steps to reproduce it, and the device you are using (Android/iOS/Windows).]\n\nThank you.`);
  const mailtoLink = `mailto:growfax.dev@gmail.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
  window.open(mailtoLink, '_blank');
});

/* =========================== Cookie Consent Logic (NEW FEATURE) =========================== */
const cookieConsent = document.getElementById('cookieConsent');
const acceptCookies = document.getElementById('acceptCookies');
const COOKIE_KEY = 'growfax_cookies_accepted';

function checkCookieConsent() {
    if (localStorage.getItem(COOKIE_KEY) !== 'true') {
        cookieConsent.classList.remove('hidden');
    } else {
        cookieConsent.classList.add('hidden');
    }
}

function setCookieConsent() {
    localStorage.setItem(COOKIE_KEY, 'true');
    cookieConsent.classList.add('hidden');
    // Optional: Initialize tracking scripts (like Google Analytics) here if they were deferred
    showToast(langSelect.value === 'id' ? (translations.id['Thank you for accepting cookies.'] || 'Terima kasih telah menerima cookie.') : (translations.en['Thank you for accepting cookies.'] || 'Thank you for accepting cookies.'), 2000);
}

acceptCookies.addEventListener('click', setCookieConsent);


// =========================== Initial Load Sequence ===========================

// Initial call (Must be called in this order)
loadLang(); // Must be called before loadTheme to set initial langSelect value
loadTheme();
loadSeoSettings();
loadNewsUpdate();
updateTime();
handleUrlHash(); // NEW: Initial routing/SPA setup
checkCookieConsent(); // NEW: Initial cookie check
setInterval(updateTime, 1000); // Set a periodic update for time

</script>
</body>
</html>
