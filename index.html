<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Growfax Official - Private Growtopia Server & Downloads</title>
<link rel="icon" href="Growfax_banner.jpg" type="image/jpeg">

<meta name="description" content="Situs resmi Growfax, private server Growtopia. Unduh file host terbaru untuk Android, Windows, dan iOS. Mainkan Growtopia dengan fitur eksklusif dan komunitas aktif!" />
<meta name="keywords" content="Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growtopia, Growfax Android, Growfax Windows" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://growfax.web.id/home" />

<meta property="og:type" content="website" />
<meta property="og:url" content="https://growfax.web.id/home" />
<meta property="og:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta property="og:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami." />
<meta property="og:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content="https://growfax.web.id/home" />
<meta name="twitter:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta name="twitter:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami." />
<meta name="twitter:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> 

<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX'); // Placeholder ID for Growfax Analytics
</script>
<style>
  /* ============================================================
     Growfax Official ‚Äî FULL UI stylesheet (futuristic neon/fax)
     - Mobile-First Optimization Applied (Fixed Horizontal Scrolling)
     ============================================================ */

  /* Global Reset: Ensure padding/border don't cause overflow */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* NEW: Keyframes for Logo Animation */
  @keyframes pulse {
    0% { transform: scale(1); box-shadow: var(--logo-shadow); }
    50% { transform: scale(1.02); box-shadow: var(--logo-shadow-hover); }
    100% { transform: scale(1); box-shadow: var(--logo-shadow); }
  }

  :root{
    --bg:#f8f8f8;
    --card-bg:#fff;
    --text:#1a1a1a;
    --accent:#0078d7;
    --card-shadow:0 8px 20px rgba(0,0,0,0.08);
    --discord-color:#7289da;
    --muted:#667;
    --toast-bg:rgba(0,0,0,0.8);
    --glass: rgba(255,255,255,0.6);
    --success:#2ecc71;
    --danger:#e74c3c;
    --mono: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    --border-color: rgba(0,0,0,0.08);
    --shop-bg: #8e44ad; /* New color for shop: Purple */
    --shop-glow: rgba(142, 68, 173, 0.4);

    /* UPDATED: Custom properties for YELLOW glow effect in light mode */
    --glow-color-light: rgba(255, 193, 7, 0.6); /* soft yellow glow */
    --text-shadow-light: 0 0 10px var(--glow-color-light), 0 2px 4px rgba(0,0,0,0.2);
    --logo-shadow: 0 4px 12px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
    --logo-shadow-hover: 0 8px 20px rgba(255, 193, 7, 0.4);
  }
  [data-theme="dark"]{
    --bg:#0f1720;
    --card-bg:#0b1220;
    --text:#e6eef8;
    --accent:#4da3ff;
    --card-shadow:0 8px 28px rgba(0,0,0,0.6);
    --discord-color:#5b6ea6;
    --muted:#9aa;
    --toast-bg:rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.03);
    --border-color: rgba(255,255,255,0.06);
    --shop-bg: #9b59b6; /* Lighter purple for dark mode */
    --shop-glow: rgba(155, 89, 182, 0.6);

    /* UPDATED: Custom properties for YELLOW glow effect in dark mode */
    --glow-color-dark: rgba(255, 170, 0, 0.8); /* brighter gold glow */
    --text-shadow-dark: 0 0 12px var(--glow-color-dark), 0 2px 8px rgba(0,0,0,0.6);
    --logo-shadow: 0 6px 18px rgba(0,0,0,0.4), 0 3px 9px rgba(0,0,0,0.25);
    --logo-shadow-hover: 0 10px 25px rgba(255, 170, 0, 0.5);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:var(--mono);
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    transition:background .25s,color .25s;
    overflow-x: hidden;
  }
  
  /* -------------------------
     Header / Navigation (Optimasi Mobile)
     ------------------------- */
  header{background:var(--card-bg);box-shadow:var(--card-shadow);position:sticky;top:0;z-index:1200}
  .header-content{
    max-width:1100px;
    margin:0 auto;
    padding:10px 10px; /* ADJUSTED: Reduced padding for mobile */
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    flex-wrap: wrap; 
  }
  .header-left{
    display:flex;
    align-items:center;
    gap:8px; 
    flex: 1 1 50%;
  }
  .brand-wrap{display:flex;align-items:center;gap:8px}
  
  /* Glow, lift, and Pulse Animation for logo image */
  .brand-wrap img{
    width:36px;
    height:36px;
    border-radius:6px;
    object-fit:cover;
    transition: box-shadow .25s, transform .25s, opacity 0.2s ease;
    box-shadow: var(--logo-shadow);
    /* Apply animation */
    animation: pulse 3s infinite ease-in-out;
  }

  h1{
    font-size:1.2rem;
    margin:0;
    font-weight:700;
    /* Added opacity transition for smoother language change */
    transition: text-shadow .25s, opacity 0.2s ease;
    color: var(--text);
    text-shadow: var(--text-shadow-light); 
  }
  [data-theme="dark"] h1 {
    text-shadow: var(--text-shadow-dark); 
  }

  .brand-wrap > div > div { 
    font-size: 0.75rem; 
    /* Added opacity transition for smoother language change */
    transition: opacity 0.2s ease;
  }

  nav.primary{
    color:var(--accent);
    text-decoration:none;
    font-weight:700;
    margin-left:auto; 
    font-size: 0.9rem;
    flex: 1 1 100%; 
    margin-top: 6px; /* ADJUSTED: Reduced margin for tighter fit */
    text-align: left;
  }
  nav.primary a{
      color:var(--accent);
      text-decoration:none;
      font-weight:700;
      margin-left:0;
      margin-right: 12px;
      /* Added opacity transition for smoother language change */
      transition: opacity 0.2s ease, transform .18s;
  }
  nav.primary a:hover{opacity:.86;transform:translateY(-1px)}
  
  .controls{
    display:flex;
    align-items:center;
    gap:6px;
    flex: 0 1 auto;
    /* FIX FOR MOBILE WRAPPING: Allow buttons to wrap within the controls box */
    flex-wrap: wrap; 
    justify-content: flex-end; /* Keep the buttons aligned to the right */
  }
  /* Gaya untuk semua tombol kontrol di header */
  .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
    font-size:0.9rem;
    padding:6px 8px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:transparent;
    color:var(--text);
    cursor:pointer;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
    /* Added opacity transition for smoother language change */
    transition: background-color .15s, opacity 0.2s ease;
  }
  .report-bug-btn:hover, .theme-toggle:hover, .open-welcome:hover, #openAdmin:hover {
    background: rgba(0,0,0,0.05);
  }
  [data-theme="dark"] .report-bug-btn:hover, [data-theme="dark"] .theme-toggle:hover, [data-theme="dark"] .open-welcome:hover, [data-theme="dark"] #openAdmin:hover {
    background: rgba(255,255,255,0.05);
  }

  /* -------------------------
     Banner / Hero
     ------------------------- */
  .banner-section{text-align:center;padding:40px 10px;background:linear-gradient(90deg, rgba(0,0,0,0.03), rgba(255,255,255,0.02))}
  .banner-section img{max-width:200px;border-radius:8px;margin-bottom:14px}
  .banner-section h2{
    font-size:1.6rem;
    color:#ffaa00;
    margin:8px 0;
    text-shadow:0 0 10px rgba(255,170,0,0.18);
    transition: opacity 0.2s ease;
  }
  .banner-section p{
    font-size:0.95rem;
    opacity:.92;
    margin:0;
    transition: opacity 0.2s ease;
  }
  .time-display{
    margin-top:8px;
    font-size:0.85rem;
    font-weight:600;
    opacity:.9;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Container (main content)
     ------------------------- */
  .container{max-width:1000px;margin:32px auto;text-align:center;padding:0 10px}
  .container h2{
    font-size:1.4rem;
    margin-bottom:24px;
    transition: opacity 0.2s ease;
  }
  
  /* Platform Buttons: Full width for mobile */
  .platform-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:14px}
  .platform-buttons a{
    display:flex;align-items:center;justify-content:center;gap:12px;
    width:92%; 
    padding:14px 18px;border-radius:12px;color:#fff;font-weight:700;
    text-decoration:none;border:1px solid transparent;font-size:1.02rem;
    transition:transform .18s ease,box-shadow .18s, opacity 0.2s ease;
  }
  .platform-buttons a img{width:30px;height:30px;border-radius:6px}
  .platform-buttons a:hover{transform:translateY(-2px)}

  .btn-android{background:#34c759;--glow:#4cff77;box-shadow:0 4px 16px rgba(76,255,119,0.08)}
  .btn-windows{background:#0078d7;--glow:#4da3ff;box-shadow:0 4px 16px rgba(77,163,255,0.08)}
  .btn-ios{background:#007aff;--glow:#7acbff;box-shadow:0 4px 16px rgba(122,203,255,0.08)}
  .btn-powertunnel{background:#b71c1c;--glow:#ff5a5a;box-shadow:0 4px 16px rgba(255,90,90,0.08)}

  /* NEW: Shop Roles Grid */
  .shop-roles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 24px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
  }
  .shop-role-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      border-top: 4px solid var(--shop-bg);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      height: auto; /* Allow card height to adjust to full command list */
  }
  .shop-role-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px var(--shop-glow);
  }
  .shop-role-card h3 {
      margin-top: 0;
      font-size: 1.25rem;
      color: var(--shop-bg);
      text-shadow: 0 0 5px rgba(142, 68, 173, 0.1);
  }
  .shop-role-card .price {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text);
      margin: 8px 0 15px;
  }
  .shop-role-card .price small {
      font-size: 0.8rem;
      font-weight: 400;
      opacity: 0.7;
  }
  /* Updated UL style for commands */
  .shop-role-card ul {
      list-style-type: none;
      padding: 0;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--muted);
      white-space: pre-wrap; /* Ensure commands wrap correctly */
  }
  .shop-role-card ul li {
      margin-bottom: 8px;
      border-left: 3px solid var(--shop-bg);
      padding-left: 8px;
      line-height: 1.3;
  }
  .shop-role-card ul li:before {
      content: none; /* Remove default bullet */
  }
  .shop-role-card ul li strong {
      color: var(--accent);
      font-weight: 600;
      display: block;
      margin-bottom: 2px;
  }
  .shop-role-card ul li span {
      display: block;
      font-size: 0.85rem;
      opacity: 0.8;
  }
  .btn-purchase {
      background: var(--shop-bg);
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: 700;
      text-align: center;
      transition: background 0.15s, transform 0.15s;
      display: block; /* Make the button full width of the card */
  }
  .btn-purchase:hover {
      background: #732a9a;
      transform: translateY(-1px);
  }


  /* -------------------------
     Discord Section
     ------------------------- */
  .discord-section{background:var(--discord-color);color:#fff;padding:24px;border-radius:10px;max-width:820px;margin:32px auto 50px;text-align:center;box-shadow:var(--card-shadow)}
  .discord-section img{width:48px;height:48px;border-radius:8px;margin-bottom:8px}
  .discord-section h3, .discord-section p, .discord-section a {
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Footer
     ------------------------- */
  footer{
    text-align:center;
    margin:30px 0 40px;
    font-size:.85rem;
    opacity:.85;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Modal & Welcome/Admin Popup
     ------------------------- */
  .modal-backdrop, .welcome-backdrop, .admin-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1300}
  .modal, .welcome{width:92%;max-width:560px;background:var(--card-bg);color:var(--text);border-radius:12px;padding:16px;box-shadow:0 14px 40px rgba(0,0,0,0.2);transform:translateY(0);transition:transform .18s,opacity .18s}
  
  /* Added opacity transition to modal/welcome text elements */
  .modal h3, .modal p, .modal .changelog, .welcome h2, .welcome p, .welcome label, .welcome button, .modal h2, .modal h4 {
      transition: opacity 0.2s ease;
  }
  
  /* NEW: Admin Modal specific styles (input and buttons) */
  #adminTokenInput, #newsUpdateTextarea, #seoTitleInput, #seoDescTextarea, #seoKeywordsInput {
    /* Ensure they match the theme */
    border: 1px solid var(--border-color) !important;
    background: var(--card-bg) !important;
    color: var(--text) !important;
  }

  /* -------------------------
     Floating Discord button
     ------------------------- */
  .floating-chat{position:fixed;right:12px;bottom:12px;width:48px;height:48px;border-radius:50%;background:var(--discord-color);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.2);cursor:pointer;z-index:1500}
  .floating-chat img{width:24px;height:24px;border-radius:4px}

  /* -------------------------
     Toast message
     ------------------------- */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:70px;background:var(--toast-bg);color:#fff;padding:8px 12px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .18s,transform .18s;z-index:1600}
  
  /* ===========================
     PC/Desktop Optimizations (Min-width 600px)
     =========================== */
  @media (min-width: 600px) {
    /* Header/Nav kembali ke ukuran besar */
    .header-content {
        flex-wrap: nowrap;
        align-items: center;
        padding: 14px 20px;
    }
    /* Logo size PC */
    .brand-wrap img{width:46px;height:46px;border-radius:8px}
    /* H1 size PC */
    h1{font-size:1.4rem;}
    .brand-wrap > div > div { font-size: 0.85rem; }
    nav.primary {
        flex: 0 1 auto; 
        margin-top: 0;
        margin-left: 12px; 
        text-align: left;
    }
    nav.primary a{
        margin-left:12px;
        margin-right: 0;
        font-size: 1rem;
    }
    .controls{gap:10px; flex-wrap: nowrap;} /* Reset wrap on PC */
    /* Ukuran PC untuk semua tombol kontrol */
    .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
        font-size:0.98rem;
        padding:8px 12px;
        border-radius: 10px;
    }

    /* Tombol Unduhan kembali ke layout 300px */
    .platform-buttons{gap:20px}
    .platform-buttons a{
      width:300px; 
    }
    .platform-buttons a:hover{transform:translateY(-4px)}
    
    /* Shop Roles Grid PC */
    .shop-roles {
        grid-template-columns: repeat(3, minmax(200px, 1fr)); /* 3 columns on desktop */
    }

    /* Banner/Content padding besar */
    .banner-section{padding:56px 20px;}
    .banner-section img{max-width:240px;border-radius:10px;}
    .banner-section h2{font-size:1.9rem;}
    .container{margin:48px auto;padding:0 18px}
    .container h2{font-size:1.6rem;margin-bottom:28px}
    .discord-section{padding:32px;margin:42px auto 60px;}

    /* Floating button kembali ke posisi normal */
    .floating-chat{right:18px;bottom:18px;width:56px;height:56px;}
    .floating-chat img{width:28px;height:28px;}
    .toast{bottom:86px;}
  }
</style>
</head>
<body data-theme="light">
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="brand-wrap">
          <img src="Growfax_banner.jpg" alt="Growfax Logo">
          <div>
            <h1>Growfax Official</h1>
            <div style="font-size:0.85rem;color:var(--muted)">Private Growtopia Server</div>
          </div>
        </div>

        <nav class="primary" aria-label="Main navigation">
          <a href="#downloads" id="navDownloads">üì• Downloads</a> 
          <a href="#shop" id="navShop">üõí Shop</a>
        </nav>
      </div>

      <div class="controls">
        <a href="#" 
           id="reportBugLink" 
           class="report-bug-btn" 
           title="Report a Bug">üêû Report Bug</a>
        
        <button id="openAdmin" class="open-welcome" title="Admin Area">üîë Admin</button> <button id="openWelcome" class="open-welcome" title="Welcome & Preferences">‚öôÔ∏è</button>
        
        <select id="langSelect" class="lang-select" title="Language" aria-label="Select language">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">üåû Light</button>
      </div>
    </div>
  </header>

  <section class="banner-section" role="region" aria-label="Main banner">
    <img src="Growfax_banner.jpg" alt="Growfax Banner">
    <h2>Welcome to Growfax</h2>
    <p>Private Growtopia Server</p>
    <div id="timeDisplay" class="time-display">Loading time...</div>
  </section>

  <main class="container" role="main">
    <section id="downloads">
        <h2>üì• Essential File Downloads</h2>
        <div class="platform-buttons" role="list">
          <a href="Growfax_VirtualHost.txt" class="btn-android" data-filename="Growfax_VirtualHost.txt" data-filekey="virtualhost" download role="listitem">
            <img src="virtual-host.png" alt="">Play on Android
          </a>

          <a href="Growfax_Patched_.bat" class="btn-windows" data-filename="Growfax_Patched_.bat" data-filekey="patched" download role="listitem">
            <img src="windows.png" alt="">Play on Windows
          </a>

          <a href="#" class="btn-ios" data-filename="GrowFax_ios_config.txt" data-filekey="ios" role="listitem">
            <img src="surge5.png" alt="">Play on iOS
          </a>

          <a href="#" class="btn-powertunnel" data-filename="PowerTunnel_Host.txt" data-filekey="powertunnel" role="listitem">
            <img src="powertunnel.jpeg" alt="">Play via PowerTunnel
          </a>
        </div>
    </section>

    <section id="shop" style="margin-top: 60px; padding-top: 10px;">
        <h2>üõí Growfax Server Roles</h2>
        <p style="opacity: 0.8;">Support the server and unlock exclusive roles! Direct purchase via PayPal.me.</p>

        <div class="shop-roles">
            <div class="shop-role-card">
                <div>
                    <h3>‚ú® VIP Role</h3>
                    <p class="price">$0.7 <small>USD</small></p>
                    <ul id="vip_commands">
                        <li><strong>/superbreak</strong> <span>Activate the Super Breaker mode!</span></li>
                        <li><strong>/vsb</strong> <span>Send a VIP-Broadcast to everyone online!</span></li>
                    </ul>
                </div>
                <a href="https://paypal.me/Growfax/0.7" target="_blank" rel="noopener" class="btn-purchase" data-role="vip" data-price="0.7">Purchase VIP</a>
            </div>

            <div class="shop-role-card">
                <div>
                    <h3>üåü VIP+ Role</h3>
                    <p class="price">$1.2 <small>USD</small></p>
                    <ul id="vip_plus_commands">
                        <li><strong>/gemrain</strong> <span>Activate the Gem Rain & Enjoy 20% more gems!</span></li>
                        <li><strong>/sdb</strong> <span>Send a Super-Duper Broadcast to everyone online!</span></li>
                        <li><span>All VIP commands included!</span></li>
                    </ul>
                </div>
                <a href="https://paypal.me/Growfax/1.2" target="_blank" rel="noopener" class="btn-purchase" data-role="vip+" data-price="1.2">Purchase VIP+</a>
            </div>

            <div class="shop-role-card">
                <div>
                    <h3>üî® Moderator Role</h3>
                    <p class="price">$2.5 <small>USD</small></p>
                    <ul id="moderator_commands">
                        </ul>
                </div>
                <a href="https://paypal.me/Growfax/2.5" target="_blank" rel="noopener" class="btn-purchase" data-role="moderator" data-price="2.5">Purchase Moderator</a>
            </div>

            <div class="shop-role-card">
                <div>
                    <h3>üõ°Ô∏è Super Moderator</h3>
                    <p class="price">$3.2 <small>USD</small></p>
                    <ul id="super_moderator_commands">
                        </ul>
                </div>
                <a href="https://paypal.me/Growfax/3.2" target="_blank" rel="noopener" class="btn-purchase" data-role="super_moderator" data-price="3.2">Purchase Super Moderator</a>
            </div>

            <div class="shop-role-card">
                <div>
                    <h3>üíª Developer Role</h3>
                    <p class="price">$6.5 <small>USD</small></p>
                    <ul id="developer_commands">
                        </ul>
                </div>
                <a href="https://paypal.me/Growfax/6.5" target="_blank" rel="noopener" class="btn-purchase" data-role="developer" data-price="6.5">Purchase Developer</a>
            </div>

            <div class="shop-role-card">
                <div>
                    <h3>üëë GOD Role</h3>
                    <p class="price">$8.6 <small>USD</small></p>
                    <ul id="god_commands">
                        </ul>
                </div>
                <a href="https://paypal.me/Growfax/8.6" target="_blank" rel="noopener" class="btn-purchase" data-role="god" data-price="8.6">Purchase GOD</a>
            </div>
        </div>
    </section>
  </main>

  <section class="discord-section" aria-label="Discord community">
    <img src="discord.jpeg" alt="Discord Logo">
    <h3>Join Our Community</h3>
    <p>Connect with others and get support in our official Discord server.</p>
    <a id="discordLink" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener">Join Growfax Discord</a>
  </section>

  <footer>¬© 2025 Growfax. All rights reserved.</footer>

  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">File info</h3>
      <p id="modalDesc">Details before download</p>

      <div class="meta">
        <div class="chip" id="modalVersion">v0.0</div>
        <div class="chip" id="modalUpdated">Updated: ‚Äî</div>
      </div>

      <div class="changelog" id="modalChangelog">Changelog: ‚Äî</div>

      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div style="font-size:.9rem;color:var(--muted)" id="modalFilename">Filename</div>
        <div class="buttons">
          <button class="btn secondary" id="modalCancel">Cancel</button>
          <button class="btn primary" id="modalConfirm">Download</button>
        </div>
      </div>
    </div>
  </div>

  <div id="welcomeBackdrop" class="welcome-backdrop" aria-hidden="true">
    <div class="welcome" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
      <h2 id="welcomeTitle">Welcome to Growfax</h2>
      <p style="margin:6px 0 12px;opacity:.9">Set your preferred language and theme. We'll remember this for next time.</p>
      <div class="row">
        <label for="welcomeLang">Language</label>
        <select id="welcomeLang" class="lang-select">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
      </div>
      <div class="row">
        <label>Theme</label>
        <div style="display:flex;gap:10px;align-items:center">
          <label><input type="radio" name="welcomeTheme" value="light" checked> Light</label>
          <label><input type="radio" name="welcomeTheme" value="dark"> Dark</label>
        </div>
      </div>

      <div class="actions" style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px">
        <button class="btn secondary" id="welcomeSkip">Skip</button>
        <button class="btn primary" id="welcomeSave">Save & Continue</button>
      </div>
    </div>
  </div>

  <div id="adminBackdrop" class="modal-backdrop admin-backdrop" aria-hidden="true">
    <div class="modal admin-modal" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
        <h2 id="adminTitle">üîë Admin Area</h2>
        
        <div id="adminLogin" style="text-align: center; padding: 20px;">
            <p id="adminLoginPrompt">Enter the Admin Token to proceed:</p>
            <input type="password" id="adminTokenInput" placeholder="Token" style="padding: 10px; width: 80%; max-width: 300px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);">
            <button class="btn primary" id="adminTokenSubmit" style="margin-top: 10px; width: 80%; max-width: 300px;">Submit</button>
        </div>

        <div id="adminContent" style="display: none; padding-top: 10px;">
            <div style="margin-top: 15px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">Server Status</h4>
                <p>Status: <strong id="serverStatusDisplay" style="color: var(--success);">Online</strong></p>
                <button class="btn danger" id="toggleServerStatus">Toggle Status (Simulate)</button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);" id="analyticsTitle">Analytical Dashboard</h4>
                <div id="analyticsContent" style="text-align: left; font-size: 0.9rem;">
                    <p id="totalDownloadsContainer">Total Downloads: <strong id="totalDownloads">‚Äî</strong></p>
                    <p id="recentActivitiesTitle">Recent Activities:</p>
                    <ul id="recentActivities" style="margin: 5px 0 0 20px; padding: 0; list-style-type: square; font-size: 0.85rem;">
                        <li>Simulating data...</li>
                    </ul>
                    <button class="btn secondary" id="refreshAnalytics" style="margin-top: 10px; padding: 5px 10px;">Refresh Data</button>
                </div>
            </div>
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">News & Updates</h4>
                <textarea id="newsUpdateTextarea" style="width: 100%; height: 100px; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text); resize: vertical;" placeholder="Enter news/update text..."></textarea>
                <button class="btn primary" id="saveNewsUpdate" style="margin-top: 10px;">Save News</button>
            </div>

            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);" id="seoTitle">SEO Management</h4>
                
                <label for="seoTitleInput" style="display: block; margin-top: 10px; font-size: 0.9rem;">Page Title (Hanya Title Tag HTML)</label>
                <input type="text" id="seoTitleInput" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);" placeholder="Enter Page Title...">

                <label for="seoDescTextarea" style="display: block; margin-top: 10px; font-size: 0.9rem;">Meta Description</label>
                <textarea id="seoDescTextarea" style="width: 100%; height: 80px; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text); resize: vertical;" placeholder="Enter Meta Description..."></textarea>
                
                <label for="seoKeywordsInput" style="display: block; margin-top: 10px; font-size: 0.9rem;">Meta Keywords (Comma-separated)</label>
                <input type="text" id="seoKeywordsInput" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);" placeholder="Keyword1, Keyword2, ...">

                <button class="btn primary" id="saveSeoMeta" style="margin-top: 10px;">Update SEO Meta</button>
            </div>
            <div style="margin-top: 20px; text-align: right; border-top: 1px solid var(--border-color); padding-top: 10px;">
                <button class="btn secondary" id="closeAdmin">Close Admin Area</button>
            </div>
        </div>
    </div>
  </div>

  <a id="floatingChat" class="floating-chat" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener" title="Open Discord">
    <img src="discord.jpeg" alt="Discord">
  </a>

  <div id="toast" class="toast" role="alert" aria-live="assertive"></div>

<script>
  // --- File references (from Admin Area) ---
  const ADMIN_TOKEN = '1234'; // Simulated token
  const adminBackdrop = document.getElementById('adminBackdrop');
  const adminTitle = document.getElementById('adminTitle');
  const adminLogin = document.getElementById('adminLogin');
  const adminLoginPrompt = document.getElementById('adminLoginPrompt');
  const adminTokenInput = document.getElementById('adminTokenInput');
  const adminTokenSubmit = document.getElementById('adminTokenSubmit');
  const adminContent = document.getElementById('adminContent');
  const closeAdmin = document.getElementById('closeAdmin');
  const serverStatusDisplay = document.getElementById('serverStatusDisplay');
  const toggleServerStatus = document.getElementById('toggleServerStatus');
  const newsUpdateTextarea = document.getElementById('newsUpdateTextarea');
  const saveNewsUpdate = document.getElementById('saveNewsUpdate');

  // Analytical Dashboard Refs
  const analyticsTitle = document.getElementById('analyticsTitle');
  const totalDownloadsContainer = document.getElementById('totalDownloadsContainer');
  const totalDownloadsElement = document.getElementById('totalDownloads');
  const recentActivitiesTitle = document.getElementById('recentActivitiesTitle');
  const recentActivitiesElement = document.getElementById('recentActivities');
  const refreshAnalytics = document.getElementById('refreshAnalytics');

  // SEO Refs
  const seoTitle = document.getElementById('seoTitle');
  const seoTitleInput = document.getElementById('seoTitleInput');
  const seoDescTextarea = document.getElementById('seoDescTextarea');
  const seoKeywordsInput = document.getElementById('seoKeywordsInput');
  const saveSeoMeta = document.getElementById('saveSeoMeta');

  let isServerOnline = true; // Simulated server status
  let pendingDownload = null;
  let isAdminLoggedIn = false; // New state tracker
  let analyticsIntervalId = null; // ID untuk auto-refresh dashboard


  /* ===========================
     File metadata - PowerTunnel & iOS: Copy-text
     =========================== */
  const FILE_META = {
    virtualhost: {
      version: 'v2.1',
      updated: 'Oct 29, 2025',
      changelog: '- Fixed host parsing\n- Improved TLS handling',
      size: '2.3 KB'
    },
    patched: {
      version: 'v1.9',
      updated: 'Oct 20, 2025',
      changelog: '- Patched launcher\n- Minor fixes',
      size: '12.1 KB'
    },
    // MODIFIED: iOS now uses copytext instead of download
    ios: {
      version: 'v1.5',
      updated: 'Nov 02, 2025',
      changelog: '- New profile format for Surge 5\n- Added support for new regions',
      size: 'Text Config',
      copytext: '[Rule]\nHOST,growfax.web.id,REJECT\nHOST-SUFFIX,rt.growfax.com,REJECT\nIP-CIDR,127.0.0.1/32,REJECT' // Dummy iOS Config
    },
    powertunnel: {
      version: 'v1.1',
      updated: 'Oct 15, 2025',
      changelog: '- Updated host list\n- Added new block rules',
      size: 'Text Host',
      copytext: '127.0.0.1 growfax.web.id\n127.0.0.1 rt.growfax.com' // Dummy PowerTunnel Host
    }
  };


  /* ===========================
     Translation dictionary (expandable)
     =========================== */
  const translations = {
    id: {
      "Growfax Official": "Growfax Resmi",
      "Private Growtopia Server": "Server Growtopia Private",
      "üì• Downloads": "üì• Unduhan",
      "üõí Shop": "üõí Toko",
      "üêû Report Bug": "üêû Laporkan Bug",
      "üîë Admin": "üîë Admin",
      "Welcome to Growfax": "Selamat Datang di Growfax",
      "Private Growtopia Server": "Server Growtopia Private",
      "Loading time...": "Memuat waktu...",
      "Essential File Downloads": "Unduhan File Penting",
      "Play on Android": "Main di Android",
      "Play on Windows": "Main di Windows",
      "Play on iOS": "Main di iOS",
      "Play via PowerTunnel": "Main lewat PowerTunnel",
      "Join Our Community": "Bergabung dengan Komunitas Kami",
      "Connect with others and get support in our official Discord server.": "Terhubung dengan anggota lain dan dapatkan dukungan di server Discord resmi kami.",
      "Join Growfax Discord": "Gabung Discord Growfax",
      "¬© 2025 Growfax. All rights reserved.": "¬© 2025 Growfax. Semua hak dilindungi.",
      "Are you sure you want to download": "Apakah Anda yakin ingin mengunduh",
      "Details before download": "Detail sebelum mengunduh",
      "Cancel": "Batal",
      "Download": "Unduh",
      "Filename": "Nama berkas",
      "Version": "Versi",
      "Updated": "Diperbarui",
      "Changelog": "Catatan pembaruan",
      "Size": "Ukuran",
      "Set your preferred language and theme. We'll remember this for next time.": "Pilih bahasa dan tema favoritmu. Kami akan menyimpannya untuk kunjungan berikutnya.",
      "Save & Continue": "Simpan & Lanjutkan",
      "Skip": "Lewati",
      "Language": "Bahasa",
      "Theme": "Tema",
      "Opening Discord...": "Membuka Discord...",

      // Shop Translations (UPDATED for Commands)
      "üõí Growfax Server Roles": "üõí Role Server Growfax",
      "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.": "Dukung server dan buka role eksklusif! Pembelian langsung via PayPal.me.",
      "Purchase VIP": "Beli VIP",
      "Purchase VIP+": "Beli VIP+",
      "Purchase Moderator": "Beli Moderator",
      "Purchase Super Moderator": "Beli Super Moderator",
      "Purchase Developer": "Beli Developer",
      "Purchase GOD": "Beli GOD",
      "Activate the Super Breaker mode!": "Aktifkan mode Super Breaker!",
      "Send a VIP-Broadcast to everyone online!": "Kirim VIP-Broadcast ke semua orang yang online!",
      "Activate the Gem Rain & Enjoy 20% more gems!": "Aktifkan Gem Rain & Nikmati 20% lebih banyak permata!",
      "Send a Super-Duper Broadcast to everyone online!": "Kirim Super-Duper Broadcast ke semua orang yang online!",
      "All VIP commands included!": "Semua perintah VIP termasuk!",
      
      // NEW DETAILED COMMAND TRANSLATIONS
      "/longpunch": "/longpunch", 
      "Enabled Long Punch it allows you to break and build further": "Aktifkan Long Punch, memungkinkan Anda merusak dan membangun lebih jauh",
      "/skiptime": "/skiptime",
      "Activate the Skip Time ability! It makes your trees and providers grow 12 hours instantly!": "Aktifkan kemampuan Skip Time! Membuat pohon dan provider Anda tumbuh 12 jam seketika!",
      "/mod": "/mod",
      "Moderate a player, apply punishments & more!": "Moderasi pemain, terapkan hukuman & lainnya!",
      "/banworld": "/banworld",
      "Nuke a world, ban players, or even ban players from game!": "Musnahkan dunia, ban pemain, atau bahkan ban pemain dari game!",
      "/info": "/info",
      "View player's information!": "Lihat informasi pemain!",
      "/track": "/track",
      "Find player's alt accounts and get their names!": "Temukan akun alt pemain dan dapatkan namanya!",
      "/online": "/online",
      "View everyone who is online at this moment!": "Lihat semua orang yang sedang online saat ini!",
      "/msb": "/msb",
      "Moderator Broadcast to everyone online!": "Moderator Broadcast ke semua orang yang online!",
      "/ghost": "/ghost",
      "Enter ghost mode, you can walk through walls!": "Masuk mode ghost, Anda bisa berjalan menembus dinding!",
      "/invis": "/invis",
      "Become invisible to everyone! No one will ever know you exist!": "Menjadi tidak terlihat oleh semua orang! Tidak ada yang akan tahu Anda ada!",
      "/nick": "/nick",
      "Temporarily change your nickname!": "Ubah nickname sementara!",
      "/hide": "/hide",
      "Hide your Moderator's status, you'll look like a normal player!": "Sembunyikan status Moderator Anda, Anda akan terlihat seperti pemain biasa!",
      "/hideflag": "/hideflag",
      "Hide your Country flag!": "Sembunyikan bendera Negara Anda!",
      "/warpto": "/warpto",
      "Magically teleport to your desired player!": "Teleportasi secara ajaib ke pemain yang Anda inginkan!",
      "/silence": "/silence",
      "Mute a player for specific time!": "Mute pemain untuk waktu tertentu!",
      "/unsilence": "/unsilence",
      "Remove a mute from a player!": "Hapus mute dari pemain!",

      "/rpull": "/rpull",
      "Pull a random player in the world": "Tarik pemain acak di dunia",
      "/pullall": "/pullall",
      "Pull everyone who is in the world": "Tarik semua orang yang ada di dunia",
      "/freeze": "/freeze",
      "Freeze a player, it wont be able to move or do anything!": "Bekukan pemain, ia tidak akan bisa bergerak atau melakukan apa pun!",
      "/unfreeze": "/unfreeze",
      "Unfreeze a player, make it able to move again!": "Mencairkan pemain, membuatnya bisa bergerak lagi!",
      "ALL Actions": "SEMUA Aksi",
      "Perform actions like /loveall /omgall to make everyone do it!": "Lakukan aksi seperti /loveall /omgall untuk membuat semua orang melakukannya!",

      "/find Blocks": "/find Blocks",
      "Find any blocks and get them for free! (Limited to under 100 rarity non-farmable blocks)": "Temukan blok apa pun dan dapatkan secara gratis! (Terbatas pada blok non-farmable di bawah 100 rarity)",
      "/banall": "/banall",
      "Ban everyone from world!": "Ban semua orang dari dunia!",
      "/tpclick": "/tpclick",
      "Teleport where you click! (If ghost is enabled you can teleport everywhere, if not then you can teleport only if there's path)": "Teleportasi ke tempat Anda mengklik! (Jika ghost diaktifkan Anda dapat teleportasi ke mana saja, jika tidak, Anda hanya dapat teleportasi jika ada jalur)",

      "/find Clothes": "/find Clothes",
      "Find any clothes and get them for free! (Limited to rarity clothes)": "Temukan pakaian apa pun dan dapatkan secara gratis! (Terbatas pada pakaian rarity)",
      "/spk": "/spk",
      "Make other people say what you want them to say!": "Buat orang lain mengatakan apa yang Anda ingin mereka katakan!",
      
      // Inheritance lines
      "All VIP+ commands included!": "Semua perintah VIP+ termasuk!",
      "All Moderator commands included!": "Semua perintah Moderator termasuk!",
      "All Super Moderator commands included!": "Semua perintah Super Moderator termasuk!",
      "All Developer commands included!": "Semua perintah Developer termasuk!",

      // Admin Translations
      "üîë Admin Area": "üîë Area Admin",
      "Enter the Admin Token to proceed:": "Masukkan Token Admin untuk melanjutkan:",
      "Submit": "Kirim",
      "Server Status": "Status Server",
      "Online": "Online",
      "Offline": "Offline",
      "News & Updates": "Berita & Pembaruan",
      "Toggle Status (Simulate)": "Ubah Status (Simulasi)",
      "Save News": "Simpan Berita",
      "Close Admin Area": "Tutup Area Admin",

      // Analytical Tool Translations
      "Analytical Dashboard": "Dasbor Analitik",
      "Total Downloads:": "Total Unduhan:",
      "Recent Activities:": "Aktivitas Terbaru:",
      "Refresh Data": "Perbarui Data",
      "Download initiated:": "Unduhan dimulai: ",
      "Admin Login success": "Login Admin berhasil",

      // SEO Translations
      "SEO Management": "Manajemen SEO",
      "Page Title (Hanya Title Tag HTML)": "Judul Halaman (Hanya Tag Title HTML)",
      "Meta Description": "Deskripsi Meta",
      "Meta Keywords (Comma-separated)": "Kata Kunci Meta (Dipisahkan Koma)",
      "Update SEO Meta": "Perbarui Meta SEO",
    }
  };


  /* ===========================
     Analytical Dashboard Logic
     =========================== */
  // Helper function to format time ago (simulated)
  function getTimeAgo(date, lang) {
    const seconds = Math.floor((new Date() - date) / 1000);
    let interval = seconds / 31536000;
    const labels = {
      'id': { year: 'tahun', month: 'bulan', day: 'hari', hour: 'jam', minute: 'menit', now: 'baru saja' },
      'en': { year: 'year', month: 'month', day: 'day', hour: 'hour', minute: 'minute', now: 'just now' }
    };
    const plural = (num, label) => num > 1 ? label + 's' : label;
    const l = labels[lang] || labels['en'];

    if (seconds < 60) return l.now;
    interval = seconds / 60; // minutes
    if (interval < 60) return Math.floor(interval) + (lang === 'id' ? ' menit yang lalu' : ` ${plural(Math.floor(interval), l.minute)} ago`);
    interval = seconds / 3600; // hours
    if (interval < 24) return Math.floor(interval) + (lang === 'id' ? ' jam yang lalu' : ` ${plural(Math.floor(interval), l.hour)} ago`);
    interval = seconds / 86400; // days
    if (interval < 30) return Math.floor(interval) + (lang === 'id' ? ' hari yang lalu' : ` ${plural(Math.floor(interval), l.day)} ago`);
    interval = seconds / 2592000; // months
    if (interval < 12) return Math.floor(interval) + (lang === 'id' ? ' bulan yang lalu' : ` ${plural(Math.floor(interval), l.month)} ago`);
    interval = seconds / 31536000; // years
    return Math.floor(interval) + (lang === 'id' ? ' tahun yang lalu' : ` ${plural(Math.floor(interval), l.year)} ago`);
  }

  function renderAnalyticsDashboard() {
    if (!document.getElementById('adminContent') || document.getElementById('adminContent').style.display === 'none') return;
    const lang = langSelect.value;
    console.log(`[ANALYTICS] Rendering for language: ${lang}`);

    // Simulated data (refreshes every time render is called)
    const SIMULATED_DATA = {
      totalDownloads: 12450 + Math.floor(Math.random() * 5),
      activities: [
        { time: new Date(Date.now() - 3600000), type: 'Download initiated:', details: 'VirtualHost (v2.1)' },
        { time: new Date(Date.now() - 500000), type: 'Shop purchase:', details: 'VIP+ ($1.20)' }, // NEW: Shop activity
        { time: new Date(Date.now() - 7200000), type: 'Admin Login success', details: 'Jakarta, ID' },
        { time: new Date(Date.now() - 10800000), type: 'Download initiated:', details: 'Patched (.bat) (v1.9)' },
        { time: new Date(Date.now() - 14400000), type: 'Download initiated:', details: 'iOS config (v1.4)' },
      ]
    };

    // Update Translations of Static Elements
    analyticsTitle.textContent = lang === 'id' ? (translations.id['Analytical Dashboard'] || 'Dasbor Analitik') : 'Analytical Dashboard';
    totalDownloadsContainer.innerHTML = (lang === 'id' ? (translations.id['Total Downloads:'] || 'Total Unduhan:') : 'Total Downloads:') + ` <strong id="totalDownloads">${SIMULATED_DATA.totalDownloads.toLocaleString()}</strong>`;
    recentActivitiesTitle.textContent = lang === 'id' ? (translations.id['Recent Activities:'] || 'Aktivitas Terbaru:') : 'Recent Activities:';

    // Update Totals
    document.getElementById('totalDownloads').textContent = SIMULATED_DATA.totalDownloads.toLocaleString();

    // Update Activities
    recentActivitiesElement.innerHTML = '';
    SIMULATED_DATA.activities.forEach(activity => {
      const li = document.createElement('li');
      const timeAgo = getTimeAgo(activity.time, lang);
      let typeText;

      if (lang === 'id') {
        if (activity.type.startsWith('Download initiated:')) {
          typeText = (translations.id['Download initiated:'] || 'Unduhan dimulai: ') + activity.details;
        } else if (activity.type.startsWith('Shop purchase:')) {
          typeText = 'Pembelian Toko: ' + activity.details;
        } else if (activity.type.startsWith('Admin Login success')) {
          typeText = (translations.id['Admin Login success'] || 'Login Admin berhasil') + `: ${activity.details}`;
        } else {
          typeText = activity.type + activity.details;
        }
      } else {
        typeText = activity.type + activity.details;
      }

      li.textContent = `${typeText} (${timeAgo})`;
      recentActivitiesElement.appendChild(li);
    });

    // Setup auto-refresh if not already running
    if (analyticsIntervalId === null) {
      analyticsIntervalId = setInterval(() => {
        renderAnalyticsDashboard();
      }, 30000); // Refresh every 30 seconds
      console.log("[ANALYTICS] Auto-refresh started");
    }
  }


  /* ===========================
     SEO Meta Tag Control (Simulated persistence)
     =========================== */
  function updateSeoMetaTags(title, description, keywords) {
    document.title = title;

    let metaDesc = document.querySelector('meta[name="description"]');
    if (!metaDesc) {
      metaDesc = document.createElement('meta');
      metaDesc.setAttribute('name', 'description');
      document.head.appendChild(metaDesc);
    }
    metaDesc.setAttribute('content', description);

    let metaKeywords = document.querySelector('meta[name="keywords"]');
    if (!metaKeywords) {
      metaKeywords = document.createElement('meta');
      metaKeywords.setAttribute('name', 'keywords');
      document.head.appendChild(metaKeywords);
    }
    metaKeywords.setAttribute('content', keywords);
  }

  function loadAndApplySeoSettings() {
    // Default values from the original HTML head
    const defaultTitle = 'Growfax Official - Private Growtopia Server & Downloads';
    const defaultDesc = 'Situs resmi Growfax, private server Growtopia. Unduh file host terbaru untuk Android, Windows, dan iOS. Mainkan Growtopia dengan fitur eksklusif dan komunitas aktif!';
    const defaultKeywords = 'Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growtopia, Growfax Android, Growfax Windows';

    // Load from LocalStorage
    const savedTitle = localStorage.getItem('growfax_seo_title') || defaultTitle;
    const savedDesc = localStorage.getItem('growfax_seo_desc') || defaultDesc;
    const savedKeywords = localStorage.getItem('growfax_seo_keywords') || defaultKeywords;

    // Update Input Fields (only if refs exist)
    if (seoTitleInput) {
      seoTitleInput.value = savedTitle;
      seoDescTextarea.value = savedDesc;
      seoKeywordsInput.value = savedKeywords;
    }

    // Apply to <head>
    updateSeoMetaTags(savedTitle, savedDesc, savedKeywords);
  }

  // Initial call to apply SEO on page load (takes effect immediately)
  loadAndApplySeoSettings();


  /* ===========================
     Smooth Translation Logic
     =========================== */

  // Command Texts for translation (now fully detailed for all high-tier roles)
  const commandData = {
    vip_commands: [
      { strong: "/superbreak", span: "Activate the Super Breaker mode!" },
      { strong: "/vsb", span: "Send a VIP-Broadcast to everyone online!" }
    ],
    vip_plus_commands: [
      { strong: "/gemrain", span: "Activate the Gem Rain & Enjoy 20% more gems!" },
      { strong: "/sdb", span: "Send a Super-Duper Broadcast to everyone online!" },
      { strong: "All VIP commands included!", span: null }
    ],
    // MODERATOR (Detailed List)
    moderator_commands: [
        { strong: "/longpunch", span: "Enabled Long Punch it allows you to break and build further" },
        { strong: "/skiptime", span: "Activate the Skip Time ability! It makes your trees and providers grow 12 hours instantly!" },
        { strong: "/mod", span: "Moderate a player, apply punishments & more!" },
        { strong: "/banworld", span: "Nuke a world, ban players, or even ban players from game!" },
        { strong: "/info", span: "View player's information!" },
        { strong: "/track", span: "Find player's alt accounts and get their names!" },
        { strong: "/online", span: "View everyone who is online at this moment!" },
        { strong: "/msb", span: "Moderator Broadcast to everyone online!" },
        { strong: "/ghost", span: "Enter ghost mode, you can walk through walls!" },
        { strong: "/invis", span: "Become invisible to everyone! No one will ever know you exist!" },
        { strong: "/nick", span: "Temporarily change your nickname!" },
        { strong: "/hide", span: "Hide your Moderator's status, you'll look like a normal player!" },
        { strong: "/hideflag", span: "Hide your Country flag!" },
        { strong: "/warpto", span: "Magically teleport to your desired player!" },
        { strong: "/silence", span: "Mute a player for specific time!" },
        { strong: "/unsilence", span: "Remove a mute from a player!" },
        { strong: "All VIP+ commands included!", span: null }
    ],
    // SUPER MODERATOR (Detailed List)
    super_moderator_commands: [
        { strong: "/rpull", span: "Pull a random player in the world" },
        { strong: "/pullall", span: "Pull everyone who is in the world" },
        { strong: "/freeze", span: "Freeze a player, it wont be able to move or do anything!" },
        { strong: "/unfreeze", span: "Unfreeze a player, make it able to move again!" },
        { strong: "ALL Actions", span: "Perform actions like /loveall /omgall to make everyone do it!" },
        { strong: "All Moderator commands included!", span: null }
    ],
    // DEVELOPER (Detailed List)
    developer_commands: [
        { strong: "/find Blocks", span: "Find any blocks and get them for free! (Limited to under 100 rarity non-farmable blocks)" },
        { strong: "/banall", span: "Ban everyone from world!" },
        { strong: "/tpclick", span: "Teleport where you click! (If ghost is enabled you can teleport everywhere, if not then you can teleport only if there's path)" },
        { strong: "All Super Moderator commands included!", span: null }
    ],
    // GOD (Detailed List)
    god_commands: [
        { strong: "/find Clothes", span: "Find any clothes and get them for free! (Limited to rarity clothes)" },
        { strong: "/spk", span: "Make other people say what you want them to say!" },
        { strong: "All Developer commands included!", span: null }
    ]
  };

  // Update command list translations in the Shop section
  function updateCommandTranslations(lang) {
    for (const id in commandData) {
      const ul = document.getElementById(id);
      if (ul) {
        ul.innerHTML = ''; // Clear existing content
        commandData[id].forEach(item => {
          const li = document.createElement('li');
          // Translate the text content of the strong/span elements
          const strongText = lang === 'en' ? item.strong : (translations[lang]?.[item.strong] || item.strong);
          li.innerHTML = `<strong>${strongText}</strong>`;
          if (item.span) {
            const spanText = lang === 'en' ? item.span : (translations[lang]?.[item.span] || item.span);
            li.innerHTML += ` <span>${spanText}</span>`;
          }
          ul.appendChild(li);
        });
      }
    }
  }

  function updateAdminAreaTranslations(lang) {
    if (!adminLoginPrompt) return; // Exit if admin elements not loaded

    adminLoginPrompt.textContent = lang === 'id' ? (translations.id["Enter the Admin Token to proceed:"] || 'Masukkan Token Admin untuk melanjutkan:') : 'Enter the Admin Token to proceed:';
    adminTitle.textContent = lang === 'id' ? (translations.id["üîë Admin Area"] || 'üîë Area Admin') : 'üîë Admin Area';

    updateServerStatusDisplay(); // Update dynamic content

    // Update button/header texts within admin content
    if (adminContent.style.display !== 'none') {
      // Server Status
      document.querySelector('#adminContent h4:nth-child(1)').textContent = lang === 'id' ? (translations.id["Server Status"] || 'Status Server') : 'Server Status';
      // Analytical Dashboard (using ID)
      document.getElementById('analyticsTitle').textContent = lang === 'id' ? (translations.id["Analytical Dashboard"] || 'Dasbor Analitik') : 'Analytical Dashboard';
      // News & Updates
      document.querySelector('#adminContent > div:nth-child(3) h4').textContent = lang === 'id' ? (translations.id["News & Updates"] || 'Berita & Pembaruan') : 'News & Updates';
      // SEO Management (using ID)
      document.getElementById('seoTitle').textContent = lang === 'id' ? (translations.id["SEO Management"] || 'Manajemen SEO') : 'SEO Management';

      toggleServerStatus.textContent = lang === 'id' ? (translations.id["Toggle Status (Simulate)"] || 'Ubah Status (Simulasi)') : 'Toggle Status (Simulate)';
      saveNewsUpdate.textContent = lang === 'id' ? (translations.id["Save News"] || 'Simpan Berita') : 'Save News';
      saveSeoMeta.textContent = lang === 'id' ? (translations.id["Update SEO Meta"] || 'Perbarui Meta SEO') : 'Update SEO Meta';
      closeAdmin.textContent = lang === 'id' ? (translations.id["Close Admin Area"] || 'Tutup Area Admin') : 'Close Admin Area';

      // Refresh analytics data to update language on dynamic strings
      renderAnalyticsDashboard(); 
    }
  }

  function applyTranslations(lang) {
    const transitionDuration = 200; // 200 ms
    const elementsToTranslate = document.querySelectorAll('[data-original], #modalCancel, #modalConfirm, #welcomeSave, #welcomeSkip, #discordLink, #reportBugLink, #adminTokenSubmit, #closeAdmin, #toggleServerStatus, #saveNewsUpdate, #refreshAnalytics, #saveSeoMeta');

    // 1. Fade out (Opacity 0)
    elementsToTranslate.forEach(el => {
      // Only target elements currently visible
      if (el.offsetWidth > 0 || el.offsetHeight > 0 || el === langSelect) {
        el.style.transition = `opacity ${transitionDuration}ms ease`;
        el.style.opacity = '0';
      }
    });

    // 2. Wait for fade-out
    setTimeout(() => {
      // 3. Apply new content (Opacity is 0, so change is invisible)
      elementsToTranslate.forEach(el => {
        const orig = el.dataset.original;
        if (!orig) return;

        el.textContent = lang === 'en' ? orig : (translations[lang]?.[orig] || orig);

        // NEW: Handle Shop Button Translation
        if (el.classList.contains('btn-purchase')) {
          const role = el.getAttribute('data-role');
          const defaultText = `Purchase ${role.charAt(0).toUpperCase() + role.slice(1)}`; // Fallback like "Purchase Vip"
          let translatedText;
          if (role === 'vip') translatedText = translations[lang]?.['Purchase VIP'] || defaultText;
          else if (role === 'vip+') translatedText = translations[lang]?.['Purchase VIP+'] || defaultText;
          else if (role === 'moderator') translatedText = translations[lang]?.['Purchase Moderator'] || defaultText;
          else if (role === 'super_moderator') translatedText = translations[lang]?.['Purchase Super Moderator'] || defaultText;
          else if (role === 'developer') translatedText = translations[lang]?.['Purchase Developer'] || defaultText;
          else if (role === 'god') translatedText = translations[lang]?.['Purchase GOD'] || defaultText;
          el.textContent = translatedText || orig;
        }
      });

      // Fix buttons/labels manually
      modalCancel.textContent = lang === 'id' ? (translations.id['Cancel'] || 'Batal') : 'Cancel';
      modalConfirm.textContent = lang === 'id' ? (translations.id['Download'] || 'Unduh') : 'Download';
      welcomeSave.textContent = lang === 'id' ? (translations.id['Save & Continue'] || 'Simpan & Lanjutkan') : 'Save & Continue';
      welcomeSkip.textContent = lang === 'id' ? (translations.id['Skip'] || 'Lewati') : 'Skip';
      document.getElementById('discordLink').textContent = lang === 'id' ? (translations.id['Join Growfax Discord'] || 'Join Growfax Discord') : 'Join Growfax Discord';

      // Update dynamic elements (time and commands)
      updateTime();
      updateCommandTranslations(lang);
      updateReportBugLink();
      updateAdminAreaTranslations(lang);

      // 4. Fade in
      elementsToTranslate.forEach(el => {
        el.style.opacity = '1';
      });
    }, transitionDuration);
  }

  /* ===========================
     Toast and Event Tracking (Simulated)
     =========================== */
  const toast = document.getElementById('toast');
  function showToast(message, duration = 2000) {
    toast.textContent = message;
    toast.style.opacity = '1';
    toast.style.transform = 'translateX(-50%) translateY(0)';
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translateX(-50%) translateY(10px)';
    }, duration);
  }

  function trackEvent(name, data = {}) {
    console.log(`[ANALYTICS] Event Tracked: ${name}`, data);
  }

  function updateReportBugLink() {
    const reportBugLink = document.getElementById('reportBugLink');
    const lang = langSelect.value;
    let subject, body;
    if (lang === 'id') {
      subject = 'Laporan Bug - Growfax';
      body = 'Mohon jelaskan bug yang Anda temukan:\n\n---\nDevice/Platform (Android/iOS/PC):\nWaktu Kejadian:\nLangkah-langkah mereplikasi bug:\n---\n\n(Silakan lampirkan screenshot atau foto di sini. Terima kasih.)';
    } else { // default to 'en'
      subject = 'Bug Report - Growfax';
      body = 'Please describe the bug you encountered:\n\n---\nDevice/Platform (Android/iOS/PC):\nTime of Occurrence:\nSteps to reproduce the bug:\n---\n\n(Please attach screenshots or photos here. Thank you.)';
    }
    // Encode the subject and body for the URL
    const mailtoURL = `mailto:growfaxz.gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    reportBugLink.setAttribute('href', mailtoURL);
  }


  /* ===========================
     Theme control
     =========================== */
  const themeToggle = document.getElementById('themeToggle');
  function setTheme(theme) {
    document.body.setAttribute('data-theme', theme);
    themeToggle.textContent = theme === 'dark' ? 'üåô Dark' : 'üåû Light';
    themeToggle.setAttribute('aria-pressed', theme === 'dark');
    localStorage.setItem('growfax_theme', theme);
  }
  themeToggle.addEventListener('click', () => {
    setTheme(document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
  });
  setTheme(localStorage.getItem('growfax_theme') || 'light');


  /* ===========================
     Language control (persist)
     =========================== */
  const langSelect = document.getElementById('langSelect');
  langSelect.addEventListener('change', () => {
    const lang = langSelect.value;
    localStorage.setItem('growfax_lang', lang);
    applyTranslations(lang);
    updateTime();
    showToast(lang === 'id' ? 'Bahasa: Indonesia' : 'Language: English');
  });

  (function initLang() {
    const saved = localStorage.getItem('growfax_lang') || (navigator.language && navigator.language.startsWith('id') ? 'id' : 'en');
    langSelect.value = saved;
    applyTranslations(saved);
    updateReportBugLink(); // Initial link setup
  })();


  /* ===========================
     Time display (NY / Jakarta)
     =========================== */
  function getIndoGreeting(hour) {
    if (hour < 11) return "Selamat Pagi";
    if (hour < 15) return "Selamat Siang";
    if (hour < 18) return "Selamat Sore";
    return "Selamat Malam";
  }

  function updateTime() {
    const timeDisplay = document.getElementById('timeDisplay');
    const now = new Date();

    // Timezone: Jakarta (WIB, UTC+7) - Placeholder for simplicity
    const jakartaTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Jakarta" }));
    const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
    const formattedTime = jakartaTime.toLocaleString('en-US', options);
    const currentHour = jakartaTime.getHours();
    const lang = langSelect.value;

    if (lang === 'id') {
      const greeting = getIndoGreeting(currentHour);
      timeDisplay.textContent = `${greeting}, ${jakartaTime.toLocaleString('id-ID', options)} WIB`;
    } else {
      timeDisplay.textContent = `Server Time (WIB): ${formattedTime}`;
    }

    // Update news based on saved local storage content
    const newsContent = localStorage.getItem('growfax_news_update');
    if (newsUpdateTextarea) {
      newsUpdateTextarea.value = newsContent || '';
    }
  }

  // Initial and periodic time update
  setInterval(updateTime, 1000);
  updateTime();


  /* ===========================
     File Download/Info Modal Logic (Copy Text Added)
     =========================== */
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalCancel = document.getElementById('modalCancel');
  const modalConfirm = document.getElementById('modalConfirm');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const modalVersion = document.getElementById('modalVersion');
  const modalUpdated = document.getElementById('modalUpdated');
  const modalChangelog = document.getElementById('modalChangelog');
  const modalFilename = document.getElementById('modalFilename');

  // Open modal/Initiate download/copy
  document.querySelectorAll('.platform-buttons a').forEach(a => {
    a.addEventListener('click', (e) => {
      const key = a.dataset.filekey;
      const meta = FILE_META[key] || { version: 'v1.0', updated: 'Unknown', changelog: 'No details', size: '‚Äî' };
      const filename = a.dataset.filename || key;
      const lang = langSelect.value;

      // --- MODIFIED LOGIC: COPY TEXT (iOS, PowerTunnel, dll.) ---
      if (meta.copytext) {
        e.preventDefault();
        // Teks tersedia, salin ke clipboard
        navigator.clipboard.writeText(meta.copytext).then(() => {
          let toastMessage;
          if (key === 'ios') {
            toastMessage = (lang === 'id') ? '‚úÖ Konfigurasi iOS berhasil disalin!' : '‚úÖ iOS configuration copied!';
          } else {
            toastMessage = (lang === 'id') ? '‚úÖ Teks Host PowerTunnel berhasil disalin!' : '‚úÖ PowerTunnel Host text copied!';
          }
          showToast(toastMessage, 3000);
        }).catch(err => {
          console.error('Copy failed:', err);
          const toastMessage = (lang === 'id') ? '‚ùå Gagal menyalin teks!' : '‚ùå Failed to copy text!';
          showToast(toastMessage, 3000);
        });

        // Track Copy Event (General)
        trackEvent('config_copied', { platform: key });
        return; // Hentikan aksi selanjutnya (tidak perlu modal)
      }
      // --- AKHIR LOGIKA COPY TEXT ---

      // Lanjutkan dengan logika modal/download untuk file lain
      e.preventDefault();
      pendingDownload = a; // Simpan elemen anchor untuk download konfirmasi

      modalTitle.textContent = (lang === 'id') ? (translations.id['Details before download'] || 'Detail sebelum mengunduh') : 'Details before download';
      modalDesc.textContent = (lang === 'id') ? `Info untuk ${filename}` : `Info for ${filename}`;
      modalVersion.textContent = `${(lang === 'id') ? (translations.id['Version'] || 'Versi') + ': ' : 'Version: '}${meta.version}`;
      modalUpdated.textContent = `${(lang === 'id') ? (translations.id['Updated'] || 'Diperbarui') + ': ' : 'Updated: '}${meta.updated}`;
      modalChangelog.innerText = `${(lang === 'id') ? (translations.id['Changelog'] || 'Catatan pembaruan') + ':' : 'Changelog:'}\n${meta.changelog}\n\n${(lang === 'id') ? (translations.id['Size'] || 'Ukuran') + ': ' : 'Size: '}${meta.size}`;
      modalFilename.textContent = `${(lang === 'id') ? (translations.id['Filename'] || 'Nama berkas') + ': ' : 'Filename: '}${filename}`;

      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
    });
  });

  // Close modal logic
  modalCancel.addEventListener('click', () => {
    modalBackdrop.style.display = 'none';
    modalBackdrop.setAttribute('aria-hidden', 'true');
    pendingDownload = null;
  });
  modalBackdrop.addEventListener('click', (e) => {
    if (e.target === modalBackdrop) {
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      pendingDownload = null;
    }
  });

  // Confirm download logic
  modalConfirm.addEventListener('click', () => {
    if (pendingDownload) {
      const key = pendingDownload.dataset.filekey;
      // Simulate download (by triggering click on original anchor tag)
      pendingDownload.click();

      // Track Download Event (General)
      trackEvent('download_initiated', { platform: key, version: FILE_META[key]?.version || 'v?' });
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      const lang = langSelect.value;
      showToast(lang === 'id' ? `Unduhan ${key} dimulai.` : `${key} download started.`, 2000);
      pendingDownload = null;
    }
  });

  // Shop purchase simulation
  document.querySelectorAll('.btn-purchase').forEach(button => {
    button.addEventListener('click', (e) => {
      // e.preventDefault(); // Don't prevent default, allow PayPal link to open

      const lang = langSelect.value;
      const roleName = button.getAttribute('data-role').toUpperCase();
      showToast(lang === 'id' ? `Membuka PayPal untuk pembelian ${roleName}...` : `Opening PayPal for ${roleName} purchase...`, 2000);

      // Track Shop Purchase Event
      trackEvent('shop_purchase_click', { role: roleName, price: button.getAttribute('data-price') });
      // Actual link is handled by the anchor tag's default behavior
    });
  });


  /* ===========================
     Admin Area Logic
     =========================== */
  function updateServerStatusDisplay() {
    const lang = langSelect.value;
    const onlineText = lang === 'id' ? (translations.id['Online'] || 'Online') : 'Online';
    const offlineText = lang === 'id' ? (translations.id['Offline'] || 'Offline') : 'Offline';
    serverStatusDisplay.textContent = isServerOnline ? onlineText : offlineText;
    serverStatusDisplay.style.color = isServerOnline ? 'var(--success)' : 'var(--danger)';
  }

  function showAdminModal() {
    adminBackdrop.style.display = 'flex';
    adminBackdrop.setAttribute('aria-hidden', 'false');

    // Check if already logged in
    if (isAdminLoggedIn) {
      adminLogin.style.display = 'none';
      adminContent.style.display = 'block';
      renderAnalyticsDashboard(); // Load analytics when reopening
      loadAndApplySeoSettings(); // Load SEO settings when reopening
    } else {
      adminLogin.style.display = 'block';
      adminContent.style.display = 'none';
      adminTokenInput.value = '';
      setTimeout(() => adminTokenInput.focus(), 300);
    }

    // Re-apply current language settings to modal text
    updateAdminAreaTranslations(langSelect.value);
  }

  function hideAdminModal() {
    adminBackdrop.style.display = 'none';
    adminBackdrop.setAttribute('aria-hidden', 'true');

    // NEW: Hentikan auto-refresh dashboard saat modal ditutup
    if (analyticsIntervalId !== null) {
      clearInterval(analyticsIntervalId);
      analyticsIntervalId = null;
      console.log("[ANALYTICS] Auto-refresh stopped");
    }
  }

  openAdmin.addEventListener('click', () => {
    showAdminModal();
  });
  closeAdmin.addEventListener('click', hideAdminModal);
  adminBackdrop.addEventListener('click', (e) => {
    if (e.target === adminBackdrop) hideAdminModal();
  });

  // Admin Login Logic (Updated with Auto-Refresh)
  adminTokenSubmit.addEventListener('click', () => {
    const token = adminTokenInput.value.trim();
    const lang = langSelect.value;
    if (token === ADMIN_TOKEN) {
      isAdminLoggedIn = true; // Set login state
      adminLogin.style.display = 'none';
      adminContent.style.display = 'block';
      trackEvent('admin_login', { result: 'success' });
      showToast(lang === 'id' ? '‚úÖ Login Admin Berhasil!' : '‚úÖ Admin Login Successful!', 2000);
      renderAnalyticsDashboard(); // Start analytics/auto-refresh
      loadAndApplySeoSettings(); // Load SEO settings
    } else {
      trackEvent('admin_login', { result: 'failed' });
      showToast(lang === 'id' ? '‚ùå Token Admin salah.' : '‚ùå Invalid Admin Token.', 2000);
    }
  });

  // Toggle Server Status Logic (Simulated)
  toggleServerStatus.addEventListener('click', () => {
    isServerOnline = !isServerOnline;
    updateServerStatusDisplay();
    trackEvent('server_status_toggle', { status: isServerOnline ? 'online' : 'offline' });
    showToast(langSelect.value === 'id' ? 'Status Server diubah.' : 'Server Status changed.', 1500);
  });

  // Save News Logic (Simulated)
  saveNewsUpdate.addEventListener('click', () => {
    const news = newsUpdateTextarea.value;
    // Save to local storage for persistence
    localStorage.setItem('growfax_news_update', news);
    // Track News Update
    trackEvent('news_update_saved', { char_count: news.length });
    showToast(langSelect.value === 'id' ? 'Pembaruan Berita disimpan.' : 'News Update saved.', 1500);
  });

  // Save SEO Meta Logic (Simulated - NEW)
  saveSeoMeta.addEventListener('click', () => {
    const title = seoTitleInput.value.trim();
    const desc = seoDescTextarea.value.trim();
    const keywords = seoKeywordsInput.value.trim();
    const lang = langSelect.value;

    // Save to local storage for persistence
    localStorage.setItem('growfax_seo_title', title);
    localStorage.setItem('growfax_seo_desc', desc);
    localStorage.setItem('growfax_seo_keywords', keywords);

    // Apply immediately to the page's <head>
    updateSeoMetaTags(title, desc, keywords);

    // Track SEO Update
    trackEvent('seo_meta_updated', { title_length: title.length, desc_length: desc.length });
    showToast(lang === 'id' ? '‚úÖ Pengaturan SEO diperbarui dan diterapkan.' : '‚úÖ SEO Settings updated and applied.', 2000);
  });


  /* ===========================
     Welcome popup
     =========================== */
  const welcomeBackdrop = document.getElementById('welcomeBackdrop');
  const openWelcome = document.getElementById('openWelcome');
  const welcomeLang = document.getElementById('welcomeLang');
  const welcomeSave = document.getElementById('welcomeSave');
  const welcomeSkip = document.getElementById('welcomeSkip');

  function showWelcome() {
    welcomeBackdrop.style.display = 'flex';
    welcomeBackdrop.setAttribute('aria-hidden', 'false');
    // Set initial values in popup
    welcomeLang.value = localStorage.getItem('growfax_lang') || 'en';
    const currentTheme = localStorage.getItem('growfax_theme') || 'light';
    document.querySelector(`input[name="welcomeTheme"][value="${currentTheme}"]`).checked = true;
  }

  function hideWelcome() {
    welcomeBackdrop.style.display = 'none';
    welcomeBackdrop.setAttribute('aria-hidden', 'true');
  }

  openWelcome.addEventListener('click', showWelcome);
  welcomeBackdrop.addEventListener('click', (e) => {
    if (e.target === welcomeBackdrop) hideWelcome();
  });
  welcomeSkip.addEventListener('click', hideWelcome);

  welcomeSave.addEventListener('click', () => {
    const lang = welcomeLang.value;
    const theme = document.querySelector('input[name="welcomeTheme"]:checked').value;

    localStorage.setItem('growfax_lang', lang);
    localStorage.setItem('growfax_theme', theme);

    // Apply changes immediately
    langSelect.value = lang;
    setTheme(theme);
    applyTranslations(lang);
    updateTime();

    hideWelcome();
    showToast(lang === 'id' ? 'Pengaturan disimpan.' : 'Settings saved.', 1500);
  });

  // Show welcome popup only on first visit
  if (!localStorage.getItem('growfax_visited')) {
    // showWelcome();
    localStorage.setItem('growfax_visited', 'true');
  }

  /* ===========================
     Report Bug Link (mailto)
     =========================== */
  document.getElementById('reportBugLink').addEventListener('click', () => {
    const lang = langSelect.value;
    showToast(lang === 'id' ? 'Membuka aplikasi email...' : 'Opening email application...');
  });


  /* ===========================
     Initial translations + time
     =========================== */
  const initLang = localStorage.getItem('growfax_lang') || (navigator.language && navigator.language.startsWith('id') ? 'id' : 'en');
  langSelect.value = initLang;
  applyTranslations(initLang);
  updateTime();

  /* ===========================
     Allow middle click / aux click default behavior on links
     =========================== */
  document.querySelectorAll('a').forEach(a => {
    a.addEventListener('auxclick', (e) => { /* allow default behavior */ });
  });

  /* ===========================
     Misc small UI effects
     =========================== */

  // status indicator pulse if present
  const status = document.querySelector('#status-indicator');
  if (status) {
    setInterval(() => {
      status.style.opacity = status.style.opacity === '1' ? '0.5' : '1';
    }, 600);
  }

  // graceful page link transition for all html links
  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', e => {
      // only internal html
      try {
        const href = link.getAttribute('href');
        if (href && href.endsWith('.html') && !link.hasAttribute('data-no-transition')) {
          e.preventDefault();
          document.body.style.opacity = '0';
          setTimeout(() => (window.location.href = href), 300);
        }
      } catch (err) { /* ignore */ }
    });
  });

  /* ===========================
     Console debug friendly message
     =========================== */
  console.log('%cGrowfax Engine Ready ‚úÖ', 'color: #00ff88; font-weight: bold;');

  /* END OF SCRIPT */
</script>
</body>
</html>
