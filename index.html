<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Growfax Official - Private Growtopia Server & Downloads</title>
<link rel="icon" href="Growfax_banner.jpg" type="image/jpeg">

<meta name="description" content="Situs resmi Growfax, private server Growtopia. Unduh file host terbaru untuk Android, Windows, dan iOS. Mainkan Growtopia dengan fitur eksklusif dan komunitas aktif!" />
<meta name="keywords" content="Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growfax, Growfax Android, Growfax Windows" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://growfax.web.id/home" />

<meta property="og:type" content="website" />
<meta property="og:url" content="https://growfax.web.id/home" />
<meta property="og:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta property="og:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami." />
<meta property="og:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content="https://growfax.web.id/home" />
<meta name="twitter:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta name="twitter:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami." />
<meta name="twitter:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> 

<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('config', 'G-XXXXXXXXXX'); // Placeholder ID for Growfax Analytics
</script>
<style>
  /* ============================================================
     Growfax Official ‚Äî FULL UI stylesheet (futuristic neon/fax)
     - Mobile-First Optimization Applied (Fixed Horizontal Scrolling)
     ============================================================ */

  /* Global Reset: Ensure padding/border don't cause overflow */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* NEW: Keyframes for Logo Animation */
  @keyframes pulse {
    0% { transform: scale(1); box-shadow: var(--logo-shadow); }
    50% { transform: scale(1.02); box-shadow: var(--logo-shadow-hover); }
    100% { transform: scale(1); box-shadow: var(--logo-shadow); }
  }

  :root{
    --bg:#f8f8f8;
    --card-bg:#fff;
    --text:#1a1a1a;
    --accent:#0078d7;
    --card-shadow:0 8px 20px rgba(0,0,0,0.08);
    --discord-color:#7289da;
    --muted:#667;
    --toast-bg:rgba(0,0,0,0.8);
    --glass: rgba(255,255,255,0.6);
    --success:#2ecc71;
    --danger:#e74c3c;
    --mono: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    --border-color: rgba(0,0,0,0.08);
    --shop-bg: #8e44ad; /* New color for shop: Purple */
    --shop-glow: rgba(142, 68, 173, 0.4);

    /* UPDATED: Custom properties for YELLOW glow effect in light mode */
    --glow-color-light: rgba(255, 193, 7, 0.6); /* soft yellow glow */
    --text-shadow-light: 0 0 10px var(--glow-color-light), 0 2px 4px rgba(0,0,0,0.2);
    --logo-shadow: 0 4px 12px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
    --logo-shadow-hover: 0 8px 20px rgba(255, 193, 7, 0.4);
  }
  [data-theme="dark"]{
    --bg:#0f1720;
    --card-bg:#0b1220;
    --text:#e6eef8;
    --accent:#4da3ff;
    --card-shadow:0 8px 28px rgba(0,0,0,0.6);
    --discord-color:#5b6ea6;
    --muted:#9aa;
    --toast-bg:rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.03);
    --border-color: rgba(255,255,255,0.06);
    --shop-bg: #9b59b6; /* Lighter purple for dark mode */
    --shop-glow: rgba(155, 89, 182, 0.6);

    /* UPDATED: Custom properties for YELLOW glow effect in dark mode */
    --glow-color-dark: rgba(255, 170, 0, 0.8); /* brighter gold glow */
    --text-shadow-dark: 0 0 12px var(--glow-color-dark), 0 2px 8px rgba(0,0,0,0.6);
    --logo-shadow: 0 6px 18px rgba(0,0,0,0.4), 0 3px 9px rgba(0,0,0,0.25);
    --logo-shadow-hover: 0 10px 25px rgba(255, 170, 0, 0.5);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:var(--mono);
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    transition:background .25s,color .25s;
    overflow-x: hidden;
  }
  
  /* -------------------------
     Header / Navigation (Optimasi Mobile)
     ------------------------- */
  header{background:var(--card-bg);box-shadow:var(--card-shadow);position:sticky;top:0;z-index:1200}
  .header-content{
    max-width:1100px;
    margin:0 auto;
    padding:10px 10px; /* ADJUSTED: Reduced padding for mobile */
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    flex-wrap: wrap; 
  }
  .header-left{
    display:flex;
    align-items:center;
    gap:8px; 
    flex: 1 1 50%;
  }
  .brand-wrap{display:flex;align-items:center;gap:8px}
  
  /* Glow, lift, and Pulse Animation for logo image */
  .brand-wrap img{
    width:36px;
    height:36px;
    border-radius:6px;
    object-fit:cover;
    transition: box-shadow .25s, transform .25s, opacity 0.2s ease;
    box-shadow: var(--logo-shadow);
    /* Apply animation */
    animation: pulse 3s infinite ease-in-out;
  }

  h1{
    font-size:1.2rem;
    margin:0;
    font-weight:700;
    /* Added opacity transition for smoother language change */
    transition: text-shadow .25s, opacity 0.2s ease;
    color: var(--text);
    text-shadow: var(--text-shadow-light); 
  }
  [data-theme="dark"] h1 {
    text-shadow: var(--text-shadow-dark); 
  }

  .brand-wrap > div > div { 
    font-size: 0.75rem; 
    /* Added opacity transition for smoother language change */
    transition: opacity 0.2s ease;
  }

  nav.primary{
    color:var(--accent);
    text-decoration:none;
    font-weight:700;
    margin-left:auto; 
    font-size: 0.9rem;
    flex: 1 1 100%; 
    margin-top: 6px; /* ADJUSTED: Reduced margin for tighter fit */
    text-align: left;
  }
  nav.primary a{
      color:var(--accent);
      text-decoration:none;
      font-weight:700;
      margin-left:0;
      margin-right: 12px;
      /* Added opacity transition for smoother language change */
      transition: opacity 0.2s ease, transform .18s;
  }
  nav.primary a:hover{opacity:.86;transform:translateY(-1px)}
  
  .controls{
    display:flex;
    align-items:center;
    gap:6px;
    flex: 0 1 auto;
    /* FIX FOR MOBILE WRAPPING: Allow buttons to wrap within the controls box */
    flex-wrap: wrap; 
    justify-content: flex-end; /* Keep the buttons aligned to the right */
  }
  /* Gaya untuk semua tombol kontrol di header */
  .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
    font-size:0.9rem;
    padding:6px 8px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:transparent;
    color:var(--text);
    cursor:pointer;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
    /* Added opacity transition for smoother language change */
    transition: background-color .15s, opacity 0.2s ease;
  }
  .report-bug-btn:hover, .theme-toggle:hover, .open-welcome:hover, #openAdmin:hover {
    background: rgba(0,0,0,0.05);
  }
  [data-theme="dark"] .report-bug-btn:hover, [data-theme="dark"] .theme-toggle:hover, [data-theme="dark"] .open-welcome:hover, [data-theme="dark"] .#openAdmin:hover {
    background: rgba(255,255,255,0.05);
  }

  /* -------------------------
     Banner / Hero
     ------------------------- */
  .banner-section{text-align:center;padding:40px 10px;background:linear-gradient(90deg, rgba(0,0,0,0.03), rgba(255,255,255,0.02))}
  .banner-section img{max-width:200px;border-radius:8px;margin-bottom:14px}
  .banner-section h2{
    font-size:1.6rem;
    color:#ffaa00;
    margin:8px 0;
    text-shadow:0 0 10px rgba(255,170,0,0.18);
    transition: opacity 0.2s ease;
  }
  .banner-section p{
    font-size:0.95rem;
    opacity:.92;
    margin:0;
    transition: opacity 0.2s ease;
  }
  .time-display{
    margin-top:8px;
    font-size:0.85rem;
    font-weight:600;
    opacity:.9;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Container (main content)
     ------------------------- */
  .container{max-width:1000px;margin:32px auto;text-align:center;padding:0 10px}
  .container h2{
    font-size:1.4rem;
    margin-bottom:24px;
    transition: opacity 0.2s ease;
  }
  
  /* Platform Buttons: Full width for mobile */
  .platform-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:14px}
  .platform-buttons a{
    display:flex;align-items:center;justify-content:center;gap:12px;
    width:92%; 
    padding:14px 18px;border-radius:12px;color:#fff;font-weight:700;
    text-decoration:none;border:1px solid transparent;font-size:1.02rem;
    transition:transform .18s ease,box-shadow .18s, opacity 0.2s ease;
  }
  .platform-buttons a img{width:30px;height:30px;border-radius:6px}
  .platform-buttons a:hover{transform:translateY(-2px)}

  .btn-android{background:#34c759;--glow:#4cff77;box-shadow:0 4px 16px rgba(76,255,119,0.08)}
  .btn-windows{background:#0078d7;--glow:#4da3ff;box-shadow:0 4px 16px rgba(77,163,255,0.08)}
  .btn-ios{background:#007aff;--glow:#7acbff;box-shadow:0 4px 16px rgba(122,203,255,0.08)}
  .btn-powertunnel{background:#b71c1c;--glow:#ff5a5a;box-shadow:0 4px 16px rgba(255,90,90,0.08)}

  /* NEW: Shop Roles Grid */
  .shop-roles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 24px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
  }
  .shop-role-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      border-top: 4px solid var(--shop-bg);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      height: auto; /* Allow card height to adjust to content */
  }
  .shop-role-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px var(--shop-glow);
  }
  .shop-role-card h3 {
      margin-top: 0;
      font-size: 1.25rem;
      color: var(--shop-bg);
      text-shadow: 0 0 5px rgba(142, 68, 173, 0.1);
  }
  .shop-role-card .price {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text);
      margin: 8px 0 15px;
  }
  .shop-role-card .price small {
      font-size: 0.8rem;
      font-weight: 400;
      opacity: 0.7;
  }
  /* NEW: Style for the multiple currency display */
  .shop-role-card .currency-display {
      display: block; 
      font-size: 0.8rem; /* Smaller font for secondary currencies */
      font-weight: 500; 
      opacity: 0.8; 
      margin-top: 6px;
      line-height: 1.4;
      white-space: pre-wrap;
  }
  /* UPDATED: UL style for commands (Added Scroll functionality) */
  .shop-role-card ul {
      list-style-type: none;
      padding: 0;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--muted);
      white-space: pre-wrap;
      
      /* NEW SCROLL STYLES */
      max-height: 200px; /* Max height before scroll */
      overflow-y: auto;
      border: 1px solid var(--border-color); /* Border for visual clarity of scroll area */
      padding: 8px;
      border-radius: 6px;
  }

  /* Style adjustment for the list items inside the scrollable area */
  .shop-role-card ul li {
      margin-bottom: 8px;
      border-left: 3px solid var(--shop-bg);
      padding-left: 8px;
      line-height: 1.3;
      padding-right: 4px; /* Ensure content doesn't touch scrollbar */
  }
  .shop-role-card ul li:before {
      content: none; /* Remove default bullet */
  }
  .shop-role-card ul li strong {
      color: var(--accent);
      font-weight: 600;
      display: block;
      margin-bottom: 2px;
  }
  .shop-role-card ul li span {
      display: block;
      font-size: 0.85rem;
      opacity: 0.8;
  }
  .btn-purchase {
      background: var(--shop-bg);
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: 700;
      text-align: center;
      transition: background 0.15s, transform 0.15s;
  }
  .btn-purchase:hover {
      background: #732a9a;
      transform: translateY(-1px);
  }
  /* ADDED: Style for dual purchase buttons */
  .shop-role-card .purchase-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      width: 100%;
      flex-wrap: wrap; /* NEW: Allow wrapping for many buttons */
  }
  /* Ensure the button links themselves manage the flex sizing */
  .shop-role-card .purchase-buttons .btn-purchase {
      display: flex; 
      flex: 1 1 calc(50% - 5px); /* Set to max 2 buttons per row on mobile */
      align-items: center;
      justify-content: center;
      min-width: 120px; /* Ensure a minimum size */
  }
  /* New style for IDR button */
  .btn-idr {
      background: #27ae60; /* Green color for IDR/Rupiah */
  }
  .btn-idr:hover {
      background: #1e8449;
  }
  /* NEW: EUR Button */
  .btn-eur {
      background: #004494; /* Dark Blue for EUR */
  }
  .btn-eur:hover {
      background: #003370;
  }
  /* NEW: GBP Button */
  .btn-gbp {
      background: #c0392b; /* Reddish Brown for GBP */
  }
  .btn-gbp:hover {
      background: #a93226;
  }
  /* NEW: AUD Button */
  .btn-aud {
      background: #f1c40f; /* Yellow/Gold for AUD */
      color: #333; /* Dark text for contrast */
  }
  .btn-aud:hover {
      background: #d4ac0d;
  }
  /* NEW: SGD Button */
  .btn-sgd {
      background: #3498db; /* Light Blue for SGD */
  }
  .btn-sgd:hover {
      background: #2980b9;
  }
  /* NEW: CAD Button */
  .btn-cad {
      background: #e74c3c; /* Red for CAD */
  }
  .btn-cad:hover {
      background: #c0392b;
  }


  /* -------------------------
     Discord Section
     ------------------------- */
  .discord-section{background:var(--discord-color);color:#fff;padding:24px;border-radius:10px;max-width:820px;margin:32px auto 50px;text-align:center;box-shadow:var(--card-shadow)}
  .discord-section img{width:48px;height:48px;border-radius:8px;margin-bottom:8px}
  .discord-section h3, .discord-section p, .discord-section a {
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Footer
     ------------------------- */
  footer{
    text-align:center;
    margin:30px 0 40px;
    font-size:.85rem;
    opacity:.85;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Modal & Welcome/Admin Popup
     ------------------------- */
  .modal-backdrop, .welcome-backdrop, .admin-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1300}
  .modal, .welcome{width:92%;max-width:560px;background:var(--card-bg);color:var(--text);border-radius:12px;padding:16px;box-shadow:0 14px 40px rgba(0,0,0,0.2);transform:translateY(0);transition:transform .18s,opacity .18s}
  
  /* Added opacity transition to modal/welcome text elements */
  .modal h3, .modal p, .modal .changelog, .welcome h2, .welcome p, .welcome label, .welcome button, .modal h2, .modal h4 {
      transition: opacity 0.2s ease;
  }
  
  /* NEW: Admin Modal specific styles (input and buttons) */
  #adminTokenInput, #newsUpdateTextarea, #seoTitleInput, #seoDescTextarea, #seoKeywordsInput {
    /* Ensure they match the theme */
    border: 1px solid var(--border-color) !important;
    background: var(--card-bg) !important;
    color: var(--text) !important;
  }

  /* -------------------------
     Floating Discord button
     ------------------------- */
  .floating-chat{position:fixed;right:12px;bottom:12px;width:48px;height:48px;border-radius:50%;background:var(--discord-color);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.2);cursor:pointer;z-index:1500}
  .floating-chat img{width:24px;height:24px;border-radius:4px}

  /* -------------------------
     Toast message
     ------------------------- */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:70px;background:var(--toast-bg);color:#fff;padding:8px 12px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .18s,transform .18s;z-index:1600}
  
  /* ===========================
     PC/Desktop Optimizations (Min-width 600px)
     =========================== */
  @media (min-width: 600px) {
    /* Header/Nav kembali ke ukuran besar */
    .header-content {
        flex-wrap: nowrap;
        align-items: center;
        padding: 14px 20px;
    }
    /* Logo size PC */
    .brand-wrap img{width:46px;height:46px;border-radius:8px}
    /* H1 size PC */
    h1{font-size:1.4rem;}
    .brand-wrap > div > div { font-size: 0.85rem; }
    nav.primary {
        flex: 0 1 auto; 
        margin-top: 0;
        margin-left: 12px; 
        text-align: left;
    }
    nav.primary a{
        margin-left:12px;
        margin-right: 0;
        font-size: 1rem;
    }
    .controls{gap:10px; flex-wrap: nowrap;} /* Reset wrap on PC */
    /* Ukuran PC untuk semua tombol kontrol */
    .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin {
        font-size:0.98rem;
        padding:8px 12px;
        border-radius: 10px;
    }

    /* Tombol Unduhan kembali ke layout 300px */
    .platform-buttons{gap:20px}
    .platform-buttons a{
      width:300px; 
    }
    .platform-buttons a:hover{transform:translateY(-4px)}
    
    /* Shop Roles Grid PC */
    .shop-roles {
        grid-template-columns: repeat(3, minmax(200px, 1fr)); /* 3 columns on desktop */
    }
    /* On desktop, buttons can take up less space */
    .shop-role-card .purchase-buttons .btn-purchase {
        flex: 1 1 calc(33.33% - 7px); /* Allow up to 3 buttons per row on PC */
        min-width: 90px;
    }

    /* Banner/Content padding besar */
    .banner-section{padding:56px 20px;}
    .banner-section img{max-width:240px;border-radius:10px;}
    .banner-section h2{font-size:1.9rem;}
    .container{margin:48px auto;padding:0 18px}
    .container h2{font-size:1.6rem;margin-bottom:28px}
    .discord-section{padding:32px;margin:42px auto 60px;}

    /* Floating button kembali ke posisi normal */
    .floating-chat{right:18px;bottom:18px;width:56px;height:56px;}
    .floating-chat img{width:28px;height:28px;}
    .toast{bottom:86px;}
  }
</style>
</head>
<body data-theme="light">
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="brand-wrap">
          <img src="Growfax_banner.jpg" alt="Growfax Logo">
          <div>
            <h1>Growfax Official</h1>
            <div style="font-size:0.85rem;color:var(--muted)">Private Growtopia Server</div>
          </div>
        </div>

        <nav class="primary" aria-label="Main navigation">
          <a href="#downloads" id="navDownloads">üì• Downloads</a> 
          <a href="#shop" id="navShop">üõí Shop</a>
        </nav>
      </div>

      <div class="controls">
        <a href="#" 
           id="reportBugLink" 
           class="report-bug-btn" 
           title="Report a Bug">üêû Report Bug</a>
        
        <button id="openAdmin" class="open-welcome" title="Admin Area">üîë Admin</button> <button id="openWelcome" class="open-welcome" title="Welcome & Preferences">‚öôÔ∏è</button>
        
        <select id="langSelect" class="lang-select" title="Language" aria-label="Select language">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">üåû Light</button>
      </div>
    </div>
  </header>

  <section class="banner-section" role="region" aria-label="Main banner">
    <img src="Growfax_banner.jpg" alt="Growfax Banner">
    <h2>Welcome to Growfax</h2>
    <p>Private Growtopia Server</p>
    <div id="timeDisplay" class="time-display">Loading time...</div>
  </section>

  <main class="container" role="main">
    <section id="downloads">
        <h2>üì• Essential File Downloads</h2>
        <div class="platform-buttons" role="list">
          <a href="Growfax_VirtualHost.txt" class="btn-android" data-filename="Growfax_VirtualHost.txt" data-filekey="virtualhost" download role="listitem">
            <img src="virtual-host.png" alt="">Play on Android
          </a>

          <a href="Growfax_Patched_.bat" class="btn-windows" data-filename="Growfax_Patched_.bat" data-filekey="patched" download role="listitem">
            <img src="windows.png" alt="">Play on Windows
          </a>

          <a href="#" class="btn-ios" data-filename="GrowFax_ios_config.txt" data-filekey="ios" role="listitem">
            <img src="surge5.png" alt="">Play on iOS
          </a>

          <a href="#" class="btn-powertunnel" data-filename="PowerTunnel_Host.txt" data-filekey="powertunnel" role="listitem">
            <img src="powertunnel.jpeg" alt="">Play via PowerTunnel
          </a>
        </div>
    </section>

    <section id="shop" style="margin-top: 60px; padding-top: 10px;">
        <h2>üõí Growfax Server Roles</h2>
        <p style="opacity: 0.8;">Support the server and unlock exclusive roles! Direct purchase via PayPal.me.</p>

        <div class="shop-roles">
            <div class="shop-role-card">
                <div>
                    <h3>üëë Admin Server Role</h3>
                    <p class="price" data-usd="45" 
                        data-idr="675000" data-eur="7.91" data-gbp="36.00" 
                        data-aud="12.90" data-sgd="60.75" data-cad="11.61">
                        $45.00 <small>USD</small>
                        <span class="currency-display">
                            ~ ¬£36.00 <small>GBP</small> | ~ Rp 675.000 <small>IDR</small> | ~ S$60.75 <small>SGD</small><br>
                            ~ ‚Ç¨7.91 <small>EUR</small> | ~ A$12.90 <small>AUD</small> | ~ C$11.61 <small>CAD</small>
                        </span>
                    </p>
                    <ul id="admin_commands"></ul>
                </div>
                <div class="purchase-buttons">
                    <a href="https://paypal.me/BilzXd1/45USD" target="_blank" rel="noopener" class="btn-purchase btn-usd" data-role="admin" data-price="45">Pay $USD</a>
                    <a href="https://paypal.me/BilzXd1/7.91EUR" target="_blank" rel="noopener" class="btn-purchase btn-eur" data-role="admin" data-price-eur="7.91">Pay ‚Ç¨EUR</a>
                    <a href="https://paypal.me/BilzXd1/36.00GBP" target="_blank" rel="noopener" class="btn-purchase btn-gbp" data-role="admin" data-price-gbp="36.00">Pay ¬£GBP</a>
                    <a href="https://paypal.me/BilzXd1/12.90AUD" target="_blank" rel="noopener" class="btn-purchase btn-aud" data-role="admin" data-price-aud="12.90">Pay A$AUD</a>
                    <a href="https://paypal.me/BilzXd1/60.75SGD" target="_blank" rel="noopener" class="btn-purchase btn-sgd" data-role="admin" data-price-sgd="60.75">Pay S$SGD</a>
                    <a href="https://paypal.me/BilzXd1/11.61CAD" target="_blank" rel="noopener" class="btn-purchase btn-cad" data-role="admin" data-price-cad="11.61">Pay C$CAD</a>
                    <a href="https://paypal.me/BilzXd1/675000IDR" target="_blank" rel="noopener" class="btn-purchase btn-idr" data-role="admin" data-idr-price="675000">Bayar Rp IDR</a>
                </div>
            </div>
        </div>
        </section>
  </main>

  <section class="discord-section" aria-label="Discord community">
    <img src="discord.jpeg" alt="Discord Logo">
    <h3>Join Our Community</h3>
    <p>Connect with others and get support in our official Discord server.</p>
    <a id="discordLink" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener">Join Growfax Discord</a>
  </section>

  <footer>¬© 2025 Growfax. All rights reserved.</footer>

  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">File info</h3>
      <p id="modalDesc">Details before download</p>

      <div class="meta">
        <div class="chip" id="modalVersion">v0.0</div>
        <div class="chip" id="modalUpdated">Updated: ‚Äî</div>
      </div>

      <div class="changelog" id="modalChangelog">Changelog: ‚Äî</div>

      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div style="font-size:.9rem;color:var(--muted)" id="modalFilename">Filename</div>
        <div class="buttons">
          <button class="btn secondary" id="modalCancel">Cancel</button>
          <button class="btn primary" id="modalConfirm">Download</button>
        </div>
      </div>
    </div>
  </div>

  <div id="welcomeBackdrop" class="welcome-backdrop" aria-hidden="true">
    <div class="welcome" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
      <h2 id="welcomeTitle">Welcome to Growfax</h2>
      <p style="margin:6px 0 12px;opacity:.9">Set your preferred language and theme. We'll remember this for next time.</p>
      <div class="row">
        <label for="welcomeLang">Language</label>
        <select id="welcomeLang" class="lang-select">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
      </div>
      <div class="row">
        <label>Theme</label>
        <div style="display:flex;gap:10px;align-items:center">
          <label><input type="radio" name="welcomeTheme" value="light" checked> Light</label>
          <label><input type="radio" name="welcomeTheme" value="dark"> Dark</label>
        </div>
      </div>

      <div class="actions" style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px">
        <button class="btn secondary" id="welcomeSkip">Skip</button>
        <button class="btn primary" id="welcomeSave">Save & Continue</button>
      </div>
    </div>
  </div>

  <div id="adminBackdrop" class="modal-backdrop admin-backdrop" aria-hidden="true">
    <div class="modal admin-modal" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
        <h2 id="adminTitle">üîë Admin Area</h2>
        
        <div id="adminLogin" style="text-align: center; padding: 20px;">
            <p id="adminLoginPrompt">Enter the Admin Token to proceed:</p>
            <input type="password" id="adminTokenInput" placeholder="Token" style="padding: 10px; width: 80%; max-width: 300px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);">
            <button class="btn primary" id="adminTokenSubmit" style="margin-top: 10px; width: 80%; max-width: 300px;">Submit</button>
        </div>

        <div id="adminContent" style="display: none; padding-top: 10px;">
            <div style="margin-top: 15px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">Server Status</h4>
                <p>Status: <strong id="serverStatusDisplay" style="color: var(--success);">Online</strong></p>
                <button class="btn danger" id="toggleServerStatus">Toggle Status (Simulate)</button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);" id="analyticsTitle">Analytical Dashboard</h4>
                <div id="analyticsContent" style="text-align: left; font-size: 0.9rem;">
                    <p id="totalDownloadsContainer">Total Downloads: <strong id="totalDownloads">‚Äî</strong></p>
                    <p id="recentActivitiesTitle">Recent Activities:</p>
                    <ul id="recentActivities" style="margin: 5px 0 0 20px; padding: 0; list-style-type: square; font-size: 0.85rem;">
                        <li>Simulating data...</li>
                    </ul>
                    <button class="btn secondary" id="refreshAnalytics" style="margin-top: 10px; padding: 5px 10px;">Refresh Data</button>
                </div>
            </div>
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">News & Updates</h4>
                <textarea id="newsUpdateTextarea" style="width: 100%; height: 100px; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text); resize: vertical;" placeholder="Enter news/update text..."></textarea>
                <button class="btn primary" id="saveNewsUpdate" style="margin-top: 10px;">Save News</button>
            </div>

            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">SEO Management</h4>
                
                <label for="seoTitleInput" style="display: block; margin-top: 10px; font-size: 0.9rem;">Page Title (Hanya Title Tag HTML)</label>
                <input type="text" id="seoTitleInput" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);" placeholder="Enter Page Title...">

                <label for="seoDescTextarea" style="display: block; margin-top: 10px; font-size: 0.9rem;">Meta Description</label>
                <textarea id="seoDescTextarea" style="width: 100%; height: 80px; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text); resize: vertical;" placeholder="Enter Meta Description..."></textarea>
                
                <label for="seoKeywordsInput" style="display: block; margin-top: 10px; font-size: 0.9rem;">Meta Keywords (Comma-separated)</label>
                <input type="text" id="seoKeywordsInput" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);" placeholder="Keyword1, Keyword2, ...">

                <button class="btn primary" id="saveSeoMeta" style="margin-top: 10px;">Update SEO Meta</button>
            </div>
            <div style="margin-top: 20px; text-align: right; border-top: 1px solid var(--border-color); padding-top: 10px;">
                <button class="btn secondary" id="closeAdmin">Close Admin Area</button>
            </div>
        </div>
    </div>
  </div>

  <a id="floatingChat" class="floating-chat" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener" title="Open Discord">
    <img src="discord.jpeg" alt="Discord">
  </a>

  <div id="toast" class="toast" role="alert" aria-live="assertive"></div>

<script>
  /* ===========================
     Custom API Simulation & Data (Simulasi API Kustom)
     =========================== */

  // Data File Unduhan (Simulasi Endpoint API: /file-metadata)
  const FILE_META = {
    virtualhost: {
      version: "v3.1",
      updated: "2025-10-28",
      changelog: "Optimized connection speeds.\nFixed rare crash issue.",
      size: "2.1 KB",
      copytext: "203.0.113.5", // Isi yang disalin
      isDownload: true
    },
    patched: {
      version: "v3.1",
      updated: "2025-10-28",
      changelog: "Added new items and events.\nImproved client stability.",
      size: "5.5 MB",
      copytext: "Run the .bat file to patch your host file.",
      isDownload: true
    },
    ios: {
      version: "v1.5",
      updated: "2025-09-15",
      changelog: "New configuration for Surge 5/Quantumult X.\nMore stable connection.",
      size: "0.5 KB",
      copytext: "HOST=203.0.113.5\nDOMAIN=growtopia.com",
      isDownload: false
    },
    powertunnel: {
      version: "v2.0",
      updated: "2025-09-01",
      changelog: "Updated host list.\nBetter performance.",
      size: "1.2 KB",
      copytext: "growtopia.com 203.0.113.5",
      isDownload: true
    },
  };

  // Data Admin/Analitik (Simulasi Endpoint API: /admin/analytics)
  const ADMIN_TOKEN = '1234'; // Token Admin Kustom Anda
  let isAdminLoggedIn = false;
  let analyticsIntervalId = null;
  const SIMULATED_DATA = {
    totalDownloads: 12530,
    activities: [],
    news: "Server Maintenance scheduled for Friday at 03:00 WIB. Expected downtime: 2 hours.",
  };

  // Logika untuk mengisi data simulasi awal
  function simulateNewActivity() {
    SIMULATED_DATA.totalDownloads += Math.floor(Math.random() * 5) + 1; // 1-5 downloads
    const types = [
      { type: "Download initiated:", details: "Android" },
      { type: "Download initiated:", details: "Windows" },
      { type: "Shop purchase:", details: "Admin Role ($45)" },
      { type: "Admin Login success", details: "192.168.1.1" },
    ];
    const type = types[Math.floor(Math.random() * types.length)];
    const time = new Date(Date.now() - Math.floor(Math.random() * 86400000)); // last 24h
    SIMULATED_DATA.activities.unshift({ type: type.type, details: type.details, time: time });
    
    // Keep list short
    if (SIMULATED_DATA.activities.length > 10) {
      SIMULATED_DATA.activities.pop();
    }
  }

  // Initial simulation update
  for (let i = 0; i < 50; i++) {
    simulateNewActivity(); // Simulate 50 initial activities
  }
  
  // Logika untuk me-render Dashboard Analitik
  function renderAnalyticsDashboard() {
    if (!isAdminLoggedIn) return;
    simulateNewActivity(); // Always simulate new data on refresh
    const lang = langSelect.value;
    
    // Update labels of Static Elements (translations)
    analyticsTitle.textContent = lang === 'id' ? (translations.id['Analytical Dashboard'] || 'Dasbor Analitik') : 'Analytical Dashboard';
    totalDownloadsContainer.innerHTML = (lang === 'id' ? (translations.id['Total Downloads:'] || 'Total Unduhan:') : 'Total Downloads:') + ` <strong id="totalDownloads">${SIMULATED_DATA.totalDownloads.toLocaleString()}</strong>`;
    recentActivitiesTitle.textContent = lang === 'id' ? (translations.id['Recent Activities:'] || 'Aktivitas Terbaru:') : 'Recent Activities:';

    // Update Totals
    document.getElementById('totalDownloads').textContent = SIMULATED_DATA.totalDownloads.toLocaleString();

    // Update Activities
    recentActivitiesElement.innerHTML = '';
    SIMULATED_DATA.activities.forEach(activity => {
      const li = document.createElement('li');
      const timeAgo = getTimeAgo(activity.time, lang);
      let typeText;
      // Translation logic for dynamic activity text
      if (lang === 'id') {
        if (activity.type.startsWith('Download initiated:')) {
          typeText = (translations.id['Download initiated:'] || 'Unduhan dimulai: ') + activity.details;
        } else if (activity.type.startsWith('Shop purchase:')) {
          typeText = 'Pembelian Toko: ' + activity.details;
        } else if (activity.type.startsWith('Admin Login success')) {
          typeText = (translations.id['Admin Login success'] || 'Login Admin berhasil') + `: ${activity.details}`;
        } else {
          typeText = activity.type + activity.details;
        }
      } else {
        typeText = activity.type + activity.details;
      }
      li.textContent = `${typeText} (${timeAgo})`;
      recentActivitiesElement.appendChild(li);
    });

    // Setup auto-refresh if not already running
    if (analyticsIntervalId === null) {
      analyticsIntervalId = setInterval(() => {
        renderAnalyticsDashboard();
      }, 30000); // Refresh every 30 seconds
      console.log("[ANALYTICS] Auto-refresh started");
    }
  }

  // Admin Save News Logic
  saveNewsUpdate.addEventListener('click', () => {
    const lang = langSelect.value;
    const news = newsUpdateTextarea.value.trim();
    localStorage.setItem('growfax_news_update', news);
    updateNewsBanner(news);
    showToast(lang === 'id' ? 'Berita berhasil diperbarui.' : 'News updated successfully.', 2000);
  });
  
  // Admin Save SEO Logic (using localStorage for persistence, simulating API write)
  function saveSeoSettings(title, desc, keywords) {
    localStorage.setItem('growfax_seo_title', title);
    localStorage.setItem('growfax_seo_desc', desc);
    localStorage.setItem('growfax_seo_keywords', keywords);
  }

  // Admin Load SEO Logic (using localStorage for retrieval, simulating API read)
  function loadAndApplySeoSettings() {
    const savedTitle = localStorage.getItem('growfax_seo_title') || document.title;
    const savedDesc = localStorage.getItem('growfax_seo_desc') || document.querySelector('meta[name="description"]').content;
    const savedKeywords = localStorage.getItem('growfax_seo_keywords') || document.querySelector('meta[name="keywords"]').content;

    seoTitleInput.value = savedTitle;
    seoDescTextarea.value = savedDesc;
    seoKeywordsInput.value = savedKeywords;

    // Apply to the page for the current session (simulate dynamic update for the current session)
    document.title = savedTitle;
    document.querySelector('meta[name="description"]').content = savedDesc;
    document.querySelector('meta[name="keywords"]').content = savedKeywords;
    console.log('[SEO] Settings loaded and applied.');
  }

  // Admin Save SEO Logic
  saveSeoMeta.addEventListener('click', () => {
    const title = seoTitleInput.value.trim();
    const desc = seoDescTextarea.value.trim();
    const keywords = seoKeywordsInput.value.trim();
    saveSeoSettings(title, desc, keywords);
    loadAndApplySeoSettings(); // Re-apply to the page
    showToast(langSelect.value === 'id' ? 'Meta SEO berhasil diperbarui.' : 'SEO Meta updated successfully.', 2000);
  });

  // Initial load of SEO settings
  loadAndApplySeoSettings();

  /* =========================== Smooth Translation Logic (UPDATED with single Admin Role) =========================== */

  // Command Texts for translation
  const commandData = {
    admin_commands: [ 
      // NEW ROLE
      { strong: "Can sell role", span: "Benefit for selling roles to players." },
      { strong: "Can sell title", span: "Benefit for selling custom titles to players." },
      { strong: "Can sell All item with Real Trade", span: "Allows selling all in-game items via Real Trade system." }
    ]
  };

  // Terjemahan Kustom (Simulasi Endpoint API: /translations)
  const translations = {
    id: {
      // Nav
      "üì• Downloads": "üì• Unduhan", 
      "üõí Shop": "üõí Toko", 
      "üêû Report Bug": "üêû Laporkan Bug",
      "üîë Admin": "üîë Admin",
      // Banner
      "Welcome to Growfax": "Selamat Datang di Growfax",
      "Private Growtopia Server": "Server Growtopia Private",
      "Loading time...": "Memuat waktu...",
      "Essential File Downloads": "Unduhan File Penting",
      "Play on Android": "Main di Android",
      "Play on Windows": "Main di Windows",
      "Play on iOS": "Main di iOS",
      "Play via PowerTunnel": "Main via PowerTunnel",
      // Footer
      "Join Our Community": "Bergabunglah dengan Komunitas Kami",
      "Connect with others and get support in our official Discord server.": "Terhubung dengan pemain lain dan dapatkan dukungan di server Discord resmi kami.",
      "Join Growfax Discord": "Gabung Discord Growfax",
      // Modal
      "Server Time (WIB):": "Waktu Server (WIB):",
      "Version": "Versi",
      "Updated": "Diperbarui",
      "Changelog": "Catatan pembaruan",
      "Size": "Ukuran",
      "Filename": "Nama berkas",
      "File info": "Info berkas",
      "Details before download": "Detail sebelum mengunduh",
      "Cancel": "Batal",
      "Download": "Unduh",
      "Unduhan": "Unduhan",
      "Download started.": "unduhan dimulai.",
      "Copy Config": "Salin Konfigurasi",
      "Config copied!": "Konfigurasi disalin!",
      // Shop (UPDATED SECTION TITLE)
      "Growfax Server Roles": "Peran Server Growfax",
      "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.": "Dukung server dan buka peran eksklusif! Beli langsung via PayPal.me.",
      // Purchase Buttons
      "Pay $USD": "Bayar $USD",
      "Pay ‚Ç¨EUR": "Bayar ‚Ç¨ EUR",
      "Pay ¬£GBP": "Bayar ¬£ GBP",
      "Pay A$AUD": "Bayar A$ AUD",
      "Pay S$SGD": "Bayar S$ SGD",
      "Pay C$CAD": "Bayar C$ CAD",
      "Bayar Rp IDR": "Bayar Rp IDR",
      // Welcome Modal
      "Welcome to Growfax": "Selamat Datang di Growfax",
      "Set your preferred language and theme. We'll remember this for next time.": "Atur bahasa dan tema pilihan Anda. Kami akan mengingatnya untuk kunjungan berikutnya.",
      "Language": "Bahasa",
      "Theme": "Tema",
      "Light": "Terang",
      "Dark": "Gelap",
      "Skip": "Lewati",
      "Save & Continue": "Simpan & Lanjutkan",
      "Settings saved!": "Pengaturan disimpan!",
      // Time Greetings
      "Pagi": "Pagi",
      "Siang": "Siang",
      "Sore": "Sore",
      "Malam": "Malam",
      // Admin Area
      "Admin Area": "Area Admin",
      "Enter the Admin Token to proceed:": "Masukkan Token Admin untuk melanjutkan:",
      "Submit": "Kirim",
      "‚úÖ Admin Login Successful!": "‚úÖ Login Admin Berhasil!",
      "‚ùå Invalid Admin Token.": "‚ùå Token Admin salah.",
      "Server Status": "Status Server",
      "Online": "Online",
      "Offline": "Offline",
      "Toggle Status (Simulate)": "Ubah Status (Simulasi)",
      "Server Status changed.": "Status Server diubah.",
      "Analytical Dashboard": "Dasbor Analitik",
      "Total Downloads:": "Total Unduhan:",
      "Recent Activities:": "Aktivitas Terbaru:",
      "Refresh Data": "Segarkan Data",
      "News & Updates": "Berita & Pembaruan",
      "Save News": "Simpan Berita",
      "News updated successfully.": "Berita berhasil diperbarui.",
      "SEO Management": "Manajemen SEO",
      "Page Title (Hanya Title Tag HTML)": "Judul Halaman (Hanya Tag Title HTML)",
      "Meta Description": "Meta Deskripsi",
      "Meta Keywords (Comma-separated)": "Kata Kunci Meta (Dipisahkan Koma)",
      "Update SEO Meta": "Perbarui Meta SEO",
      "SEO Meta updated successfully.": "Meta SEO berhasil diperbarui.",
      "Close Admin Area": "Tutup Area Admin",
      "Download initiated:": "Unduhan dimulai: ",
      "Admin Login success": "Login Admin berhasil",
      // Admin Role Translations
      "üëë Admin Server Role": "Peran Admin Server",
      "Can sell role": "Dapat menjual peran",
      "Benefit for selling roles to players.": "Manfaat untuk menjual peran kepada pemain.",
      "Can sell title": "Dapat menjual gelar",
      "Benefit for selling custom titles to players.": "Manfaat untuk menjual gelar kustom kepada pemain.",
      "Can sell All item with Real Trade": "Dapat menjual Semua item dengan Real Trade",
      "Allows selling all in-game items via Real Trade system.": "Memungkinkan penjualan semua item dalam game melalui sistem Real Trade.",
      // Purchase Toast Messages
      "Opening PayPal for IDR purchase": "Membuka PayPal untuk pembelian Rp IDR",
      "Opening PayPal for EUR purchase": "Membuka PayPal untuk pembelian ‚Ç¨ EUR",
      "Opening PayPal for GBP purchase": "Membuka PayPal untuk pembelian ¬£ GBP",
      "Opening PayPal for AUD purchase": "Membuka PayPal untuk pembelian A$ AUD",
      "Opening PayPal for SGD purchase": "Membuka PayPal untuk pembelian S$ SGD",
      "Opening PayPal for CAD purchase": "Membuka PayPal untuk pembelian C$ CAD",
      "Opening PayPal for USD purchase": "Membuka PayPal untuk pembelian $USD",
      // Time Ago
      'tahun': 'tahun',
      'bulan': 'bulan',
      'hari': 'hari',
      'jam': 'jam',
      'menit': 'menit',
      'baru saja': 'baru saja'
    },
  };

  // ... (Sisa fungsi JavaScript yang menangani logika tema, waktu, modal, dan terjemahan)
  // ... (Ini adalah bagian yang Anda anggap sebagai "API Kustom" sisi klien)

  // -------------------------
  // Sisa kode JavaScript (Termasuk logika UI dan Admin)
  // -------------------------

  // --- File references (from Admin Area) ---
  const ADMIN_TOKEN = '1234'; // Simulated token
  const adminBackdrop = document.getElementById('adminBackdrop');
  const adminTitle = document.getElementById('adminTitle');
  const adminLogin = document.getElementById('adminLogin');
  const adminLoginPrompt = document.getElementById('adminLoginPrompt');
  const adminTokenInput = document.getElementById('adminTokenInput');
  const adminTokenSubmit = document.getElementById('adminTokenSubmit');
  const adminContent = document.getElementById('adminContent');
  const closeAdmin = document.getElementById('closeAdmin');
  const serverStatusDisplay = document.getElementById('serverStatusDisplay');
  const toggleServerStatus = document.getElementById('toggleServerStatus');
  const newsUpdateTextarea = document.getElementById('newsUpdateTextarea');
  const saveNewsUpdate = document.getElementById('saveNewsUpdate');
  // Analytical Dashboard Refs
  const analyticsTitle = document.getElementById('analyticsTitle');
  const totalDownloadsContainer = document.getElementById('totalDownloadsContainer');
  const totalDownloadsElement = document.getElementById('totalDownloads');
  const recentActivitiesTitle = document.getElementById('recentActivitiesTitle');
  const recentActivitiesElement = document.getElementById('recentActivities');
  const refreshAnalytics = document.getElementById('refreshAnalytics');
  // SEO Refs
  const seoTitleInput = document.getElementById('seoTitleInput');
  const seoDescTextarea = document.getElementById('seoDescTextarea');
  const seoKeywordsInput = document.getElementById('seoKeywordsInput');
  const saveSeoMeta = document.getElementById('saveSeoMeta');
  let isServerOnline = true; // Simulated server status
  let pendingDownload = null; // We keep this here to track what's about to be downloaded
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalCancel = document.getElementById('modalCancel');
  const modalConfirm = document.getElementById('modalConfirm');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const modalVersion = document.getElementById('modalVersion');
  const modalUpdated = document.getElementById('modalUpdated');
  const modalChangelog = document.getElementById('modalChangelog');
  const modalFilename = document.getElementById('modalFilename');

  // --- Utility functions ---
  function showToast(message, duration = 2000) {
    toast.textContent = message;
    toast.style.opacity = '1';
    toast.style.transform = 'translateX(-50%) translateY(0)';
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translateX(-50%) translateY(10px)';
    }, duration);
  }

  function getTimeAgo(date, lang = 'en') {
      let seconds = Math.floor((new Date() - date) / 1000);
      let interval = seconds / 31536000;
      
      const labels = {
          'id': { year: 'tahun', month: 'bulan', day: 'hari', hour: 'jam', minute: 'menit', now: 'baru saja' },
          'en': { year: 'year', month: 'month', day: 'day', hour: 'hour', minute: 'minute', now: 'just now' }
      };

      const plural = (num, label) => num > 1 ? label + 's' : label;
      const l = labels[lang] || labels['en'];

      if (seconds < 60) return l.now;
      interval = seconds / 60; // minutes
      if (interval < 60) return Math.floor(interval) + (lang === 'id' ? ' menit yang lalu' : ` ${plural(Math.floor(interval), l.minute)} ago`);
      interval = seconds / 3600; // hours
      if (interval < 24) return Math.floor(interval) + (lang === 'id' ? ' jam yang lalu' : ` ${plural(Math.floor(interval), l.hour)} ago`);
      interval = seconds / 86400; // days
      if (interval < 30) return Math.floor(interval) + (lang === 'id' ? ' hari yang lalu' : ` ${plural(Math.floor(interval), l.day)} ago`);
      interval = seconds / 2592000; // months
      if (interval < 12) return Math.floor(interval) + (lang === 'id' ? ' bulan yang lalu' : ` ${plural(Math.floor(interval), l.month)} ago`);
      interval = seconds / 31536000; // years
      return Math.floor(interval) + (lang === 'id' ? ' tahun yang lalu' : ` ${plural(Math.floor(interval), l.year)} ago`);
  }

  function updateCommandTranslations(lang) {
    for (const id in commandData) {
      const ul = document.getElementById(id);
      if (ul) {
        ul.innerHTML = ''; // Clear existing content
        commandData[id].forEach(item => {
          const li = document.createElement('li');
          // Translate the text content of the strong/span elements
          const strongText = lang === 'en' ? item.strong : (translations[lang]?.[item.strong] || item.strong);
          li.innerHTML = `<strong>${strongText}</strong>`;
          if (item.span) {
            const spanText = lang === 'en' ? item.span : (translations[lang]?.[item.span] || item.span);
            li.innerHTML += ` <span>${spanText}</span>`;
          }
          ul.appendChild(li);
        });
      }
    }
  }

  function updateAdminAreaTranslations(lang) {
      // Login Area
      adminTitle.textContent = lang === 'id' ? (translations.id['Admin Area'] || 'Area Admin') : 'Admin Area';
      adminLoginPrompt.textContent = lang === 'id' ? (translations.id['Enter the Admin Token to proceed:'] || 'Enter the Admin Token to proceed:') : 'Enter the Admin Token to proceed:';
      adminTokenSubmit.textContent = lang === 'id' ? (translations.id['Submit'] || 'Submit') : 'Submit';
      
      // Content Area
      // Status
      document.querySelector('#adminContent div:nth-child(1) h4').textContent = lang === 'id' ? (translations.id["Server Status"] || 'Status Server') : 'Server Status';
      serverStatusDisplay.textContent = isServerOnline 
          ? (lang === 'id' ? (translations.id['Online'] || 'Online') : 'Online') 
          : (lang === 'id' ? (translations.id['Offline'] || 'Offline') : 'Offline');
      // Analytics
      document.querySelector('#adminContent div:nth-child(2) h4').textContent = lang === 'id' ? (translations.id["Analytical Dashboard"] || 'Dasbor Analitik') : 'Analytical Dashboard';
      refreshAnalytics.textContent = lang === 'id' ? (translations.id["Refresh Data"] || 'Segarkan Data') : 'Refresh Data';
      // News
      document.querySelector('#adminContent div:nth-child(3) h4').textContent = lang === 'id' ? (translations.id["News & Updates"] || 'Berita & Pembaruan') : 'News & Updates';
      // SEO Management (using ID)
      document.querySelector('#adminContent div:nth-child(4) h4').textContent = lang === 'id' ? (translations.id["SEO Management"] || 'Manajemen SEO') : 'SEO Management';

      toggleServerStatus.textContent = lang === 'id' ? (translations.id["Toggle Status (Simulate)"] || 'Ubah Status (Simulasi)') : 'Toggle Status (Simulate)';
      saveNewsUpdate.textContent = lang === 'id' ? (translations.id["Save News"] || 'Simpan Berita') : 'Save News';
      saveSeoMeta.textContent = lang === 'id' ? (translations.id["Update SEO Meta"] || 'Perbarui Meta SEO') : 'Update SEO Meta';
      closeAdmin.textContent = lang === 'id' ? (translations.id["Close Admin Area"] || 'Tutup Area Admin') : 'Close Admin Area';
      
      // Refresh analytics data to update language on dynamic strings
      renderAnalyticsDashboard();
  }

  function applyTranslations(lang) {
      const transitionDuration = 200; // 200 ms
      const elementsToTranslate = document.querySelectorAll('[data-original], #modalCancel, #modalConfirm, #welcomeSave, #welcomeSkip, #discordLink, #reportBugLink, #adminTokenSubmit, #closeAdmin, #toggleServerStatus, #saveNewsUpdate, #refreshAnalytics, #saveSeoMeta');
      
      // 1. Fade out (Opacity 0)
      elementsToTranslate.forEach(el => {
          // Only target elements currently visible
          if (el.offsetWidth > 0 || el.offsetHeight > 0 || el === langSelect) {
              el.style.transition = `opacity ${transitionDuration}ms ease`;
              el.style.opacity = '0';
          }
      });

      // 2. Wait for fade-out
      setTimeout(() => {
          // 3. Apply new content (Opacity is 0, so change is invisible)
          elementsToTranslate.forEach(el => {
              const orig = el.dataset.original;
              if (!orig) return;
              el.textContent = lang === 'en' ? orig : (translations[lang]?.[orig] || orig);
          });

          // Translate fixed text elements
          document.getElementById('navDownloads').textContent = lang === 'en' ? 'üì• Downloads' : (translations[lang]?.['üì• Downloads'] || 'üì• Unduhan');
          document.getElementById('navShop').textContent = lang === 'en' ? 'üõí Shop' : (translations[lang]?.['üõí Shop'] || 'üõí Toko');
          document.querySelector('.banner-section h2').textContent = lang === 'en' ? 'Welcome to Growfax' : (translations[lang]?.['Welcome to Growfax'] || 'Selamat Datang di Growfax');
          document.querySelector('.banner-section p').textContent = lang === 'en' ? 'Private Growtopia Server' : (translations[lang]?.['Private Growtopia Server'] || 'Server Growtopia Private');
          document.getElementById('totalDownloadsContainer').querySelector('strong').textContent = SIMULATED_DATA.totalDownloads.toLocaleString(); // Always refresh number

          // Shop buttons (using class selectors)
          const usdButtons = document.querySelectorAll('.btn-usd');
          const eurButtons = document.querySelectorAll('.btn-eur');
          const gbpButtons = document.querySelectorAll('.btn-gbp');
          const audButtons = document.querySelectorAll('.btn-aud');
          const sgdButtons = document.querySelectorAll('.btn-sgd');
          const cadButtons = document.querySelectorAll('.btn-cad');
          const idrButtons = document.querySelectorAll('.btn-idr');

          usdButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay $USD' : (translations[lang]?.['Pay $USD'] || 'Bayar $USD'); });
          eurButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay ‚Ç¨EUR' : (translations[lang]?.['Pay ‚Ç¨EUR'] || 'Bayar ‚Ç¨ EUR'); });
          gbpButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay ¬£GBP' : (translations[lang]?.['Pay ¬£GBP'] || 'Bayar ¬£ GBP'); });
          audButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay A$AUD' : (translations[lang]?.['Pay A$AUD'] || 'Bayar A$ AUD'); });
          sgdButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay S$SGD' : (translations[lang]?.['Pay S$SGD'] || 'Bayar S$ SGD'); });
          cadButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay C$CAD' : (translations[lang]?.['Pay C$CAD'] || 'Bayar C$ CAD'); });
          idrButtons.forEach(btn => { btn.textContent = lang === 'en' ? 'Pay Rp IDR' : (translations[lang]?.['Bayar Rp IDR'] || 'Bayar Rp IDR'); });

          // Update dynamic elements (time and commands)
          updateTime();
          updateCommandTranslations(lang);
          updateReportBugLink();
          updateAdminAreaTranslations(lang);


          // 4. Fade in
          elementsToTranslate.forEach(el => {
              el.style.opacity = '1';
          });
      }, transitionDuration);
  }

  function setTheme(theme) {
    document.body.setAttribute('data-theme', theme);
    document.getElementById('themeToggle').textContent = theme === 'light' ? 'üåû Light' : 'üåô Dark';
    document.getElementById('themeToggle').setAttribute('aria-pressed', theme === 'dark');
    localStorage.setItem('growfax_theme', theme);

    // Sync welcome modal radio button
    const radio = document.querySelector(`input[name="welcomeTheme"][value="${theme}"]`);
    if (radio) radio.checked = true;
  }

  // Helper for bug report link translation
  function updateReportBugLink() {
      const lang = langSelect.value;
      const reportText = lang === 'id' ? (translations.id['üêû Report Bug'] || 'üêû Laporkan Bug') : 'üêû Report Bug';
      document.getElementById('reportBugLink').textContent = reportText;
      const bugTitle = lang === 'id' ? (translations.id['Laporan Bug - Growfax'] || 'Laporan Bug - Growfax') : 'Bug Report - Growfax';
      document.getElementById('reportBugLink').href = `https://discord.com/channels/YOUR_SERVER_ID/YOUR_BUG_CHANNEL_ID`;
  }

  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', () => {
    const currentTheme = document.body.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
  });

  /* =========================== Language control (unchanged) =========================== */
  const langSelect = document.getElementById('langSelect');
  langSelect.addEventListener('change', (e) => {
    const lang = e.target.value;
    localStorage.setItem('growfax_lang', lang);
    applyTranslations(lang);
    updateTime();
  });

  /* =========================== Utility Functions / Time (FIXED: ensured periodic update is active) =========================== */
  function getIndoGreeting(hour) {
    if (hour >= 4 && hour < 11) return (translations.id['Pagi'] || 'Pagi');
    if (hour >= 11 && hour < 15) return (translations.id['Siang'] || 'Siang');
    if (hour >= 15 && hour < 18) return (translations.id['Sore'] || 'Sore');
    return (translations.id['Malam'] || 'Malam');
  }

  function updateNewsBanner(newsContent) {
      // Find the main banner p element
      const bannerP = document.querySelector('.banner-section p');
      if (!bannerP) return;

      const lang = langSelect.value;
      const defaultText = lang === 'id' ? (translations.id['Private Growtopia Server'] || 'Server Growtopia Private') : 'Private Growtopia Server';
      
      const news = newsContent || localStorage.getItem('growfax_news_update');

      if (news && news.length > 0) {
          bannerP.innerHTML = `<strong>[UPDATE]</strong> ${news}`;
      } else {
          bannerP.textContent = defaultText;
      }
  }


  function updateTime() {
    const timeDisplay = document.getElementById('timeDisplay');
    const now = new Date();
    // Timezone: Jakarta (WIB, UTC+7) - Placeholder for simplicity
    const jakartaTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Jakarta" }));
    const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true }; // Added 'second' for visual confirmation of movement
    const formattedTime = jakartaTime.toLocaleString('en-US', options);
    const currentHour = jakartaTime.getHours();
    const lang = langSelect.value;

    if (lang === 'id') {
      const greeting = getIndoGreeting(currentHour);
      timeDisplay.textContent = `${greeting}, ${jakartaTime.toLocaleString('id-ID', options)} WIB`;
    } else {
      timeDisplay.textContent = `Server Time (WIB): ${formattedTime}`;
    }
    
    // Update news based on saved local storage content
    const newsContent = localStorage.getItem('growfax_news_update') || SIMULATED_DATA.news;
    updateNewsBanner(newsContent);

    // Ensure the interval is running only once
    if (!window.timeUpdateInterval) {
        window.timeUpdateInterval = setInterval(updateTime, 1000);
    }
  }

  /* =========================== Modal Logic (unchanged) =========================== */
  // Download buttons logic
  document.querySelectorAll('.platform-buttons a').forEach(link => {
    link.addEventListener('click', (e) => {
      const filename = link.dataset.filename;
      const filekey = link.dataset.filekey;
      const meta = FILE_META[filekey];
      const lang = langSelect.value;

      if (!meta) {
        // Fallback for missing file metadata
        return; 
      }

      // 1. If it's a direct download (Android/Windows/PowerTunnel)
      if (meta.isDownload) {
        // Proceed with standard download for file types that don't need config copy
        if (!isServerOnline) {
          e.preventDefault();
          showToast(`‚ùå ${lang === 'id' ? 'Server sedang Offline.' : 'Server is Offline.'}`, 3000);
          return;
        }

        pendingDownload = { filename, filekey };

        // Update modal for confirmation/info
        modalTitle.textContent = lang === 'id' ? (translations.id['File info'] || 'Info berkas') : 'File info';
        modalDesc.textContent = lang === 'id' ? (translations.id['Details before download'] || 'Detail sebelum mengunduh') : 'Details before download';
        modalConfirm.textContent = lang === 'id' ? (translations.id['Download'] || 'Unduh') : 'Download';
        modalConfirm.dataset.action = 'download';

        // Populate modal with details
        modalVersion.textContent = `${(lang === 'id') ? (translations.id['Version'] || 'Versi') + ': ' : 'Version: '}${meta.version}`;
        modalUpdated.textContent = `${(lang === 'id') ? (translations.id['Updated'] || 'Diperbarui') + ': ' : 'Updated: '}${meta.updated}`;
        modalChangelog.innerText = `${(lang === 'id') ? (translations.id['Changelog'] || 'Catatan pembaruan') + ':' : 'Changelog:'}\n${meta.changelog}\n\n${(lang === 'id') ? (translations.id['Size'] || 'Ukuran') + ': ' : 'Size: '}${meta.size}`;
        modalFilename.textContent = `${(lang === 'id') ? (translations.id['Filename'] || 'Nama berkas') + ': ' : 'Filename: '}${filename}`;
        
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden', 'false');
        e.preventDefault(); // Prevent default download until user confirms
        
      } else {
        // 2. If it's an iOS config copy
        e.preventDefault();
        
        // Teks tersedia, salin ke clipboard
        navigator.clipboard.writeText(meta.copytext).then(() => {
          const copyText = lang === 'id' ? (translations.id['Config copied!'] || 'Konfigurasi disalin!') : 'Config copied!';
          showToast(copyText, 2500);
        }).catch(err => {
          console.error('Could not copy text: ', err);
          // Fallback: show modal with copy button
          showToast('Failed to copy. Showing modal.', 3000);
        });

        // Update modal for confirmation/info, change button to 'Copy Config'
        modalTitle.textContent = lang === 'id' ? (translations.id['File info'] || 'Info berkas') : 'File info';
        modalDesc.textContent = lang === 'id' ? (translations.id['Details before download'] || 'Detail sebelum mengunduh') : 'Details before download';
        modalConfirm.textContent = lang === 'id' ? (translations.id['Copy Config'] || 'Copy Config') : 'Copy Config';
        modalConfirm.dataset.action = 'copy'; // Custom attribute to check action

        // Populate modal with details
        modalVersion.textContent = `${(lang === 'id') ? (translations.id['Version'] || 'Versi') + ': ' : 'Version: '}${meta.version}`;
        modalUpdated.textContent = `${(lang === 'id') ? (translations.id['Updated'] || 'Diperbarui') + ': ' : 'Updated: '}${meta.updated}`;
        modalChangelog.innerText = `${(lang === 'id') ? (translations.id['Changelog'] || 'Catatan pembaruan') + ':' : 'Changelog:'}\n${meta.changelog}\n\n${(lang === 'id') ? (translations.id['Size'] || 'Ukuran') + ': ' : 'Size: '}${meta.size}`;
        modalFilename.textContent = `${(lang === 'id') ? (translations.id['Filename'] || 'Nama berkas') + ': ' : 'Filename: '}${filename}`;
        
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden', 'false');
      }
    });
  });

  // Modal actions
  modalCancel.addEventListener('click', () => {
    modalBackdrop.style.display = 'none';
    modalBackdrop.setAttribute('aria-hidden', 'true');
    pendingDownload = null;
  });

  modalConfirm.addEventListener('click', () => {
    const action = modalConfirm.dataset.action;
    const lang = langSelect.value;

    if (action === 'download' && pendingDownload) {
      // Simulate download (programmatic click on a hidden anchor)
      const a = document.createElement('a');
      a.href = document.querySelector(`a[data-filekey="${pendingDownload.filekey}"]`).href;
      a.download = pendingDownload.filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);

      showToast((lang === 'id' ? (translations.id['Download initiated:'] || 'Unduhan dimulai: ') : 'Download initiated: ') + pendingDownload.filename, 2000);

      // Add to simulated activities (Simulate API call to track download)
      SIMULATED_DATA.activities.unshift({ 
        type: "Download initiated:", 
        details: pendingDownload.filename, 
        time: new Date() 
      });
      SIMULATED_DATA.totalDownloads++;
      renderAnalyticsDashboard(); // Update dashboard if admin is open

      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      pendingDownload = null;
    } else if (action === 'copy') {
      // Logic is already handled in the anchor click event (auto-copy)
      // This button in the modal is just a "confirm" / "info" modal
      // We can add a re-copy action here for robustness if the first one failed
      const filenameFromModal = modalFilename.textContent.split(': ')[1];
      const key = document.querySelector(`a[data-filename="${filenameFromModal}"]`)?.dataset.filekey;
      
      if (key && FILE_META[key] && FILE_META[key].copytext) {
          navigator.clipboard.writeText(FILE_META[key].copytext).then(() => {
              const copyText = lang === 'id' ? (translations.id['Config copied!'] || 'Konfigurasi disalin!') : 'Config copied!';
              showToast(copyText, 2500);
          }).catch(err => {
              console.error('Could not copy text: ', err);
              showToast('Failed to copy.', 3000);
          });
      }

      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
    } else {
      // Fallback in case something weird happens
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
    }
  });

  // Shop purchase simulation (UPDATED for single Admin Role)
  document.querySelectorAll('.btn-purchase').forEach(button => {
    button.addEventListener('click', (e) => {
      // e.preventDefault(); // Don't prevent default, allow PayPal link to open
      const lang = langSelect.value;
      const roleName = button.getAttribute('data-role').toLowerCase();
      let toastMessage;

      if (button.classList.contains('btn-idr')) {
        const idrPrice = button.getAttribute('data-idr-price');
        toastMessage = lang === 'en' ? `Opening PayPal for IDR purchase (${roleName} - Rp ${idrPrice})...` : (translations.id['Opening PayPal for IDR purchase'] || 'Membuka PayPal untuk pembelian Rp IDR') + ` (${roleName})...`;
      } else if (button.classList.contains('btn-eur')) {
        const eurPrice = button.getAttribute('data-price-eur');
        toastMessage = lang === 'en' ? `Opening PayPal for EUR purchase (${roleName} - ‚Ç¨ ${eurPrice})...` : (translations.id['Opening PayPal for EUR purchase'] || 'Membuka PayPal untuk pembelian ‚Ç¨ EUR') + ` (${roleName})...`;
      } else if (button.classList.contains('btn-gbp')) {
        const gbpPrice = button.getAttribute('data-price-gbp');
        toastMessage = lang === 'en' ? `Opening PayPal for GBP purchase (${roleName} - ¬£ ${gbpPrice})...` : (translations.id['Opening PayPal for GBP purchase'] || 'Membuka PayPal untuk pembelian ¬£ GBP') + ` (${roleName})...`;
      } else if (button.classList.contains('btn-aud')) {
        const audPrice = button.getAttribute('data-price-aud');
        toastMessage = lang === 'en' ? `Opening PayPal for AUD purchase (${roleName} - A$ ${audPrice})...` : (translations.id['Opening PayPal for AUD purchase'] || 'Membuka PayPal untuk pembelian A$ AUD') + ` (${roleName})...`;
      } else if (button.classList.contains('btn-sgd')) {
        const sgdPrice = button.getAttribute('data-price-sgd');
        toastMessage = lang === 'en' ? `Opening PayPal for SGD purchase (${roleName} - S$ ${sgdPrice})...` : (translations.id['Opening PayPal for SGD purchase'] || 'Membuka PayPal untuk pembelian S$ SGD') + ` (${roleName})...`;
      } else if (button.classList.contains('btn-cad')) {
        const cadPrice = button.getAttribute('data-price-cad');
        toastMessage = lang === 'en' ? `Opening PayPal for CAD purchase (${roleName} - C$ ${cadPrice})...` : (translations.id['Opening PayPal for CAD purchase'] || 'Membuka PayPal untuk pembelian C$ CAD') + ` (${roleName})...`;
      } else {
        const usdPrice = button.getAttribute('data-price');
        toastMessage = lang === 'en' ? `Opening PayPal for USD purchase (${roleName} - $${usdPrice})...` : (translations.id['Opening PayPal for USD purchase'] || 'Membuka PayPal untuk pembelian $USD') + ` (${roleName})...`;
      }
      
      showToast(toastMessage, 3000);
      
      // Add to simulated activities (Simulate API call to track purchase)
      const currency = button.textContent.replace(/Pay |Bayar |\.\.\./g, '').trim();
      SIMULATED_DATA.activities.unshift({ 
        type: "Shop purchase:", 
        details: `${roleName.toUpperCase()} (${currency})`, 
        time: new Date() 
      });
      renderAnalyticsDashboard(); // Update dashboard if admin is open
    });
  });

  /* =========================== Welcome Modal Logic (unchanged) =========================== */
  const welcomeBackdrop = document.getElementById('welcomeBackdrop');
  const openWelcome = document.getElementById('openWelcome');
  const welcomeSkip = document.getElementById('welcomeSkip');
  const welcomeSave = document.getElementById('welcomeSave');
  const welcomeLang = document.getElementById('welcomeLang');

  function showWelcome() {
    welcomeBackdrop.style.display = 'flex';
    welcomeBackdrop.setAttribute('aria-hidden', 'false');

    // Sync preferences with inputs
    welcomeLang.value = localStorage.getItem('growfax_lang') || langSelect.value;
    const currentTheme = localStorage.getItem('growfax_theme') || 'light';
    document.querySelector(`input[name="welcomeTheme"][value="${currentTheme}"]`).checked = true;
  }

  function hideWelcome() {
    welcomeBackdrop.style.display = 'none';
    welcomeBackdrop.setAttribute('aria-hidden', 'true');
  }

  openWelcome.addEventListener('click', showWelcome);
  welcomeBackdrop.addEventListener('click', (e) => {
    if (e.target === welcomeBackdrop) hideWelcome();
  });
  welcomeSkip.addEventListener('click', hideWelcome);

  welcomeSave.addEventListener('click', () => {
    const lang = welcomeLang.value;
    const theme = document.querySelector('input[name="welcomeTheme"]:checked').value;
    
    localStorage.setItem('growfax_lang', lang);
    localStorage.setItem('growfax_theme', theme);

    // Apply changes immediately
    langSelect.value = lang;
    setTheme(theme);
    applyTranslations(lang);
    updateTime();
    hideWelcome();

    showToast(lang === 'id' ? (translations.id['Settings saved!'] || 'Pengaturan disimpan!') : 'Settings saved!', 2000);
  });
  
  /* =========================== Admin Modal Logic (Simulasi Admin API) =========================== */
  const openAdmin = document.getElementById('openAdmin');

  function showAdminModal() {
    adminBackdrop.style.display = 'flex';
    adminBackdrop.setAttribute('aria-hidden', 'false');
    
    // Reset to login screen if not logged in
    if (!isAdminLoggedIn) {
      adminLogin.style.display = 'block';
      adminContent.style.display = 'none';
      adminTokenInput.value = '';
    } else {
      adminLogin.style.display = 'none';
      adminContent.style.display = 'block';
      // Load latest news into textarea
      newsUpdateTextarea.value = localStorage.getItem('growfax_news_update') || SIMULATED_DATA.news;
      // Load SEO settings
      loadAndApplySeoSettings();
      // Render analytics on open
      renderAnalyticsDashboard();
    }
  }

  function hideAdminModal() {
    adminBackdrop.style.display = 'none';
    adminBackdrop.setAttribute('aria-hidden', 'true');
    // Stop analytics auto-refresh
    if (analyticsIntervalId !== null) {
        clearInterval(analyticsIntervalId);
        analyticsIntervalId = null;
        console.log("[ANALYTICS] Auto-refresh stopped");
    }
  }

  openAdmin.addEventListener('click', () => {
    showAdminModal();
  });
  closeAdmin.addEventListener('click', hideAdminModal);
  adminBackdrop.addEventListener('click', (e) => {
    if (e.target === adminBackdrop) hideAdminModal();
  });

  // Admin Login Logic (Updated with Auto-Refresh)
  adminTokenSubmit.addEventListener('click', () => {
    const token = adminTokenInput.value.trim();
    const lang = langSelect.value;
    
    if (token === ADMIN_TOKEN) {
      isAdminLoggedIn = true; // Set login state
      adminLogin.style.display = 'none';
      adminContent.style.display = 'block';
      showToast(lang === 'id' ? '‚úÖ Login Admin Berhasil!' : '‚úÖ Admin Login Successful!', 2000);
      
      newsUpdateTextarea.value = localStorage.getItem('growfax_news_update') || SIMULATED_DATA.news;
      loadAndApplySeoSettings(); // Load SEO settings
      renderAnalyticsDashboard(); // Start analytics/auto-refresh
    } else {
      showToast(lang === 'id' ? '‚ùå Token Admin salah.' : '‚ùå Invalid Admin Token.', 2000);
    }
  });

  // Toggle Server Status (Simulate API call to toggle status)
  toggleServerStatus.addEventListener('click', () => {
    isServerOnline = !isServerOnline;
    const lang = langSelect.value;
    
    serverStatusDisplay.textContent = isServerOnline 
      ? (lang === 'id' ? (translations.id['Online'] || 'Online') : 'Online') 
      : (lang === 'id' ? (translations.id['Offline'] || 'Offline') : 'Offline');
      
    serverStatusDisplay.style.color = isServerOnline ? 'var(--success)' : 'var(--danger)';
    
    showToast(lang === 'id' ? 'Status Server diubah.' : 'Server Status changed.', 2000);
  });

  /* ===========================
     Initial Setup and Load
     =========================== */
  
  // Set initial theme from localStorage or default to 'light'
  const initTheme = localStorage.getItem('growfax_theme') || 'light';
  setTheme(initTheme);

  // Set initial language from localStorage or default based on browser/default 'en'
  const initLang = localStorage.getItem('growfax_lang') || (navigator.language.startsWith('id') ? 'id' : 'en');
  langSelect.value = initLang;
  applyTranslations(initLang);
  updateTime();

  /* ===========================
     Allow middle click / aux click default behavior on links (unchanged)
     =========================== */
  document.querySelectorAll('a').forEach(a => {
    a.addEventListener('auxclick', (e) => { /* allow default behavior */ });
  });

  /* ===========================
     Misc small UI effects (unchanged)
     =========================== */

  // status indicator pulse if present
  const status = document.querySelector('#status-indicator');
  if (status) {
    setInterval(() => {
      status.style.opacity = status.style.opacity === '1' ? '0.5' : '1';
    }, 600);
  }

  // graceful page link transition for all html links
  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', e => {
      // only internal html
      try {
        const href = link.getAttribute('href');
        if (href && href.endsWith('.html') && !link.hasAttribute('data-no-transition')) {
          e.preventDefault();
          document.body.style.opacity = '0';
          setTimeout(() => (window.location.href = href), 300);
        }
      } catch (err) { /* ignore */ }
    });
  });

  /* ===========================
     Console debug friendly message (unchanged)
     =========================== */
  console.log('%cGrowfax Engine Ready ‚úÖ', 'color: #00ff88; font-weight: bold; padding: 5px 10px; border-radius: 5px; background: #1a1a1a;');

</script>
</body>
</html>
