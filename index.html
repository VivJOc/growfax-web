<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Growfax Official - Private Growtopia Server & Downloads</title>
<link rel="icon" href="Growfax_banner.jpg" type="image/jpeg">

<meta name="description" content="Situs resmi Growfax, private server Growtopia. Unduh file host terbaru untuk Android, Windows, dan iOS. Mainkan Growtopia dengan fitur eksklusif dan komunitas aktif!"
/>
<meta name="keywords" content="Growfax, Growtopia Private Server, Growtopia PS, Download Growfax, Host Growfax, Growfax Android, Growfax Windows" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://growfax.web.id/home" />

<meta property="og:type" content="website" />
<meta property="og:url" content="https://growfax.web.id/home" />
<meta property="og:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta property="og:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami."
/>
<meta property="og:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content="https://growfax.web.id/home" />
<meta name="twitter:title" content="Growfax Official - Private Growtopia Server & Downloads" />
<meta name="twitter:description" content="Unduh file host terbaru untuk Growfax Private Server (Android, Windows, iOS) dan bergabunglah dengan komunitas Discord kami."
/>
<meta name="twitter:image" content="https://growfax.web.id/Growfax_banner.jpg" />

<meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> 

<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX'); // Placeholder ID for Growfax Analytics
</script>

<style>
  /* ============================================================
     Growfax Official ‚Äî FULL UI stylesheet (futuristic neon/fax)
     - Mobile-First Optimization Applied (Fixed Horizontal Scrolling)
     ============================================================ */

  /* Global Reset: Ensure padding/border don't cause overflow */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* NEW: Keyframes for Logo Animation */
  @keyframes pulse {
    0% { transform: scale(1); box-shadow: var(--logo-shadow); }
    50% { transform: scale(1.02); box-shadow: var(--logo-shadow-hover); }
    100% { transform: scale(1); box-shadow: var(--logo-shadow); }
  }

  :root{
    --bg:#f8f8f8;
    --card-bg:#fff;
    --text:#1a1a1a;
    --accent:#0078d7;
    --card-shadow:0 8px 20px rgba(0,0,0,0.08);
    --discord-color:#7289da;
    --muted:#667;
    --toast-bg:rgba(0,0,0,0.8);
    --glass: rgba(255,255,255,0.6);
    --success:#2ecc71;
    --danger:#e74c3c;
    --mono: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    --border-color: rgba(0,0,0,0.08);
    --shop-bg: #8e44ad; /* New color for shop: Purple */
    --shop-glow: rgba(142, 68, 173, 0.4);
    /* UPDATED: Custom properties for YELLOW glow effect in light mode */
    --glow-color-light: rgba(255, 193, 7, 0.6); /* soft yellow glow */
    --text-shadow-light: 0 0 10px var(--glow-color-light), 0 2px 4px rgba(0,0,0,0.2);
    --logo-shadow: 0 4px 12px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
    --logo-shadow-hover: 0 8px 20px rgba(255, 193, 7, 0.4);
  }
  [data-theme="dark"]{
    --bg:#0f1720;
    --card-bg:#0b1220;
    --text:#e6eef8;
    --accent:#4da3ff;
    --card-shadow:0 8px 28px rgba(0,0,0,0.6);
    --discord-color:#5b6ea6;
    --muted:#9aa;
    --toast-bg:rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.03);
    --border-color: rgba(255,255,255,0.06);
    --shop-bg: #9b59b6; /* Lighter purple for dark mode */
    --shop-glow: rgba(155, 89, 182, 0.6);
    /* UPDATED: Custom properties for YELLOW glow effect in dark mode */
    --glow-color-dark: rgba(255, 170, 0, 0.8); /* brighter gold glow */
    --text-shadow-dark: 0 0 12px var(--glow-color-dark), 0 2px 8px rgba(0,0,0,0.6);
    --logo-shadow: 0 6px 18px rgba(0,0,0,0.4), 0 3px 9px rgba(0,0,0,0.25);
    --logo-shadow-hover: 0 10px 25px rgba(255, 170, 0, 0.5);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:var(--mono);
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    transition:background .25s,color .25s;
    overflow-x: hidden;
  }
  
  /* -------------------------
     Header / Navigation (Optimasi Mobile)
     ------------------------- */
  header{background:var(--card-bg);box-shadow:var(--card-shadow);position:sticky;top:0;z-index:1200}
  .header-content{
    max-width:1100px;
    margin:0 auto;
    padding:10px 10px; /* ADJUSTED: Reduced padding for mobile */
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    flex-wrap: wrap;
  }
  .header-left{
    display:flex;
    align-items:center;
    gap:8px; 
    flex: 1 1 50%;
  }
  .brand-wrap{display:flex;align-items:center;gap:8px}
  
  /* Glow, lift, and Pulse Animation for logo image */
  .brand-wrap img{
    width:36px;
    height:36px;
    border-radius:6px;
    object-fit:cover;
    transition: box-shadow .25s, transform .25s, opacity 0.2s ease;
    box-shadow: var(--logo-shadow);
    /* Apply animation */
    animation: pulse 3s infinite ease-in-out;
  }

  h1{
    font-size:1.2rem;
    margin:0;
    font-weight:700;
    /* Added opacity transition for smoother language change */
    transition: text-shadow .25s, opacity 0.2s ease;
    color: var(--text);
    text-shadow: var(--text-shadow-light); 
  }
  [data-theme="dark"] h1 {
    text-shadow: var(--text-shadow-dark);
  }

  .brand-wrap > div > div { 
    font-size: 0.75rem;
    /* Added opacity transition for smoother language change */
    transition: opacity 0.2s ease;
  }

  nav.primary{
    color:var(--accent);
    text-decoration:none;
    font-weight:700;
    margin-left:auto; 
    font-size: 0.9rem;
    flex: 1 1 100%; 
    margin-top: 6px; /* ADJUSTED: Reduced margin for tighter fit */
    text-align: left;
  }
  nav.primary a{
      color:var(--accent);
      text-decoration:none;
      font-weight:700;
      margin-left:0;
      margin-right: 12px;
      /* Added opacity transition for smoother language change */
      transition: opacity 0.2s ease, transform .18s;
  }
  nav.primary a:hover{opacity:.86;transform:translateY(-1px)}
  
  /* NEW: Style for active navigation link (SPA simulation) */
  nav.primary a.active-nav {
      border-bottom: 2px solid var(--accent);
      padding-bottom: 2px;
  }
  
  .controls{
    display:flex;
    align-items:center;
    gap:6px;
    flex: 0 1 auto;
    /* FIX FOR MOBILE WRAPPING: Allow buttons to wrap within the controls box */
    flex-wrap: wrap;
    justify-content: flex-end; /* Keep the buttons aligned to the right */
  }
  /* Gaya untuk semua tombol kontrol di header */
  .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin, #openAuth, #openSettings {
    font-size:0.9rem;
    padding:6px 8px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:transparent;
    color:var(--text);
    cursor:pointer;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
    /* Added opacity transition for smoother language change */
    transition: background-color .15s, opacity 0.2s ease;
  }
  .report-bug-btn:hover, .theme-toggle:hover, .open-welcome:hover, #openAdmin:hover, #openAuth:hover, #openSettings:hover {
    background: rgba(0,0,0,0.05);
  }
  [data-theme="dark"] .report-bug-btn:hover, [data-theme="dark"] .theme-toggle:hover, [data-theme="dark"] .open-welcome:hover, [data-theme="dark"] .#openAdmin:hover, [data-theme="dark"] #openAuth:hover, [data-theme="dark"] #openSettings:hover {
    background: rgba(255,255,255,0.05);
  }
  /* NEW: Style for the Logout button specifically */
  #authLogoutBtn {
      background: var(--danger) !important;
      color: white !important;
      border-color: var(--danger) !important;
      font-weight: 700;
  }
  #authLogoutBtn:hover {
      background: #c0392b !important;
  }

  /* -------------------------
     Banner / Hero
     ------------------------- */
  .banner-section{text-align:center;padding:40px 10px;background:linear-gradient(90deg, rgba(0,0,0,0.03), rgba(255,255,255,0.02))}
  .banner-section img{max-width:200px;border-radius:8px;margin-bottom:14px}
  .banner-section h2{
    font-size:1.6rem;
    color:#ffaa00;
    margin:8px 0;
    text-shadow:0 0 10px rgba(255,170,0,0.18);
    transition: opacity 0.2s ease;
  }
  .banner-section p{
    font-size:0.95rem;
    opacity:.92;
    margin:0;
    transition: opacity 0.2s ease;
  }
  .time-display{
    margin-top:8px;
    font-size:0.85rem;
    font-weight:600;
    opacity:.9;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Container (main content)
     ------------------------- */
  .container{max-width:1000px;margin:32px auto;text-align:center;padding:0 10px}
  .container h2{
    font-size:1.4rem;
    margin-bottom:24px;
    transition: opacity 0.2s ease;
  }
  
  /* NEW: SPA Section Animation */
  .content-section {
      opacity: 1;
      transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
      transform: translateY(0);
  }
  .content-section.hidden-section {
      display: none !important;
  }
  .content-section.fading-out {
      opacity: 0;
      transform: translateY(10px);
  }

  /* Platform Buttons: Full width for mobile */
  .platform-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:14px}
  .platform-buttons a{
    display:flex;align-items:center;justify-content:center;gap:12px;
    width:92%;
    padding:14px 18px;border-radius:12px;color:#fff;font-weight:700;
    text-decoration:none;border:1px solid transparent;font-size:1.02rem;
    transition:transform .18s ease,box-shadow .18s, opacity 0.2s ease;
  }
  .platform-buttons a img{width:30px;height:30px;border-radius:6px}
  .platform-buttons a:hover{transform:translateY(-2px)}

  .btn-android{background:#34c759;--glow:#4cff77;box-shadow:0 4px 16px rgba(76,255,119,0.08)}
  .btn-windows{background:#0078d7;--glow:#4da3ff;box-shadow:0 4px 16px rgba(77,163,255,0.08)}
  .btn-ios{background:#007aff;--glow:#7acbff;box-shadow:0 4px 16px rgba(122,203,255,0.08)}
  .btn-powertunnel{background:#b71c1c;--glow:#ff5a5a;box-shadow:0 4px 16px rgba(255,90,90,0.08)}

  /* NEW: Shop Roles Grid */
  .shop-roles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 24px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
  }
  .shop-role-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      border-top: 4px solid var(--shop-bg);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      height: auto; /* Allow card height to adjust to content */
  }
  .shop-role-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px var(--shop-glow);
  }
  .shop-role-card h3 {
      margin-top: 0;
      font-size: 1.25rem;
      color: var(--shop-bg);
      text-shadow: 0 0 5px rgba(142, 68, 173, 0.1);
  }
  .shop-role-card .price {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text);
      margin: 8px 0 15px;
  }
  .shop-role-card .price small {
      font-size: 0.8rem;
      font-weight: 400;
      opacity: 0.7;
  }
  /* NEW: Style for the multiple currency display */
  .shop-role-card .currency-display {
      display: block;
      font-size: 0.8rem; /* Smaller font for secondary currencies */
      font-weight: 500; 
      opacity: 0.8; 
      margin-top: 6px;
      line-height: 1.4;
      white-space: pre-wrap;
  }
  /* UPDATED: UL style for commands (Added Scroll functionality) */
  .shop-role-card ul {
      list-style-type: none;
      padding: 0;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--muted);
      white-space: pre-wrap;
      /* NEW SCROLL STYLES */
      max-height: 200px; /* Max height before scroll */
      overflow-y: auto;
      border: 1px solid var(--border-color); /* Border for visual clarity of scroll area */
      padding: 8px;
      border-radius: 6px;
  }

  /* Style adjustment for the list items inside the scrollable area */
  .shop-role-card ul li {
      margin-bottom: 8px;
      border-left: 3px solid var(--shop-bg);
      padding-left: 8px;
      line-height: 1.3;
      padding-right: 4px; /* Ensure content doesn't touch scrollbar */
  }
  .shop-role-card ul li:before {
      content: none; /* Remove default bullet */
  }
  .shop-role-card ul li strong {
      color: var(--accent);
      font-weight: 600;
      display: block;
      margin-bottom: 2px;
  }
  .shop-role-card ul li span {
      display: block;
      font-size: 0.85rem;
      opacity: 0.8;
  }
  .btn-purchase {
      background: var(--shop-bg);
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: 700;
      text-align: center;
      transition: background 0.15s, transform 0.15s;
  }
  .btn-purchase:hover {
      background: #732a9a;
      transform: translateY(-1px);
  }
  /* ADDED: Style for dual purchase buttons */
  .shop-role-card .purchase-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      width: 100%;
      flex-wrap: wrap; /* NEW: Allow wrapping for many buttons */
  }
  /* Ensure the button links themselves manage the flex sizing */
  .shop-role-card .purchase-buttons .btn-purchase {
      display: flex;
      flex: 1 1 calc(50% - 5px); /* Set to max 2 buttons per row on mobile */
      align-items: center;
      justify-content: center;
      min-width: 120px; /* Ensure a minimum size */
  }
  /* New style for IDR button */
  .btn-idr {
      background: #27ae60; /* Green color for IDR/Rupiah */
  }
  .btn-idr:hover {
      background: #1e8449;
  }
  /* NEW: EUR Button */
  .btn-eur {
      background: #004494; /* Dark Blue for EUR */
  }
  .btn-eur:hover {
      background: #003370;
  }
  /* NEW: GBP Button */
  .btn-gbp {
      background: #c0392b; /* Reddish Brown for GBP */
  }
  .btn-gbp:hover {
      background: #a93226;
  }
  /* NEW: AUD Button */
  .btn-aud {
      background: #f1c40f; /* Yellow/Gold for AUD */
      color: #333; /* Dark text for contrast */
  }
  .btn-aud:hover {
      background: #d4ac0d;
  }
  /* NEW: SGD Button */
  .btn-sgd {
      background: #3498db; /* Light Blue for SGD */
  }
  .btn-sgd:hover {
      background: #2980b9;
  }
  /* NEW: CAD Button */
  .btn-cad {
      background: #e74c4c; /* Red for CAD */
  }
  .btn-cad:hover {
      background: #c0392b;
  }


  /* -------------------------
     Discord Section
     ------------------------- */
  .discord-section{background:var(--discord-color);color:#fff;padding:24px;border-radius:10px;max-width:820px;margin:32px auto 50px;text-align:center;box-shadow:var(--card-shadow)}
  .discord-section img{width:48px;height:48px;border-radius:8px;margin-bottom:8px}
  .discord-section h3, .discord-section p, .discord-section a {
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Footer
     ------------------------- */
  footer{
    text-align:center;
    margin:30px 0 40px;
    font-size:.85rem;
    opacity:.85;
    transition: opacity 0.2s ease;
  }

  /* -------------------------
     Modal & Welcome/Admin Popup
     ------------------------- */
  .modal-backdrop, .welcome-backdrop, .admin-backdrop, #authBackdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1300}
  .modal, .welcome{width:92%;max-width:560px;background:var(--card-bg);color:var(--text);border-radius:12px;padding:16px;box-shadow:0 14px 40px rgba(0,0,0,0.2);transform:translateY(0);transition:transform .18s,opacity .18s}
  /* NEW: Auth Modal specific input styling */
  .auth-view input[type="text"], .auth-view input[type="password"], .auth-view input[type="email"] {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      color: var(--text);
      box-sizing: border-box; /* Crucial for full width inside padding */
  }
  /* NEW: Auth Tabs Styling */
  .small-btn {
      padding: 6px 12px;
      font-size: 0.9rem;
      border-radius: 6px;
  }
  .active-tab {
      background: var(--accent) !important;
      color: white !important;
      border-color: var(--accent) !important;
  }
  .auth-view .row label {
      display: block;
      text-align: left;
      margin-bottom: 5px;
      font-size: 0.95rem;
      font-weight: 600;
  }
  
  /* Added opacity transition to modal/welcome text elements */
  .modal h3, .modal p, .modal .changelog, .welcome h2, .welcome p, .welcome label, .welcome button, .modal h2, .modal h4 {
      transition: opacity 0.2s ease;
  }
  
  /* NEW: Admin Modal specific styles (input and buttons) */
  #adminTokenInput, #newsUpdateTextarea, #seoTitleInput, #seoDescTextarea, #seoKeywordsInput {
    /* Ensure they match the theme */
    border: 1px solid var(--border-color) !important;
    background: var(--card-bg) !important;
    color: var(--text) !important;
  }

  /* -------------------------
     Floating Discord button
     ------------------------- */
  .floating-chat{position:fixed;right:12px;bottom:12px;width:48px;height:48px;border-radius:50%;background:var(--discord-color);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.2);cursor:pointer;z-index:1500}
  .floating-chat img{width:24px;height:24px;border-radius:4px}

  /* -------------------------
     Toast message
     ------------------------- */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:70px;background:var(--toast-bg);color:#fff;padding:8px 12px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .18s,transform .18s;z-index:1600}
  
  /* NEW: Cookie Consent Banner */
  #cookieConsent {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card-bg);
      border-top: 1px solid var(--border-color);
      padding: 15px 20px;
      z-index: 1400;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease-in-out;
      transform: translateY(0);
  }
  #cookieConsent.hidden {
      transform: translateY(100%);
  }
  #cookieConsent p {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.4;
  }
  #cookieConsent button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      transition: opacity 0.15s, background 0.15s;
  }
  #cookieConsent button:hover {
      opacity: 0.9;
  }
  @media (max-width: 600px) {
      #cookieConsent {
          flex-direction: column;
          align-items: flex-start;
      }
      #cookieConsent button {
          width: 100%;
      }
      .controls {
          justify-content: space-between;
      }
      .controls button, .controls select {
          flex: 1 1 auto;
      }
  }

  /* ===========================
     PC/Desktop Optimizations (Min-width 600px)
     =========================== */
  @media (min-width: 600px) {
    /* Header/Nav kembali ke ukuran besar */
    .header-content {
        flex-wrap: nowrap;
        align-items: center;
        padding: 14px 20px;
    }
    /* Logo size PC */
    .brand-wrap img{width:46px;height:46px;border-radius:8px}
    /* H1 size PC */
    h1{font-size:1.4rem;}
    .brand-wrap > div > div { font-size: 0.85rem; }
    nav.primary {
        flex: 0 1 auto; 
        margin-top: 0;
        margin-left: 12px; 
        text-align: left;
    }
    nav.primary a{
        margin-left:12px;
        margin-right: 0;
        font-size: 1rem;
    }
    .controls{gap:10px; flex-wrap: nowrap;} /* Reset wrap on PC */
    /* Ukuran PC untuk semua tombol kontrol */
    .theme-toggle,.lang-select,.open-welcome, .report-bug-btn, #openAdmin, #openAuth, #openSettings {
        font-size:0.98rem;
        padding:8px 12px;
        border-radius: 10px;
    }

    /* Tombol Unduhan kembali ke layout 300px */
    .platform-buttons{gap:20px}
    .platform-buttons a{
      width:300px;
    }
    .platform-buttons a:hover{transform:translateY(-4px)}
    
    /* Shop Roles Grid PC */
    .shop-roles {
        grid-template-columns: repeat(3, minmax(200px, 1fr)); /* 3 columns on desktop */
    }
    /* On desktop, buttons can take up less space */
    .shop-role-card .purchase-buttons .btn-purchase {
        flex: 1 1 calc(33.33% - 7px); /* Allow up to 3 buttons per row on PC */
        min-width: 90px;
    }

    /* Banner/Content padding besar */
    .banner-section{padding:56px 20px;}
    .banner-section img{max-width:240px;border-radius:10px;}
    .banner-section h2{font-size:1.9rem;}
    .container{margin:48px auto;padding:0 18px}
    .container h2{font-size:1.6rem;margin-bottom:28px}
    .discord-section{padding:32px;margin:42px auto 60px;}

    /* Floating button kembali ke posisi normal */
    .floating-chat{right:18px;bottom:18px;width:56px;height:56px;}
    .floating-chat img{width:28px;height:28px;}
    .toast{bottom:86px;}
  }
</style>
</head>
<body data-theme="light">
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="brand-wrap">
          <img src="Growfax_banner.jpg" alt="Growfax Logo">
          <div>
            <h1>Growfax Official</h1>
            <div style="font-size:0.85rem;color:var(--muted)">Private Growtopia Server</div>
          </div>
        </div>

        <nav class="primary" aria-label="Main navigation">
          <a href="#downloads" id="navDownloads" class="active-nav">üì• Downloads</a> 
          <a href="#shop" id="navShop">üõí Shop</a>
          <a href="#news" id="navNews">üîî News</a>
        </nav>
      </div>

      <div class="controls">
        <a href="#" 
           id="reportBugLink" 
           class="report-bug-btn" 
           title="Report a Bug">üêû Report Bug</a>
        
        <button id="openAdmin" class="open-welcome" title="Admin Area">üîë Admin</button> 
        <button id="openAuth" class="open-welcome" title="Account">üë§ Account</button>
        <button id="openSettings" class="open-welcome" title="Welcome & Preferences">‚öôÔ∏è</button>
   
 
        <select id="langSelect" class="lang-select" title="Language" aria-label="Select language">
          <option value="en">üá¨üáß English</option>
          <option value="id">üáÆüá© Bahasa</option>
        </select>
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">üåû Light</button>
      </div>
    </div>
  </header>

  <section class="banner-section" role="region" aria-label="Main banner">
    <img src="Growfax_banner.jpg" alt="Growfax Banner">
    <h2>Welcome to Growfax</h2>
    <p>Private Growtopia Server</p>
    <div id="timeDisplay" class="time-display">Loading time...</div>
  </section>

  <main class="container" role="main">
    <section id="downloads" class="content-section">
        <h2>üì• Essential File Downloads</h2>
        <div class="platform-buttons" role="list">
          <a href="Growfax_VirtualHost.txt" class="btn-android" data-filename="Growfax_VirtualHost.txt" data-filekey="virtualhost" download role="listitem">
            <img src="virtual-host.png" alt="">Play on Android
          </a>

          <a href="Growfax_Patched_.bat" class="btn-windows" data-filename="Growfax_Patched_.bat" data-filekey="patched" download role="listitem">
            <img src="windows.png" alt="">Play on Windows
          </a>

          <a href="GrowFax_ios_config.txt" class="btn-ios" data-filename="GrowFax_ios_config.txt" data-filekey="ios" download role="listitem">
            <img src="surge5.png" alt="">Play on iOS
          </a>

          <a href="PowerTunnel_Host.txt" class="btn-powertunnel" data-filename="PowerTunnel_Host.txt" data-filekey="powertunnel" download role="listitem">
            <img src="powertunnel.jpeg" alt="">Play via PowerTunnel
          </a>
        </div>
    </section>

    <section id="shop" class="content-section hidden-section">
        <h2>üõí Growfax Server Roles</h2>
        <p style="margin-bottom: 24px;">Support the server and unlock exclusive roles! Direct purchase via PayPal.me.</p>
        
        <div class="shop-roles">
            <div class="shop-role-card" data-original="üëë Admin Server Role">
                <h3>üëë Admin Server Role</h3>
                <div class="price">$19.99 <small>USD / Lifetime</small></div>
                <div class="currency-display">
                    ‚Ç¨18.59 EUR | ¬£16.00 GBP
                </div>
                <ul>
                    <li><strong>Can sell role</strong> <span>Benefit for selling roles to players.</span></li>
                    <li><strong>Can sell title</strong> <span>Benefit for selling custom titles to players.</span></li>
                    <li><strong>Can sell All item with Real Trade</strong> <span>Allows selling all in-game items via Real Trade system.</span></li>
                </ul>
                <div class="purchase-buttons">
                    <a href="https://paypal.me/Growfax/19.99USD" target="_blank" class="btn-purchase btn-usd" data-original="Pay $USD">Pay $USD</a>
                    <a href="https://paypal.me/Growfax/18.59EUR" target="_blank" class="btn-purchase btn-eur" data-original="Pay ‚Ç¨EUR">Pay ‚Ç¨EUR</a>
                    <a href="https://paypal.me/Growfax/16.00GBP" target="_blank" class="btn-purchase btn-gbp" data-original="Pay ¬£GBP">Pay ¬£GBP</a>
                </div>
            </div>
            
            <div class="shop-role-card" data-original="‚≠ê Legend Role">
                <h3>‚≠ê Legend Role</h3>
                <div class="price">$9.99 <small>USD / Lifetime</small></div>
                <div class="currency-display">
                    A$15.00 AUD | S$13.50 SGD
                </div>
                <ul>
                    <li><strong>Command: /legendary</strong> <span>Spawn exclusive Legendary item once per day.</span></li>
                    <li><strong>Command: /vault</strong> <span>Access a personal, larger vault storage.</span></li>
                    <li><strong>Command: /fly</strong> <span>Toggle flight mode in public worlds.</span></li>
                </ul>
                <div class="purchase-buttons">
                    <a href="https://paypal.me/Growfax/9.99USD" target="_blank" class="btn-purchase btn-usd" data-original="Pay $USD">Pay $USD</a>
                    <a href="https://paypal.me/Growfax/15.00AUD" target="_blank" class="btn-purchase btn-aud" data-original="Pay A$AUD">Pay A$AUD</a>
                    <a href="https://paypal.me/Growfax/13.50SGD" target="_blank" class="btn-purchase btn-sgd" data-original="Pay S$SGD">Pay S$SGD</a>
                </div>
            </div>

            <div class="shop-role-card" data-original="üõ°Ô∏è Supporter Role">
                <h3>üõ°Ô∏è Supporter Role</h3>
                <div class="price">Rp 50.000 <small>IDR / Lifetime</small></div>
                <div class="currency-display">
                    $3.50 USD | $4.50 CAD
                </div>
                <ul>
                    <li><strong>Command: /rainbow</strong> <span>Access to rainbow-colored in-game text.</span></li>
                    <li><strong>Command: /saber</strong> <span>Receive a Supporter-exclusive Saber item.</span></li>
                    <li><strong>Chat Icon</strong> <span>Unique icon next to your name in chat.</span></li>
                </ul>
                <div class="purchase-buttons">
                    <a href="https://saweria.co/Growfax/50000" target="_blank" class="btn-purchase btn-idr" data-original="Bayar Rp IDR">Bayar Rp IDR</a>
                    <a href="https://paypal.me/Growfax/3.50USD" target="_blank" class="btn-purchase btn-usd" data-original="Pay $USD">Pay $USD</a>
                    <a href="https://paypal.me/Growfax/4.50CAD" target="_blank" class="btn-purchase btn-cad" data-original="Pay C$CAD">Pay C$CAD</a>
                </div>
            </div>
        </div>

    </section>

    <section id="news" class="content-section hidden-section">
        <h2>üîî Server News & Updates</h2>
        <div style="background: var(--card-bg); padding: 20px; border-radius: 12px; text-align: left; box-shadow: var(--card-shadow); max-width: 700px; margin: 0 auto;">
          <h3 style="margin-top: 0; color: var(--accent);" data-original="Latest Update:">Latest Update:</h3>
          <div id="newsContent">
            <p style="opacity: 0.8;">No recent news available.</p>
          </div>
        </div>
    </section>

    <div class="discord-section">
      <img src="discord.jpeg" alt="Discord Icon">
      <h3>Join Our Discord Community!</h3>
      <p>Need help or just want to chat? Join thousands of other players on our official Discord server.</p>
      <a href="https://discord.gg/smgS6sq83y" target="_blank" class="btn" style="background:white;color:var(--discord-color);padding:10px 20px;border-radius:8px;display:inline-block;margin-top:12px;font-weight:700">Join Discord</a>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Growfax Official. All Rights Reserved. Not affiliated with Ubisoft.</p>
  </footer>

  <div id="downloadModalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div id="downloadModal" class="modal">
      <h2 style="margin-top:0;" data-original="File info">File info</h2>
      <h4 id="modalFilename">Filename:</h4>
      <p style="opacity:0.9;" data-original="Details before download">Details before download</p>
      
      <div style="text-align:left;margin-top:15px;padding-top:15px;border-top:1px solid var(--border-color);">
        <p style="margin:5px 0 8px;font-weight:700;" data-original="Version">Version: <span id="modalVersion" style="font-weight:400;color:var(--accent);"></span></p>
        <p style="margin:5px 0 8px;font-weight:700;" data-original="Updated">Updated: <span id="modalUpdated" style="font-weight:400;color:var(--accent);"></span></p>
        <p style="margin:5px 0 8px;font-weight:700;" data-original="Changelog">Changelog: <span id="modalChangelog" style="font-weight:400;opacity:0.8;"></span></p>
        
        <div id="modalCopyBlock" style="margin-top: 15px; display: none;">
            <p style="margin:5px 0 8px;font-weight:700;">
                <span data-original="Copy Config">Salin Konfigurasi</span>:
                <button id="copyConfigButton" class="small-btn" style="background:var(--accent);color:white;border:none;margin-left:8px;" data-original="Copy Config">Copy Config</button>
            </p>
            <textarea id="modalCopyText" style="width:100%; height:150px; background:var(--glass); border:1px solid var(--border-color); color:var(--text); padding:8px; border-radius:6px; font-family: monospace; font-size: 0.9rem; resize: none;" readonly></textarea>
        </div>

      </div>

      <div style="margin-top:20px;">
        <button id="modalCancel" class="btn secondary" data-original="Cancel">Cancel</button>
        <a id="modalConfirm" href="#" class="btn primary" style="background:var(--accent);color:white;text-decoration:none;padding:10px 20px;border-radius:8px;display:inline-block;font-weight:700;margin-left:10px;" data-original="Download">Download</a>
      </div>
    </div>
  </div>

  <div id="welcomeBackdrop" class="welcome-backdrop" aria-hidden="true">
    <div id="welcomeModal" class="welcome">
        <h2 style="margin-top:0;" data-original="Welcome to Growfax">Welcome to Growfax</h2>
        <p style="opacity:0.8;margin-bottom:20px;">Set your preferred language and theme. We'll remember this for next time.</p>

        <div style="text-align:left;padding-bottom:15px;border-bottom:1px solid var(--border-color);">
            <label for="welcomeLang" style="font-weight:700;display:block;margin-bottom:5px;" data-original="Language">Language</label>
            <select id="welcomeLang" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color);background:var(--card-bg);color:var(--text);">
                <option value="en">üá¨üáß English</option>
                <option value="id">üáÆüá© Bahasa</option>
            </select>
        </div>

        <div style="text-align:left;padding-top:15px;">
            <p style="font-weight:700;margin:0 0 10px;" data-original="Theme">Theme</p>
            <div style="display:flex;gap:15px;">
                <label style="display:flex;align-items:center;cursor:pointer;">
                    <input type="radio" name="welcomeTheme" value="light" checked style="margin-right:8px;">
                    üåû Light
                </label>
                <label style="display:flex;align-items:center;cursor:pointer;">
                    <input type="radio" name="welcomeTheme" value="dark" style="margin-right:8px;">
                    üåô Dark
                </label>
            </div>
        </div>
        
        <div style="margin-top:30px;">
            <button id="welcomeSkip" class="btn secondary" data-original="Skip">Skip</button>
            <button id="welcomeSave" class="btn primary" style="background:var(--accent);color:white;padding:10px 20px;border-radius:8px;display:inline-block;font-weight:700;margin-left:10px;" data-original="Save & Continue">Save & Continue</button>
        </div>
    </div>
  </div>

  <div id="adminBackdrop" class="admin-backdrop" aria-hidden="true">
    <div id="adminModal" class="modal">
        <h2 id="adminTitle" style="margin-top:0;" data-original="Admin Area">Admin Area</h2>
        <div id="adminLogin">
            <p id="adminLoginPrompt" data-original="Enter the Admin Token to proceed:">Enter the Admin Token to proceed:</p>
            <input type="password" id="adminTokenInput" placeholder="Token" style="padding: 10px; width: 80%; max-width: 300px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text);">
            <button class="btn primary" id="adminTokenSubmit" style="margin-top: 10px; width: 80%; max-width: 300px;">Submit</button>
        </div>
        <div id="adminContent" style="display: none; padding-top: 10px;">
            <div style="margin-top: 15px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);">Server Status</h4>
                <p>Status: <strong id="serverStatusDisplay" style="color: var(--success);">Online</strong></p>
                <button class="btn danger" id="toggleServerStatus" data-original="Toggle Status (Simulate)">Toggle Status (Simulate)</button>
            </div>
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1‡§ï‡•ç‡§∑‡§ï solid var(--border-color);">
                <h4 id="analyticsTitle" style="margin: 0 0 10px; color: var(--accent);" data-original="Analytical Dashboard">Analytical Dashboard</h4>
                <p style="margin: 5px 0 10px;">
                    <span data-original="Total Downloads:">Total Downloads:</span> <strong id="totalDownloadsDisplay">0</strong>
                </p>
                <p style="margin: 10px 0 5px; font-weight: 700; font-size: 0.95rem;" data-original="Recent Activities:">Recent Activities:</p>
                <ul id="activitiesList" style="list-style-type: none; padding: 0; max-height: 150px; overflow-y: auto; text-align: left; font-size: 0.9rem;">
                    </ul>
                <button class="btn secondary" id="refreshAnalytics" style="margin-top: 10px; width: 100%;" data-original="Refresh Data">Refresh Data</button>
            </div>
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);" data-original="News & Updates">News & Updates</h4>
                <textarea id="newsUpdateTextarea" style="width: 100%; height: 100px; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text); resize: vertical; box-sizing: border-box;"></textarea>
                <button class="btn primary" id="saveNewsUpdate" style="margin-top: 10px; width: 100%;" data-original="Save News">Save News</button>
            </div>
            <div style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--glass); border: 1px solid var(--border-color);">
                <h4 style="margin: 0 0 10px; color: var(--accent);" data-original="SEO Management">SEO Management</h4>
                <label for="seoTitleInput" style="display:block;text-align:left;font-weight:600;margin-bottom:5px;" data-original="Page Title (Hanya Title Tag HTML)">Page Title (Hanya Title Tag HTML)</label>
                <input type="text" id="seoTitleInput" style="width: 100%; padding: 8px; border-radius: 6px; margin-bottom: 10px;" maxlength="70">
                <label for="seoDescTextarea" style="display:block;text-align:left;font-weight:600;margin-bottom:5px;" data-original="Meta Description">Meta Description</label>
                <textarea id="seoDescTextarea" style="width: 100%; height: 80px; padding: 8px; border-radius: 6px; margin-bottom: 10px; resize: vertical;" maxlength="160"></textarea>
                <label for="seoKeywordsInput" style="display:block;text-align:left;font-weight:600;margin-bottom:5px;" data-original="Meta Keywords (Comma-separated)">Meta Keywords (Comma-separated)</label>
                <input type="text" id="seoKeywordsInput" style="width: 100%; padding: 8px; border-radius: 6px; margin-bottom: 10px;">
                <button class="btn secondary" id="saveSeoMeta" style="width: 100%;" data-original="Update SEO Meta">Update SEO Meta</button>
            </div>
        </div>
        <div style="margin-top:20px;">
            <button id="closeAdmin" class="btn secondary" data-original="Close Admin Area">Close Admin Area</button>
        </div>
    </div>
  </div>

  <div id="authBackdrop" class="modal-backdrop" aria-hidden="true">
    <div id="authModal" class="modal auth-view">
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <button class="small-btn active-tab" id="authTabLogin" data-view="login" data-original="Login">Login</button>
            <button class="small-btn" id="authTabRegister" data-view="register" data-original="Register">Register</button>
            <button class="small-btn" id="authTabReset" data-view="reset" style="display:none;" data-original="Reset Password">Reset Password</button>
        </div>

        <div id="authLoginView">
            <h2 style="margin-top:0;font-size:1.4rem;" data-original="Welcome back! Please login to continue.">Welcome back! Please login to continue.</h2>
            <div class="row" style="margin-bottom:15px;">
                <label for="loginInput" data-original="Username or Email">Username or Email</label>
                <input type="text" id="loginInput">
            </div>
            <div class="row" style="margin-bottom:20px;">
                <label for="loginPassword" data-original="Password">Password</label>
                <input type="password" id="loginPassword">
            </div>
            <button id="loginSubmit" class="btn primary" style="background:var(--accent);color:white;width:100%;padding:10px;border-radius:8px;font-weight:700;" data-original="Login">Login</button>
            <a href="#" id="forgotPasswordLink" style="font-size:0.9rem;display:block;margin-top:15px;color:var(--accent);text-decoration:none;" data-original="Forgot Password?">Forgot Password?</a>
        </div>

        <div id="authRegisterView" style="display:none;">
            <h2 style="margin-top:0;font-size:1.4rem;" data-original="Join our community by creating an account.">Join our community by creating an account.</h2>
            <div class="row" style="margin-bottom:15px;">
                <label for="registerUsername" data-original="Username">Username</label>
                <input type="text" id="registerUsername">
            </div>
            <div class="row" style="margin-bottom:15px;">
                <label for="registerEmail" data-original="Email">Email</label>
                <input type="email" id="registerEmail">
            </div>
            <div class="row" style="margin-bottom:20px;">
                <label for="registerPassword" data-original="Password (Min 6 chars)">Password (Min 6 chars)</label>
                <input type="password" id="registerPassword">
            </div>
            <button id="registerSubmit" class="btn primary" style="background:var(--accent);color:white;width:100%;padding:10px;border-radius:8px;font-weight:700;" data-original="Create Account">Create Account</button>
        </div>

        <div id="authResetView" style="display:none;">
            <h2 style="margin-top:0;font-size:1.4rem;" data-original="Reset Password">Reset Password</h2>
            <p style="opacity:0.8;margin-bottom:20px;" data-original="Enter your email address and we will send you a password reset link.">Enter your email address and we will send you a password reset link.</p>
            <div class="row" style="margin-bottom:20px;">
                <label for="resetEmail" data-original="Email Address">Email Address</label>
                <input type="email" id="resetEmail">
            </div>
            <button id="resetSubmit" class="btn primary" style="background:var(--accent);color:white;width:100%;padding:10px;border-radius:8px;font-weight:700;" data-original="Send Reset Link">Send Reset Link</button>
            <a href="#" id="backToLoginLink" style="font-size:0.9rem;display:block;margin-top:15px;color:var(--accent);text-decoration:none;" data-original="Back to Login">Back to Login</a>
        </div>

        <button id="closeAuth" class="btn secondary" style="position: absolute; top: 10px; right: 10px;" data-original="Cancel">Cancel</button>
    </div>
  </div>

  <a id="floatingChat" class="floating-chat" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener" title="Open Discord">
    <img src="discord.jpeg" alt="Discord">
  </a>

  <div id="toast" class="toast" role="alert" aria-live="assertive"></div>
  
  <div id="cookieConsent" class="hidden">
    <p>We use cookies to ensure you get the best experience on our website. By continuing, you agree to our <a href="#" style="color:var(--accent); text-decoration: underline;">Privacy Policy</a>.</p>
    <button id="acceptCookies">I Accept</button>
  </div>

  <script>
// --- File references (from Admin Area) ---
const ADMIN_TOKEN = '1234'; // Simulated token
const adminBackdrop = document.getElementById('adminBackdrop');
const adminTitle = document.getElementById('adminTitle');
const adminLogin = document.getElementById('adminLogin');
const adminLoginPrompt = document.getElementById('adminLoginPrompt');
const adminTokenInput = document.getElementById('adminTokenInput');
const adminTokenSubmit = document.getElementById('adminTokenSubmit');
const adminContent = document.getElementById('adminContent');
const closeAdmin = document.getElementById('closeAdmin');
const serverStatusDisplay = document.getElementById('serverStatusDisplay');
const toggleServerStatus = document.getElementById('toggleServerStatus');
const newsUpdateTextarea = document.getElementById('newsUpdateTextarea');
const saveNewsUpdate = document.getElementById('saveNewsUpdate');
// Analytical Dashboard Refs
const analyticsTitle = document.getElementById('analyticsTitle');
const totalDownloadsDisplay = document.getElementById('totalDownloadsDisplay');
const activitiesList = document.getElementById('activitiesList');
const refreshAnalytics = document.getElementById('refreshAnalytics');
// SEO Refs
const seoTitleInput = document.getElementById('seoTitleInput');
const seoDescTextarea = document.getElementById('seoDescTextarea');
const seoKeywordsInput = document.getElementById('seoKeywordsInput');

// --- Global UI elements ---
const langSelect = document.getElementById('langSelect');
const themeToggle = document.getElementById('themeToggle');
const timeDisplay = document.getElementById('timeDisplay');
const downloadsSection = document.getElementById('downloads');
const shopSection = document.getElementById('shop');
const newsSection = document.getElementById('news');
const sections = document.querySelectorAll('.content-section');
const navLinks = document.querySelectorAll('nav.primary a');
// UPDATED: downloadButtons now includes ALL platform links
const downloadButtons = document.querySelectorAll('.platform-buttons a'); 
const modalBackdrop = document.getElementById('downloadModalBackdrop');
const modalFilename = document.getElementById('modalFilename');
const modalVersion = document.getElementById('modalVersion');
const modalUpdated = document.getElementById('modalUpdated');
const modalChangelog = document.getElementById('modalChangelog');
const modalConfirm = document.getElementById('modalConfirm');
const modalCancel = document.getElementById('modalCancel');
const modalCopyBlock = document.getElementById('modalCopyBlock');
const modalCopyText = document.getElementById('modalCopyText');
const copyConfigButton = document.getElementById('copyConfigButton');

// --- Welcome Modal Elements ---
const welcomeBackdrop = document.getElementById('welcomeBackdrop');
const openSettings = document.getElementById('openSettings');
const welcomeLang = document.getElementById('welcomeLang');
const welcomeSave = document.getElementById('welcomeSave');
const welcomeSkip = document.getElementById('welcomeSkip');

// --- Auth Modal Elements ---
const authBackdrop = document.getElementById('authBackdrop');
const openAuth = document.getElementById('openAuth');
const authTabLogin = document.getElementById('authTabLogin');
const authTabRegister = document.getElementById('authTabRegister');
const authTabReset = document.getElementById('authTabReset');
const loginInput = document.getElementById('loginInput');
const loginPassword = document.getElementById('loginPassword');
const loginSubmit = document.getElementById('loginSubmit');
const registerUsername = document.getElementById('registerUsername');
const registerEmail = document.getElementById('registerEmail');
const registerPassword = document.getElementById('registerPassword');
const registerSubmit = document.getElementById('registerSubmit');
const resetEmail = document.getElementById('resetEmail');
const resetSubmit = document.getElementById('resetSubmit');
const forgotPasswordLink = document.getElementById('forgotPasswordLink');
const backToLoginLink = document.getElementById('backToLoginLink');
const authModal = document.getElementById('authModal');
let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
let currentUsername = localStorage.getItem('currentUsername') || '';

// --- Admin/Global State ---
let serverIsOnline = true; // Simulated state
let totalDownloads = 4520; // Simulated count
let isAdminLoggedIn = localStorage.getItem('isAdminLoggedIn') === 'true';

/* =========================== Simulated Backend/Database (Local Storage) =========================== */
function getSimulatedUsers() {
    const users = JSON.parse(localStorage.getItem('growfax_users') || '[]');
    return users;
}
function saveSimulatedUsers(users) {
    localStorage.setItem('growfax_users', JSON.stringify(users));
}
function getActivities() {
    return JSON.parse(localStorage.getItem('growfax_activities') || '[]');
}
function addActivity(type, data) {
    const activities = getActivities();
    const newActivity = { type, data, timestamp: new Date().toISOString() };
    activities.unshift(newActivity); // Add to the front
    localStorage.setItem('growfax_activities', JSON.stringify(activities.slice(0, 50))); // Keep max 50
}
function saveNewsUpdateText(text) {
    localStorage.setItem('growfax_news', text);
}
function loadNewsUpdate() {
    const newsContent = document.getElementById('newsContent');
    const savedNews = localStorage.getItem('growfax_news');
    if (savedNews) {
        newsContent.innerHTML = savedNews;
    }
}
// Simulated file download counter (for dashboard only)
function incrementDownload(filekey) {
    totalDownloads++;
    localStorage.setItem('totalDownloads', totalDownloads);
    addActivity('download', filekey);
}

/* =========================== File Metadata (Config for Downloads) =========================== */
const FILE_META = {
    virtualhost: {
        version: "v4.2.1",
        updated: "2025-10-31",
        changelog: "Improved launch efficiency.",
        downloadUrl: "Growfax_VirtualHost.txt"
    },
    patched: {
        version: "v4.2.1",
        updated: "2025-10-31",
        changelog: "Improved launch efficiency.",
        downloadUrl: "Growfax_Patched_.bat" // Ensure downloadUrl is set for standard download
    },
    // UPDATED: Removed copytext and added downloadUrl
    ios: {
        version: "v1.1.0",
        updated: "2025-10-25",
        changelog: "Added support for Surge 5. Updated IP ke 91.134.85.13.",
        downloadUrl: "GrowFax_ios_config.txt"
    },
    // UPDATED: Removed copytext and added downloadUrl
    powertunnel: {
        version: "v2.0.0",
        updated: "2025-10-25",
        changelog: "Optimized for PowerTunnel v2. Updated IP ke 91.134.85.13.",
        downloadUrl: "PowerTunnel_Host.txt"
    }
};

/* =========================== Time Zone Update Function =========================== */
function updateTime() {
  const lang = langSelect.value;
  const timeDisplay = document.getElementById("timeDisplay");
  try {
    const now = new Date();
    const sydneyTime = now.toLocaleString("en-AU", {
      timeZone: "Australia/Sydney",
      hour12: false,
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    });
    
    // Determine greeting
    const hour = now.getHours();
    let greeting;
    if (hour < 10) greeting = 'Pagi'; // Before 10 AM
    else if (hour < 15) greeting = 'Siang'; // Before 3 PM
    else if (hour < 18) greeting = 'Sore'; // Before 6 PM
    else greeting = 'Malam'; // After 6 PM

    const t = translations[lang] || translations.en;
    const greetingKey = t[greeting] || greeting;
    const timeZoneLabel = t['Server Time (AEDT):'] || 'Server Time (Sydney):'; // Using AEDT to denote the timezone, which is Sydney's standard
    
    timeDisplay.textContent = `${greetingKey}, ${timeZoneLabel} ${sydneyTime}`;
  } catch (e) {
    timeDisplay.textContent = (translations[lang] && translations[lang]['Unable to load Sydney time.']) || "Unable to load Sydney time.";
  }
}

/* =========================== Translations =========================== */
const translations = {
    en: {
        "Pagi": "Morning",
        "Siang": "Afternoon",
        "Sore": "Evening",
        "Malam": "Night",
        "Admin Area": "Admin Area",
        "Enter the Admin Token to proceed:": "Enter the Admin Token to proceed:",
        "Login Admin berhasil": "Admin Login success",
        "Toggle Status (Simulate)": "Toggle Status (Simulate)",
        "Analytical Dashboard": "Analytical Dashboard",
        "Total Downloads:": "Total Downloads:",
        "Recent Activities:": "Recent Activities:",
        "Refresh Data": "Refresh Data",
        "News & Updates": "News & Updates",
        "Save News": "Save News",
        "SEO Management": "SEO Management",
        "Page Title (Hanya Title Tag HTML)": "Page Title (HTML Title Tag Only)",
        "Meta Description": "Meta Description",
        "Meta Keywords (Comma-separated)": "Meta Keywords (Comma-separated)",
        "Update SEO Meta": "Update SEO Meta",
        "Close Admin Area": "Close Admin Area",
        "Server Status changed.": "Server Status changed.",
        "News updated successfully.": "News updated successfully.",
        "SEO Meta updated successfully.": "SEO Meta updated successfully.",
        "Welcome to Growfax": "Welcome to Growfax",
        "Set your preferred language and theme. We'll remember this for next time.": "Set your preferred language and theme. We'll remember this for next time.",
        "Language": "Language",
        "Theme": "Theme",
        "Save & Continue": "Save & Continue",
        "Skip": "Skip",
        "Tutup Area Admin": "Close Admin Area",
        "Download initiated: ": "Download initiated: ",
        "Download failed: file not found.": "Download failed: file not found.",
        "Config copied!": "Config copied!",
        "Copy Config": "Copy Config",
        "Failed to copy. Please copy manually from the modal.": "Failed to copy. Please copy manually from the modal.",
        "Play on Android": "Play on Android",
        "Play on Windows": "Play on Windows",
        "Play on iOS": "Play on iOS",
        "Play via PowerTunnel": "Play via PowerTunnel",
        "Latest Update:": "Latest Update:",
        "Unable to load Sydney time.": "Unable to load Sydney time.",
        "Online": "Online",
        "Offline": "Offline",
        "Server Time (AEDT):": "Server Time (Sydney):", // Changed label for clarity
        "Version": "Version",
        "Updated": "Updated",
        "Changelog": "Changelog",
        "Filename": "Filename",
        "File info": "File info",
        "Details before download": "Details before download",
        "Cancel": "Cancel",
        "Download": "Download",
        "Shop": "üõí Shop",
        "News": "üîî News",
        "Essential File Downloads": "üì• Essential File Downloads",
        "Growfax Server Roles": "Growfax Server Roles",
        "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.": "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.",
        "Pay $USD": "Pay $USD",
        "Pay ‚Ç¨EUR": "Pay ‚Ç¨EUR",
        "Pay ¬£GBP": "Pay ¬£GBP",
        "Pay A$AUD": "Pay A$AUD",
        "Pay S$SGD": "Pay S$SGD",
        "Pay C$CAD": "Pay C$CAD",
        "Bayar Rp IDR": "Pay Rp IDR",
        "Opening PayPal for USD purchase": "Opening PayPal for USD purchase",
        "Opening PayPal for EUR purchase": "Opening PayPal for EUR purchase",
        "Opening PayPal for GBP purchase": "Opening PayPal for GBP purchase",
        "Opening PayPal for AUD purchase": "Opening PayPal for AUD purchase",
        "Opening PayPal for SGD purchase": "Opening PayPal for SGD purchase",
        "Opening PayPal for CAD purchase": "Opening PayPal for CAD purchase",
        "Opening Saweria for IDR purchase": "Opening Saweria for IDR purchase",
        "üëë Admin Server Role": "üëë Admin Server Role",
        "Can sell role": "Can sell role",
        "Benefit for selling roles to players.": "Benefit for selling roles to players.",
        "Can sell title": "Can sell title",
        "Benefit for selling custom titles to players.": "Benefit for selling custom titles to players.",
        "Can sell All item with Real Trade": "Can sell All item with Real Trade",
        "Allows selling all in-game items via Real Trade system.": "Allows selling all in-game items via Real Trade system.",
        "‚≠ê Legend Role": "‚≠ê Legend Role",
        "Command: /legendary": "Command: /legendary",
        "Spawn exclusive Legendary item once per day.": "Spawn exclusive Legendary item once per day.",
        "Command: /vault": "Command: /vault",
        "Access a personal, larger vault storage.": "Access a personal, larger vault storage.",
        "Command: /fly": "Command: /fly",
        "Toggle flight mode in public worlds.": "Toggle flight mode in public worlds.",
        "üõ°Ô∏è Supporter Role": "üõ°Ô∏è Supporter Role",
        "Command: /rainbow": "Command: /rainbow",
        "Access to rainbow-colored in-game text.": "Access to rainbow-colored in-game text.",
        "Command: /saber": "Command: /saber",
        "Receive a Supporter-exclusive Saber item.": "Receive a Supporter-exclusive Saber item.",
        "Chat Icon": "Chat Icon",
        "Unique icon next to your name in chat.": "Unique icon next to your name in chat.",
        " minute": [" minute"],
        " hour": [" hour"],
        " day": [" day"],
        " month": [" month"],
        " year": [" year"],
        "now": "just now",
        "Log out": "Log out", // NEW translation
        "Logged out.": "Logged out.", // NEW translation
        "‚ö†Ô∏è All SEO fields are required.": "‚ö†Ô∏è All SEO fields are required.", // NEW translation
        "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.": "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.", // NEW translation
        "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ": "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ", // NEW translation
        "Privacy Policy": "Privacy Policy", // NEW translation
        "I Accept": "I Accept", // NEW translation
        "Thank you for accepting cookies.": "Thank you for accepting cookies.", // NEW translation
        // --- NEW AUTH Translations ---
        "Account": "Account",
        "Login": "Login",
        "Register": "Register",
        "Welcome back! Please login to continue.": "Welcome back! Please login to continue.",
        "Username or Email": "Username or Email",
        "Password": "Password",
        "Forgot Password?": "Forgot Password?",
        "Join our community by creating an account.": "Join our community by creating an account.",
        "Username": "Username",
        "Email": "Email",
        "Password (Min 6 chars)": "Password (Min 6 chars)",
        "Create Account": "Create Account",
        "Reset Password": "Reset Password",
        "Enter your email address and we will send you a password reset link.": "Enter your email address and we will send you a password reset link.",
        "Email Address": "Email Address",
        "Back to Login": "Back to Login",
        "Send Reset Link": "Send Reset Link",
        "üëã Hi, ": "üëã Hi, ",
        "Login successful.": "Login successful.",
        "Registration successful.": "Registration successful.",
        "Welcome, ": "Welcome, ",
        "Username is already taken.": "Username is already taken.",
        "Email is already registered.": "Email is already registered.",
        "Invalid username or password.": "Invalid username or password.",
        "Username and Password are required.": "Username and Password are required.",
        "Username, Email, and Password (min 6 chars) are required.": "Username, Email, and Password (min 6 chars) are required.",
        "Password reset link sent to ": "Password reset link sent to ",
        "Email not registered.": "Email not registered.",
        "Invalid email address.": "Invalid email address.",
        "‚úÖ Config copied for iOS!": "‚úÖ Config copied for iOS!",
        "‚ùå Failed to copy iOS config.": "‚ùå Failed to copy iOS config.",
        "‚úÖ Config copied for PowerTunnel!": "‚úÖ Config copied for PowerTunnel!",
        "‚ùå Failed to copy PowerTunnel config.": "‚ùå Failed to copy PowerTunnel config.",
    },
    id: {
        "Pagi": "Pagi",
        "Siang": "Siang",
        "Sore": "Sore",
        "Malam": "Malam",
        "Admin Area": "Area Admin",
        "Enter the Admin Token to proceed:": "Masukkan Token Admin untuk melanjutkan:",
        "Login Admin berhasil": "Login Admin berhasil",
        "Toggle Status (Simulate)": "Ubah Status (Simulasi)",
        "Analytical Dashboard": "Dasbor Analitik",
        "Total Downloads:": "Total Unduhan:",
        "Recent Activities:": "Aktivitas Terbaru:",
        "Refresh Data": "Segarkan Data",
        "News & Updates": "Berita & Pembaruan",
        "Save News": "Simpan Berita",
        "SEO Management": "Manajemen SEO",
        "Page Title (Hanya Title Tag HTML)": "Judul Halaman (Hanya Tag Title HTML)",
        "Meta Description": "Deskripsi Meta",
        "Meta Keywords (Comma-separated)": "Kata Kunci Meta (Dipisahkan Koma)",
        "Update SEO Meta": "Perbarui Meta SEO",
        "Close Admin Area": "Tutup Area Admin",
        "Server Status changed.": "Status Server diubah.",
        "News updated successfully.": "Berita berhasil diperbarui.",
        "SEO Meta updated successfully.": "Meta SEO berhasil diperbarui.",
        "Welcome to Growfax": "Selamat Datang di Growfax",
        "Set your preferred language and theme. We'll remember this for next time.": "Atur bahasa dan tema pilihan Anda. Kami akan mengingatnya untuk kunjungan berikutnya.",
        "Language": "Bahasa",
        "Theme": "Tema",
        "Save & Continue": "Simpan & Lanjutkan",
        "Skip": "Lewati",
        "Tutup Area Admin": "Tutup Area Admin",
        "Download initiated: ": "Unduhan dimulai: ",
        "Download failed: file not found.": "Unduhan gagal: berkas tidak ditemukan.",
        "Config copied!": "Konfigurasi disalin!",
        "Copy Config": "Salin Konfigurasi",
        "Failed to copy. Please copy manually from the modal.": "Gagal menyalin. Silakan salin manual dari modal.",
        "Play on Android": "Main di Android",
        "Play on Windows": "Main di Windows",
        "Play on iOS": "Main di iOS",
        "Play via PowerTunnel": "Main via PowerTunnel",
        "Latest Update:": "Pembaruan Terbaru:",
        "Unable to load Sydney time.": "Gagal memuat waktu Sydney.",
        "Online": "Online",
        "Offline": "Offline",
        "Server Time (AEDT):": "Waktu Server (Sydney):", // Changed label for clarity
        "Version": "Versi",
        "Updated": "Diperbarui",
        "Changelog": "Catatan pembaruan",
        "Filename": "Nama berkas",
        "File info": "Info berkas",
        "Details before download": "Detail sebelum mengunduh",
        "Cancel": "Batal",
        "Download": "Unduh",
        "Shop": "üõí Toko",
        "News": "üîî Berita",
        "Essential File Downloads": "üì• Unduhan File Penting",
        "Growfax Server Roles": "Peran Server Growfax",
        "Support the server and unlock exclusive roles! Direct purchase via PayPal.me.": "Dukung server dan buka peran eksklusif! Pembelian langsung via PayPal.me.",
        "Pay $USD": "Bayar $USD",
        "Pay ‚Ç¨EUR": "Bayar ‚Ç¨EUR",
        "Pay ¬£GBP": "Bayar ¬£GBP",
        "Pay A$AUD": "Bayar A$AUD",
        "Pay S$SGD": "Bayar S$SGD",
        "Pay C$CAD": "Bayar C$CAD",
        "Bayar Rp IDR": "Bayar Rp IDR",
        "Opening PayPal for USD purchase": "Membuka PayPal untuk pembelian $USD",
        "Opening PayPal for EUR purchase": "Membuka PayPal untuk pembelian ‚Ç¨EUR",
        "Opening PayPal for GBP purchase": "Membuka PayPal untuk pembelian ¬£GBP",
        "Opening PayPal for AUD purchase": "Membuka PayPal untuk pembelian A$AUD",
        "Opening PayPal for SGD purchase": "Membuka PayPal untuk pembelian S$SGD",
        "Opening PayPal for CAD purchase": "Membuka PayPal untuk pembelian C$CAD",
        "Opening Saweria for IDR purchase": "Membuka Saweria untuk pembelian Rp IDR",
        "üëë Admin Server Role": "üëë Peran Admin Server",
        "Can sell role": "Bisa menjual peran",
        "Benefit for selling roles to players.": "Keuntungan dari menjual peran kepada pemain.",
        "Can sell title": "Bisa menjual gelar",
        "Benefit for selling custom titles to players.": "Keuntungan dari menjual gelar kustom kepada pemain.",
        "Can sell All item with Real Trade": "Bisa menjual semua item dengan Real Trade",
        "Allows selling all in-game items via Real Trade system.": "Memungkinkan menjual semua item dalam game melalui sistem Real Trade.",
        "‚≠ê Legend Role": "‚≠ê Peran Legenda",
        "Command: /legendary": "Perintah: /legendary",
        "Spawn exclusive Legendary item once per day.": "Memunculkan item Legendaris eksklusif sekali sehari.",
        "Command: /vault": "Perintah: /vault",
        "Access a personal, larger vault storage.": "Akses penyimpanan vault pribadi yang lebih besar.",
        "Command: /fly": "Perintah: /fly",
        "Toggle flight mode in public worlds.": "Mengaktifkan/menonaktifkan mode terbang di dunia publik.",
        "üõ°Ô∏è Supporter Role": "üõ°Ô∏è Peran Pendukung",
        "Command: /rainbow": "Perintah: /rainbow",
        "Access to rainbow-colored in-game text.": "Akses ke teks dalam game berwarna pelangi.",
        "Command: /saber": "Perintah: /saber",
        "Receive a Supporter-exclusive Saber item.": "Menerima item Saber eksklusif Pendukung.",
        "Chat Icon": "Ikon Obrolan",
        "Unique icon next to your name in chat.": "Ikon unik di sebelah nama Anda di obrolan.",
        " minute": [" menit"],
        " hour": [" jam"],
        " day": [" hari"],
        " month": [" bulan"],
        " year": [" tahun"],
        "now": "baru saja",
        "Log out": "Keluar", // NEW translation
        "Logged out.": "Berhasil Keluar.", // NEW translation
        "‚ö†Ô∏è All SEO fields are required.": "‚ö†Ô∏è Semua bidang SEO wajib diisi.", // NEW translation
        "‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.": "‚ö†Ô∏è Judul (maks 70 kar.) dan Deskripsi (maks 160 kar.) terlalu panjang.", // NEW translation
        "We use cookies to ensure you get the best experience on our website. By continuing, you agree to our ": "Kami menggunakan cookie untuk memastikan Anda mendapatkan pengalaman terbaik di website kami. Dengan melanjutkan, Anda menyetujui ", // NEW translation
        "Privacy Policy": "Kebijakan Privasi", // NEW translation
        "I Accept": "Saya Terima", // NEW translation
        "Thank you for accepting cookies.": "Terima kasih telah menerima cookie.", // NEW translation
        // --- NEW AUTH Translations ---
        "Account": "Akun",
        "Login": "Masuk",
        "Register": "Daftar",
        "Welcome back! Please login to continue.": "Selamat datang kembali! Silakan masuk untuk melanjutkan.",
        "Username or Email": "Nama Pengguna atau Email",
        "Password": "Kata Sandi",
        "Forgot Password?": "Lupa Kata Sandi?",
        "Join our community by creating an account.": "Bergabunglah dengan komunitas kami dengan membuat akun.",
        "Username": "Nama Pengguna",
        "Email": "Email",
        "Password (Min 6 chars)": "Kata Sandi (Min 6 kar.)",
        "Create Account": "Buat Akun",
        "Reset Password": "Atur Ulang Kata Sandi",
        "Enter your email address and we will send you a password reset link.": "Masukkan alamat email Anda dan kami akan mengirimkan tautan atur ulang kata sandi.",
        "Email Address": "Alamat Email",
        "Back to Login": "Kembali ke Masuk",
        "Send Reset Link": "Kirim Tautan Atur Ulang",
        "üëã Hi, ": "üëã Hai, ",
        "Login successful.": "Login berhasil.",
        "Registration successful.": "Pendaftaran berhasil.",
        "Welcome, ": "Selamat datang, ",
        "Username is already taken.": "Nama pengguna sudah dipakai.",
        "Email is already registered.": "Email sudah terdaftar.",
        "Invalid username or password.": "Nama pengguna atau kata sandi tidak valid.",
        "Username and Password are required.": "Nama Pengguna dan Kata Sandi wajib diisi.",
        "Username, Email, and Password (min 6 chars) are required.": "Nama Pengguna, Email, dan Kata Sandi (min 6 kar.) wajib diisi.",
        "Password reset link sent to ": "Tautan reset kata sandi dikirim ke ",
        "Email not registered.": "Email tidak terdaftar.",
        "Invalid email address.": "Alamat email tidak valid.",
        "‚úÖ Config copied for iOS!": "‚úÖ Konfig disalin untuk iOS!",
        "‚ùå Failed to copy iOS config.": "‚ùå Gagal menyalin konfig iOS.",
        "‚úÖ Config copied for PowerTunnel!": "‚úÖ Konfig disalin untuk PowerTunnel!",
        "‚ùå Failed to copy PowerTunnel config.": "‚ùå Gagal menyalin konfig PowerTunnel.",
    }
};

/* =========================== Local Storage & SEO Functions =========================== */
function loadTheme() {
    const savedTheme = localStorage.getItem('growfax_theme');
    const lang = langSelect.value;
    const t = translations[lang];
    const lightText = t['üåû Light'] || 'üåû Light';
    const darkText = t['üåô Dark'] || 'üåô Dark';

    if (savedTheme) {
        document.body.setAttribute('data-theme', savedTheme);
        themeToggle.textContent = savedTheme === 'dark' ? lightText : darkText;
    } else {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.setAttribute('data-theme', 'dark');
            themeToggle.textContent = lightText;
        } else {
            document.body.setAttribute('data-theme', 'light');
            themeToggle.textContent = darkText;
        }
    }
}
function loadLang() {
    const savedLang = localStorage.getItem('growfax_lang');
    if (savedLang) {
        langSelect.value = savedLang;
        welcomeLang.value = savedLang;
        applyTranslations(savedLang);
    }
}
function loadSeoSettings() {
    const savedTitle = localStorage.getItem('seo_title');
    const savedDesc = localStorage.getItem('seo_desc');
    const savedKeywords = localStorage.getItem('seo_keywords');
    if (savedTitle) {
        document.title = savedTitle;
        seoTitleInput.value = savedTitle;
    }
    if (savedDesc) {
        document.querySelector('meta[name="description"]').setAttribute('content', savedDesc);
        seoDescTextarea.value = savedDesc;
    }
    if (savedKeywords) {
        document.querySelector('meta[name="keywords"]').setAttribute('content', savedKeywords);
        seoKeywordsInput.value = savedKeywords;
    }
}

// =========================== Helper Functions ===========================
function showToast(message, duration = 3000) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.style.opacity = '1';
    toast.style.transform = 'translate(-50%, -10px)';
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translate(-50%, 0)';
    }, duration);
}
function timeAgo(dateString) {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    const now = new Date();
    const past = new Date(dateString);
    const seconds = Math.floor((now - past) / 1000);

    if (seconds < 60) return t['now'];

    const intervals = [
        { key: t[' year'][0], seconds: 31536000 },
        { key: t[' month'][0], seconds: 2592000 },
        { key: t[' day'][0], seconds: 86400 },
        { key: t[' hour'][0], seconds: 3600 },
        { key: t[' minute'][0], seconds: 60 }
    ];

    for (let i = 0; i < intervals.length; i++) {
        const interval = intervals[i];
        const count = Math.floor(seconds / interval.seconds);
        if (count >= 1) {
            return count + interval.key + (t[' ago'] || ' ago');
        }
    }
    return t['now'];
}
function renderAnalyticsDashboard() {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    
    // Update total downloads (simulated)
    const savedDownloads = localStorage.getItem('totalDownloads');
    if (savedDownloads) totalDownloads = parseInt(savedDownloads);
    totalDownloadsDisplay.textContent = totalDownloads.toLocaleString();

    // Update activities
    const activities = getActivities();
    activitiesList.innerHTML = '';
    activities.forEach(activity => {
        const li = document.createElement('li');
        let text = '';
        if (activity.type === 'download') {
            text = (t['Download initiated: '] || 'Download initiated: ') + activity.data;
        } else if (activity.type === 'purchase') {
            text = (t['Shop purchase: '] || 'Shop purchase: ') + activity.data;
        } else if (activity.type === 'login') {
            text = activity.data; // Already translated "User [x] logged in"
        } else if (activity.type === 'register') {
            text = activity.data; // Already translated
        }
        li.textContent = `${text} (${timeAgo(activity.timestamp)})`;
        activitiesList.appendChild(li);
    });

    // Update dynamic text on toggle button
    toggleServerStatus.textContent = serverIsOnline 
        ? (t['Toggle Status (Simulate)'] || 'Toggle Status (Simulate)') 
        : (t['Toggle Status (Simulate)'] || 'Toggle Status (Simulate)'); // Placeholder text is the same
    
    // Update server status display
    serverStatusDisplay.textContent = serverIsOnline 
        ? (lang === 'id' ? translations.id['Online'] : 'Online') 
        : (lang === 'id' ? translations.id['Offline'] : 'Offline');

    // Update admin logout button text
    const logoutBtn = document.getElementById('adminLogout');
    if (logoutBtn) {
        logoutBtn.textContent = lang === 'id' 
            ? (translations.id['Log out'] || 'Keluar') 
            : 'Logout';
    }
}
// NEW: Update Auth UI dynamic texts (e.g., Hi, [Username])
function updateAuthUI(lang) {
    const t = translations[lang] || translations.en;
    if (isLoggedIn && currentUsername) {
        openAuth.textContent = `${t['üëã Hi, ']}${currentUsername}`;
        // Change title to reflect logout option
        openAuth.title = t['Log out'] || 'Log out';
        openAuth.onclick = logoutUser;
        // Set click action to logout
        openAuth.classList.remove('open-welcome');
        openAuth.classList.add('report-bug-btn', 'logged-in-user'); // Use similar style but highlight
    } else {
        openAuth.textContent = 'üë§ ' + (t['Account'] || 'Akun');
        openAuth.title = t['Account'] || 'Akun';
        openAuth.onclick = () => { showAuthModal('login'); };
        // Set click action to open login modal
        openAuth.classList.add('open-welcome');
        openAuth.classList.remove('report-bug-btn', 'logged-in-user');
    }
}
function applyTranslations(lang) {
    const transitionDuration = 200; // 200 ms
    const elementsToTranslate = document.querySelectorAll('[data-original], #modalCancel, #modalConfirm, #welcomeSave, #welcomeSkip, #openSettings');
    const t = translations[lang] || translations.en;

    // 1. Fade out (Opacity 0) and hide
    elementsToTranslate.forEach(el => { el.style.opacity = '0'; });
    document.body.style.opacity = '0';

    setTimeout(() => {
        // 2. Apply text changes
        document.querySelector('h1').textContent = t['Growfax Official'] || 'Growfax Official';
        document.querySelector('.banner-section h2').textContent = t['Welcome to Growfax'] || 'Welcome to Growfax';
        document.querySelector('.banner-section p').textContent = t['Private Growtopia Server'] || 'Private Growtopia Server';
        document.querySelector('a[href="#downloads"]').textContent = t['üì• Downloads'] || 'üì• Downloads';
        document.querySelector('a[href="#shop"]').textContent = t['üõí Shop'] || 'üõí Shop';
        document.querySelector('a[href="#news"]').textContent = t['üîî News'] || 'üîî News';
        document.querySelector('.discord-section h3').textContent = t['Join Our Discord Community!'] || 'Join Our Discord Community!';
        document.querySelector('.discord-section p').textContent = t['Need help or just want to chat? Join thousands of other players on our official Discord server.'] || 'Need help or just want to chat? Join thousands of other players on our official Discord server.';
        document.querySelector('.discord-section a').textContent = t['Join Discord'] || 'Join Discord';
        document.querySelector('#navDownloads').textContent = t['üì• Downloads'] || 'üì• Downloads';
        document.querySelector('#reportBugLink').textContent = t['üêû Report Bug'] || 'üêû Report Bug';
        
        // Update other controls/buttons
        openSettings.title = t['Welcome & Preferences'] || 'Welcome & Preferences';
        document.getElementById('openAdmin').title = t['Admin Area'] || 'Admin Area';
        document.getElementById('openAuth').title = t['Account'] || 'Account';
        document.getElementById('adminTokenInput').placeholder = t['Token'] || 'Token';
        document.getElementById('adminTokenSubmit').textContent = t['Submit'] || 'Submit';
        document.getElementById('closeAuth').textContent = t['Cancel'] || 'Cancel';

        // Update theme toggle text
        loadTheme();
        
        // Update all elements with data-original
        elementsToTranslate.forEach(el => {
            const originalText = el.getAttribute('data-original');
            if (originalText && t[originalText]) {
                el.textContent = t[originalText];
            } else if (el.id === 'modalCancel') {
                el.textContent = t['Cancel'] || 'Cancel';
            } else if (el.id === 'modalConfirm') {
                el.textContent = t['Download'] || 'Download';
            }
        });

        // Update shop buttons
        const usdButtons = document.querySelectorAll('.btn-usd');
        const eurButtons = document.querySelectorAll('.btn-eur');
        const gbpButtons = document.querySelectorAll('.btn-gbp');
        const audButtons = document.querySelectorAll('.btn-aud');
        const sgdButtons = document.querySelectorAll('.btn-sgd');
        const cadButtons = document.querySelectorAll('.btn-cad');
        const idrButtons = document.querySelectorAll('.btn-idr');

        usdButtons.forEach(btn => { btn.textContent = t['Pay $USD'] || 'Pay $USD'; });
        eurButtons.forEach(btn => { btn.textContent = t['Pay ‚Ç¨EUR'] || 'Pay ‚Ç¨EUR'; });
        gbpButtons.forEach(btn => { btn.textContent = t['Pay ¬£GBP'] || 'Pay ¬£GBP'; });
        audButtons.forEach(btn => { btn.textContent = t['Pay A$AUD'] || 'Pay A$AUD'; });
        sgdButtons.forEach(btn => { btn.textContent = t['Pay S$SGD'] || 'Pay S$SGD'; });
        cadButtons.forEach(btn => { btn.textContent = t['Pay C$CAD'] || 'Pay C$CAD'; });
        idrButtons.forEach(btn => { btn.textContent = t['Bayar Rp IDR'] || 'Bayar Rp IDR'; });

        // Update cookie banner button
        document.getElementById('acceptCookies').textContent = t['I Accept'] || 'Saya Terima';

        // Update Auth UI after translations are loaded
        updateAuthUI(lang);
        
        // Update Admin UI dynamic elements
        if (isAdminLoggedIn) {
            updateAdminUI(lang);
            renderAnalyticsDashboard(); // Render dashboard content in new language
        }
        
        // 3. Fade back in (Opacity 1)
        elementsToTranslate.forEach(el => { el.style.opacity = '1'; });
        document.body.style.opacity = '1';

    }, transitionDuration);
}
// NEW: Admin UI translation helper
function updateAdminUI(lang) {
    const t = translations[lang] || translations.en;
    document.getElementById('adminLoginPrompt').textContent = isAdminLoggedIn
        ? (t['Tutup Area Admin'] || 'Close Admin Area')
        : (t['Enter the Admin Token to proceed:'] || 'Enter the Admin Token to proceed:');
}

/* =========================== SPA Section Navigation (NEW FEATURE) =========================== */
function showSection(sectionId) {
    const transitionDuration = 400;

    // 1. Fade out current section and hide
    sections.forEach(sec => {
        if (!sec.classList.contains('hidden-section')) {
            sec.classList.add('fading-out');
        }
    });

    setTimeout(() => {
        sections.forEach(sec => {
            sec.classList.add('hidden-section');
            sec.classList.remove('fading-out');
        });

        // 2. Show target section and fade in
        const targetSection = document.querySelector(sectionId);
        if (targetSection) {
            targetSection.classList.remove('hidden-section');
            // Give a moment for the display:block to apply before fading in
            setTimeout(() => {
                targetSection.classList.remove('fading-out');
            }, 50); 
        }

        // 3. Update navigation active state
        navLinks.forEach(link => {
            link.classList.remove('active-nav');
            if (link.getAttribute('href') === sectionId) {
                link.classList.add('active-nav');
            }
        });
        
        // 4. Update URL hash
        if (history.pushState) {
            history.pushState(null, null, sectionId);
        } else {
            window.location.hash = sectionId;
        }

    }, transitionDuration);
}
function handleUrlHash() {
    const hash = window.location.hash;
    if (hash && document.querySelector(hash + '.content-section')) {
        showSection(hash);
    } else {
        showSection('#downloads'); // Default view
    }
}
navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        showSection(link.getAttribute('href'));
    });
});
window.addEventListener('hashchange', handleUrlHash);

/* =========================== Theme Toggle Logic =========================== */
themeToggle.addEventListener('click', () => {
    const currentTheme = document.body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.body.setAttribute('data-theme', newTheme);
    localStorage.setItem('growfax_theme', newTheme);
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    if (newTheme === 'dark') {
        themeToggle.textContent = t['üåû Light'] || 'üåû Light';
    } else {
        themeToggle.textContent = t['üåô Dark'] || 'üåô Dark';
    }
});

/* =========================== Language Selector Logic =========================== */
langSelect.addEventListener('change', (e) => {
    const newLang = e.target.value;
    localStorage.setItem('growfax_lang', newLang);
    welcomeLang.value = newLang; // Sync welcome modal
    applyTranslations(newLang);
    updateTime();
});

/* =========================== Download/Modal Logic (COMBINED HANDLER) =========================== */
// Handle download button clicks (Now handles all 4 buttons)
downloadButtons.forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        const filename = button.getAttribute('data-filename');
        const filekey = button.getAttribute('data-filekey');
        const meta = FILE_META[filekey];
        const lang = langSelect.value;

        // Check if file metadata exists for modal info
        if (!meta || !meta.downloadUrl) {
            showToast(lang === 'id' ? (translations.id['Download failed: file not found.'] || 'Unduhan gagal: berkas tidak ditemukan.') : 'Download failed: file not found.', 3000);
            return;
        }

        // Populate modal with file info
        modalFilename.textContent = (translations[lang] && translations[lang]['Filename'] || 'Filename') + ': ' + filename;
        modalVersion.textContent = meta.version;
        modalUpdated.textContent = meta.updated;
        modalChangelog.textContent = meta.changelog;

        // Hide copy block and show download button for ALL downloads now
        modalCopyBlock.style.display = 'none';
        modalConfirm.style.display = 'inline-block';

        // Set download link
        modalConfirm.setAttribute('href', meta.downloadUrl);
        modalConfirm.onclick = () => {
            incrementDownload(filekey);
            showToast((translations[lang] && translations[lang]['Download initiated: '] || 'Download initiated: ') + filename, 2000);
            // Optionally close the modal after a short delay for UX
            setTimeout(() => {
                modalBackdrop.style.display = 'none';
                modalBackdrop.setAttribute('aria-hidden', 'true');
            }, 500);
            return true; // Proceed with download
        };

        // Show modal
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden', 'false');
    });
});

// Close modal on cancel or backdrop click
modalCancel.addEventListener('click', () => {
    modalBackdrop.style.display = 'none';
    modalBackdrop.setAttribute('aria-hidden', 'true');
    modalConfirm.style.display = 'inline-block'; // Reset download button visibility
});
modalBackdrop.addEventListener('click', (e) => {
    if (e.target.id === 'downloadModalBackdrop') {
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden', 'true');
        modalConfirm.style.display = 'inline-block'; // Reset download button visibility
    }
});

/* =========================== Welcome Modal Logic =========================== */
function openWelcomeModal() {
    welcomeBackdrop.style.display = 'flex';
    welcomeBackdrop.setAttribute('aria-hidden', 'false');
    // Ensure modal's selected language matches current lang
    welcomeLang.value = langSelect.value;
    // Ensure modal's selected theme matches current theme
    const currentTheme = document.body.getAttribute('data-theme') || 'light';
    document.querySelector(`input[name="welcomeTheme"][value="${currentTheme}"]`).checked = true;
}
openSettings.addEventListener('click', openWelcomeModal);
welcomeSkip.addEventListener('click', () => {
    welcomeBackdrop.style.display = 'none';
    welcomeBackdrop.setAttribute('aria-hidden', 'true');
});
welcomeSave.addEventListener('click', () => {
    const lang = welcomeLang.value;
    const theme = document.querySelector('input[name="welcomeTheme"]:checked').value;
    
    // 1. Save preferences
    localStorage.setItem('growfax_lang', lang);
    localStorage.setItem('growfax_theme', theme);

    // 2. Apply theme
    document.body.setAttribute('data-theme', theme);
    
    // 3. Apply translations (calls loadTheme/updateTime internally if needed)
    langSelect.value = lang;
    applyTranslations(lang);
    updateTime();
    loadTheme(); // Re-apply theme toggle text with correct language

    // 4. Hide modal
    welcomeBackdrop.style.display = 'none';
    welcomeBackdrop.setAttribute('aria-hidden', 'true');
});


/* =========================== Auth Modal Logic (NEW FEATURE) =========================== */
function showAuthModal(view = 'login') {
    authBackdrop.style.display = 'flex';
    authBackdrop.setAttribute('aria-hidden', 'false');
    switchAuthView(view);
}
function hideAuthModal() {
    authBackdrop.style.display = 'none';
    authBackdrop.setAttribute('aria-hidden', 'true');
}
function switchAuthView(view) {
    document.getElementById('authLoginView').style.display = 'none';
    document.getElementById('authRegisterView').style.display = 'none';
    document.getElementById('authResetView').style.display = 'none';
    authTabLogin.style.display = 'inline-block';
    authTabRegister.style.display = 'inline-block';
    authTabReset.style.display = 'none'; // Hide reset tab button by default
    
    // Reset active tab class
    authTabLogin.classList.remove('active-tab');
    authTabRegister.classList.remove('active-tab');
    
    // Show the requested view
    if (view === 'login') {
        document.getElementById('authLoginView').style.display = 'block';
        authTabLogin.classList.add('active-tab');
    } else if (view === 'register') {
        document.getElementById('authRegisterView').style.display = 'block';
        authTabRegister.classList.add('active-tab');
    } else if (view === 'reset') {
        document.getElementById('authResetView').style.display = 'block';
        authTabReset.style.display = 'inline-block';
    }
}
function logoutUser() {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('currentUsername');
    isLoggedIn = false;
    currentUsername = '';
    updateAuthUI(lang);
    showToast(t['Logged out.'] || 'Logged out.', 2000);
    // Reset admin login state too
    localStorage.removeItem('isAdminLoggedIn');
    isAdminLoggedIn = false;
}
// Event listeners for switching views
authTabLogin.addEventListener('click', () => switchAuthView('login'));
authTabRegister.addEventListener('click', () => switchAuthView('register'));
forgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); switchAuthView('reset'); });
backToLoginLink.addEventListener('click', (e) => { e.preventDefault(); switchAuthView('login'); });
document.getElementById('closeAuth').addEventListener('click', hideAuthModal);
authBackdrop.addEventListener('click', (e) => {
    if (e.target.id === 'authBackdrop') {
        hideAuthModal();
    }
});
// Attach logout to a dynamically created button if logged in (handled by updateAuthUI)
// If logged in, openAuth button acts as logout. Otherwise, it opens the modal.

// Simulated Registration Logic
registerSubmit.addEventListener('click', () => {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    const username = registerUsername.value.trim();
    const email = registerEmail.value.trim();
    const password = registerPassword.value.trim();
    const users = getSimulatedUsers();

    if (!username || !email || password.length < 6) {
        showToast(t['Username, Email, and Password (min 6 chars) are required.'] || 'Username, Email, and Password (min 6 chars) are required.', 3000);
        return;
    }
    if (users.some(user => user.username === username)) {
        showToast(t['Username is already taken.'] || 'Username is already taken.', 3000);
        return;
    }
    if (users.some(user => user.email === email)) {
        showToast(t['Email is already registered.'] || 'Email is already registered.', 3000);
        return;
    }

    const newUser = { username, email, password: btoa(password), registered: new Date().toISOString() };
    users.push(newUser);
    saveSimulatedUsers(users);

    // Auto-login after registration
    localStorage.setItem('isLoggedIn', 'true');
    localStorage.setItem('currentUsername', username);
    isLoggedIn = true;
    currentUsername = username;
    
    addActivity('register', `User ${username} registered.`);
    hideAuthModal();
    updateAuthUI(lang);
    showToast(t['Registration successful.'] + ' ' + t['Welcome, '] + username, 3000);
});

// Simulated Login Logic
loginSubmit.addEventListener('click', () => {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    const input = loginInput.value.trim(); // Can be username or email
    const password = loginPassword.value.trim();
    const users = getSimulatedUsers();

    if (!input || !password) {
        showToast(t['Username and Password are required.'] || 'Username and Password are required.', 3000);
        return;
    }

    const user = users.find(u => u.username === input || u.email === input );

    if (user && user.password === btoa(password)) {
        // Login successful
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('currentUsername', user.username);
        isLoggedIn = true;
        currentUsername = user.username;
        addActivity('login', `User ${user.username} logged in.`);
        hideAuthModal();
        updateAuthUI(lang);
        showToast(t['Login successful.'] + ' ' + t['Welcome, '] + user.username, 3000);
    } else {
        showToast(t['Invalid username or password.'] || 'Nama pengguna atau kata sandi tidak valid.', 3000);
    }
});

// Forgot Password Logic
resetSubmit.addEventListener('click', () => {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    const email = resetEmail.value.trim();
    const users = getSimulatedUsers();

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showToast(t['Invalid email address.'] || 'Alamat email tidak valid.', 3000);
        return;
    }
    
    if (users.some(user => user.email === email)) {
        hideAuthModal();
        showToast(t['Password reset link sent to '] + email, 4000); // Simulated send
    } else {
        showToast(t['Email not registered.'] || 'Email not registered.', 3000);
    }
});


/* =========================== Admin Dashboard Logic (ENHANCED with Logout) =========================== */
const adminLogout = document.createElement('button');
adminLogout.id = 'adminLogout';
adminLogout.className = 'btn secondary';
adminLogout.textContent = isAdminLoggedIn 
    ? (langSelect.value === 'id' ? (translations.id['Log out'] || 'Keluar') : 'Logout') 
    : '';
adminLogout.style.position = 'absolute';
adminLogout.style.top = '10px';
adminLogout.style.right = '70px'; // Adjusted
adminLogout.style.display = isAdminLoggedIn ? 'block' : 'none';
adminModal.appendChild(adminLogout); // Append logout button to the modal

adminLogout.addEventListener('click', () => {
    localStorage.removeItem('isAdminLoggedIn');
    isAdminLoggedIn = false;
    adminContent.style.display = 'none';
    adminTokenInput.value = '';
    adminLogout.style.display = 'none';
    updateAdminUI(langSelect.value);
    showToast('Admin logged out.', 2000);
    // After logging out, show the login form
    adminLogin.style.display = 'block';
});

document.getElementById('openAdmin').addEventListener('click', () => {
    const lang = langSelect.value;
    adminBackdrop.style.display = 'flex';
    adminBackdrop.setAttribute('aria-hidden', 'false');
    
    if (isAdminLoggedIn) {
        adminLogin.style.display = 'none';
        adminContent.style.display = 'block';
        adminLogout.style.display = 'block';
        renderAnalyticsDashboard();
    } else {
        adminLogin.style.display = 'block';
        adminContent.style.display = 'none';
        adminLogout.style.display = 'none';
    }
    updateAdminUI(lang);
});

closeAdmin.addEventListener('click', () => {
    adminBackdrop.style.display = 'none';
    adminBackdrop.setAttribute('aria-hidden', 'true');
});

adminBackdrop.addEventListener('click', (e) => {
    if (e.target.id === 'adminBackdrop') {
        adminBackdrop.style.display = 'none';
        adminBackdrop.setAttribute('aria-hidden', 'true');
    }
});

adminTokenSubmit.addEventListener('click', () => {
    const token = adminTokenInput.value;
    const lang = langSelect.value;
    if (token === ADMIN_TOKEN) {
        adminLogin.style.display = 'none';
        adminContent.style.display = 'block';
        isAdminLoggedIn = true; // NEW: Set session flag
        localStorage.setItem('isAdminLoggedIn', 'true'); // NEW: Persist login
        adminLogout.style.display = 'block'; // Show logout button
        renderAnalyticsDashboard();
        showToast(lang === 'id' ? (translations.id['Login Admin berhasil'] || 'Login Admin berhasil') : 'Admin Login success', 2000);
    } else {
        showToast('Invalid Token.', 2000);
    }
});

// Admin Server Status Toggle Logic
toggleServerStatus.addEventListener('click', () => {
    serverIsOnline = !serverIsOnline;
    const lang = langSelect.value;
    renderAnalyticsDashboard();
    showToast(lang === 'id' ? (translations.id['Server Status changed.'] || 'Status Server diubah.') : 'Server Status changed.', 2000);
});

// Admin News Save Logic
saveNewsUpdate.addEventListener('click', () => {
    const text = newsUpdateTextarea.value;
    const lang = langSelect.value;
    saveNewsUpdateText(text);
    loadNewsUpdate(); // Update the displayed news
    showToast(lang === 'id' ? (translations.id['News updated successfully.'] || 'Berita berhasil diperbarui.') : 'News updated successfully.', 2000);
});

// Admin SEO Save Logic (NEW: Added Validation)
document.getElementById('saveSeoMeta').addEventListener('click', () => {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    const title = seoTitleInput.value.trim();
    const desc = seoDescTextarea.value.trim();
    const keywords = seoKeywordsInput.value.trim();

    if (!title || !desc || !keywords) {
        showToast(t['‚ö†Ô∏è All SEO fields are required.'] || '‚ö†Ô∏è All SEO fields are required.', 3000);
        return;
    }
    if (title.length > 70 || desc.length > 160) {
        showToast(t['‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.'] || '‚ö†Ô∏è Title (max 70 chars) and Description (max 160 chars) are too long.', 3000);
        return;
    }

    localStorage.setItem('seo_title', title);
    localStorage.setItem('seo_desc', desc);
    localStorage.setItem('seo_keywords', keywords);
    
    loadSeoSettings(); // Apply changes immediately
    showToast(t['SEO Meta updated successfully.'] || 'SEO Meta updated successfully.', 2000);
});


/* =========================== Cookie Consent Logic (NEW FEATURE) =========================== */
const cookieConsent = document.getElementById('cookieConsent');
const acceptCookies = document.getElementById('acceptCookies');

function checkCookieConsent() {
    if (localStorage.getItem('growfax_cookie_consent') !== 'accepted') {
        cookieConsent.classList.remove('hidden');
    }
}
function setCookieConsent() {
    const lang = langSelect.value;
    const t = translations[lang] || translations.en;
    localStorage.setItem('growfax_cookie_consent', 'accepted');
    cookieConsent.classList.add('hidden');
    // Initialize tracking scripts (like Google Analytics) here if they were deferred
    showToast(t['Thank you for accepting cookies.'] || 'Terima kasih telah menerima cookie.', 2000);
}
acceptCookies.addEventListener('click', setCookieConsent);


/* =========================== Initial Load Sequence =========================== */
// Initial call (Must be called in this order)
loadLang(); // Must be called before loadTheme to set initial langSelect value
loadTheme();
loadSeoSettings();
loadNewsUpdate();
updateTime();
handleUrlHash(); // Initial routing/SPA setup
checkCookieConsent(); // NEW: Initial cookie check
updateAuthUI(langSelect.value); // NEW: Set initial Auth UI state
setInterval(updateTime, 1000); // Set a periodic update for time
  </script>
</body>
</html>
