<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Growfax — CPU Mapping</title>
<link rel="icon" href="Growfax_banner.jpg" type="image/jpeg">
<style>
:root {
  --bg: #000;
  --accent: #00ff66;
  --text: #cdeed0;
  --muted: #2d3a2f;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: "Segoe UI", sans-serif;
  overflow: hidden;
}
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px;
}
h1 {
  font-size: 1.3rem;
  margin-bottom: 10px;
}
canvas {
  width: 90vw;
  height: 50vh;
  background: radial-gradient(circle at bottom, #001500, #000);
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0,255,100,0.2);
}
.percent {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  font-size: 80px;
  font-weight: bold;
  color: var(--accent);
  text-shadow: 0 0 20px var(--accent);
}
button {
  margin-top: 20px;
  background: transparent;
  color: var(--text);
  border: 1px solid var(--muted);
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
}
button:hover { background: rgba(255,255,255,0.1); }
</style>
</head>
<body>
<div class="container">
  <h1>Growfax — CPU Mapping</h1>
  <div style="position:relative;">
    <canvas id="cpuCanvas"></canvas>
    <div class="percent" id="cpuPercent">0%</div>
  </div>
  <button onclick="window.location.href='index.html'">← Back</button>
</div>

<script>
const canvas = document.getElementById('cpuCanvas');
const ctx = canvas.getContext('2d');
const percentEl = document.getElementById('cpuPercent');
let W, H;

function resize() {
  W = canvas.width = canvas.offsetWidth * window.devicePixelRatio;
  H = canvas.height = canvas.offsetHeight * window.devicePixelRatio;
  ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
}
window.addEventListener('resize', resize);
resize();

let data = new Array(400).fill(H / 2);
let cpu = 50;
let smoothCpu = cpu;
let lastUpdate = 0;

function nextCPU() {
  // Perlahan ubah target CPU
  cpu += (Math.random() - 0.5) * 4;
  if (Math.random() < 0.01) cpu += Math.random() * 15; // spike jarang
  cpu = Math.max(0, Math.min(100, cpu));
  // Smooth transition (angka CPU bergerak halus)
  smoothCpu += (cpu - smoothCpu) * 0.05;
  percentEl.textContent = `${smoothCpu.toFixed(1)}%`;
  return smoothCpu;
}

let t = 0;
function draw(timestamp) {
  if (timestamp - lastUpdate < 80) {  // frame rate 12-13 fps
    requestAnimationFrame(draw);
    return;
  }
  lastUpdate = timestamp;
  
  ctx.clearRect(0, 0, W, H);
  const grad = ctx.createLinearGradient(0, 0, 0, H);
  grad.addColorStop(0, "#001100");
  grad.addColorStop(1, "#000000");
  ctx.fillStyle = grad;
  ctx.fillRect(0, 0, W, H);

  // grid
  ctx.strokeStyle = "rgba(0,255,100,0.06)";
  for (let y = 0; y < H; y += 40) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(W, y);
    ctx.stroke();
  }

  // data
  data.shift();
  const val = nextCPU();
  const wave =
    H / 2 -
    Math.sin(t / 12) * 20 -
    (val - 50) * 1.5;
  t += 1;
  data.push(wave);

  // draw waveform
  ctx.beginPath();
  ctx.moveTo(0, data[0]);
  for (let i = 1; i < data.length; i++) {
    ctx.lineTo((i * W) / data.length, data[i]);
  }
  ctx.strokeStyle = "#00ff66";
  ctx.lineWidth = 2;
  ctx.shadowColor = "#00ff66";
  ctx.shadowBlur = 15;
  ctx.stroke();
  ctx.shadowBlur = 0;

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
